<mat-card fxFlex=50% fxFlex.xs=100% class="customStyle">
    <div class="title-style">
        <a (click)="goBack()"> <mat-icon class="back">arrow_back</mat-icon></a><mat-card-title >Device Add Form</mat-card-title>
</div>
<mat-card-content>
    <form [formGroup]="myform">
        <div class="main">
            <div class="mainContent">
        <mat-form-field class="full">
            <input trim="blur" matInput placeholder="Name" formControlName="deviceName" autocomplete="off" required />
        </mat-form-field>
        <!-- <div *ngIf="submitted && myform.get('deviceName').errors" class="feedback">
            <div *ngIf=" myform.get('deviceName').errors.required" class="red"> Name is required</div>
        </div> -->




        <mat-form-field class="full">
            <input matInput placeholder="Identifier" formControlName="identifier" autocomplete="off" required />
        </mat-form-field>

       
    </div>
        <div class="optionalContent">
            <mat-accordion class="example-headers-align">
                <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                          <mat-icon>add</mat-icon>  Extra
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <mat-form-field class="half" required>
                        <mat-label>Group</mat-label>
                        <mat-select formControlName="group">
                            <mat-option *ngFor="let state of groups" [value]="state.name">
                                {{ state.name }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field class="half"  required>
                        <mat-label>Category</mat-label>
                        <mat-select formControlName="category">
                            <mat-option *ngFor="let state of deviceCategories" [value]="state.title">
                                <mat-icon> {{ state.icon }}</mat-icon>  {{ state.title }}  
                            </mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field class="half">
                        <input matInput placeholder="Model" formControlName="model" autocomplete="off" />
                    </mat-form-field>

                    <mat-form-field class="half">
                        <input matInput placeholder="Phone" formControlName="phone" autocomplete="off" />
                    </mat-form-field>
            
                    
            
                    <mat-form-field class="half">
                        <input matInput placeholder="Contact" formControlName="contact" autocomplete="off" />
                    </mat-form-field>

                   
            <span class="checkbox">
                    <mat-checkbox class="checkbox" formControlName="disabled" labelPosition="before">
                       Disabled
                    </mat-checkbox>
                </span>   

                    

                </mat-expansion-panel>
            </mat-accordion>

        

            <mat-accordion class="example-headers-align">
                <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <mat-icon>add</mat-icon>  Attributes
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div formArrayName="attributes" *ngFor="let assign of myform.get('attributes')['controls']; let i = index"  >
                        <div [formArrayName]="i">


                    <!-- <mat-form-field class="half">
                        <input trim="blur" matInput placeholder="Name" [id]="'name' + i"  formControlName="name"
                            autocomplete="off"  />
                    </mat-form-field> -->

                    <mat-form-field class="half">
                        <mat-label>Name</mat-label>
                        <mat-select formControlName="name" >
                            <mat-option *ngFor="let state of nameAttributes" [value]="state.value">
                                {{ state.value }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field class="half">
                        <input trim="blur" matInput placeholder="Value" [id]="'value' + i" formControlName="value"
                            autocomplete="off"  />
                    </mat-form-field>

                    <div class="delAssigns" *ngIf="myform.get('attributes').length >1">
                        <a>  <mat-icon (click)="removeAttributes(i)">clear</mat-icon></a>
                    </div>
                </div> 
              
                </div>
                   <button (click)="addassignAttributes()"><mat-icon>add</mat-icon></button>
                </mat-expansion-panel>
            </mat-accordion>
        </div>
    </div>

        <!-- <div *ngIf="submitted && myform.get('status').errors" class="feedback">
            <div *ngIf=" myform.get('status').errors.required" class="red"> Status is required</div>
        </div> -->
    </form>
</mat-card-content>

<div *ngIf="this.show">
    <p class="red">Duplicate Indentifier</p>
</div>

<mat-card-actions class="button">
    <button class="button" mat-stroked-button color="primary" class="btn-block" (click)="addDevice()">
        Add
    </button>
    <p>Note: Field marked with * is Mandatory</p>
</mat-card-actions>


</mat-card>

