(window.webpackJsonp=window.webpackJsonp||[]).push([[12,33],{"1jOF":function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));var i=c("AytR"),a=c("fXoL"),o=c("tk/3");let r=(()=>{class t{constructor(t){this.http=t,this.url=i.a.apiUrl+"/driver/"}addDriver(t){return this.http.post(this.url+"/addDriver",t)}getAllDriver(){return this.http.get(this.url+"/listDriver")}getAllDriversByPage(t){return this.http.post(this.url+"/listDriversByPage",t)}getDriverById(t){return this.http.get(this.url+t+"/editDriver")}updateDriver(t,e){return this.http.put(this.url+t+"/updateDriver",e)}deleteDriver(t){return this.http.delete(this.url+t+"/deleteDriver")}addDriverWithDevice(t){return this.http.post(this.url+"/addDeviceDriver",t)}deleteDeviceDriver(t){return this.http.post(this.url+"/deleteDeviceDriver",t)}getDriverByDeviceId(t){return this.http.get(this.url+t+"/getDriverByDevice")}addDriverWithGroup(t){return this.http.post(this.url+"/addGroupDriver",t)}deleteGroupDriver(t){return this.http.post(this.url+"/deleteGroupDriver",t)}getDriverByGroupId(t){return this.http.get(this.url+t+"/getDriverByGroup")}addDriverWithUser(t){return this.http.post(this.url+"/addUserDriver",t)}deleteUserDriver(t){return this.http.post(this.url+"/deleteUserDriver",t)}getDriverByUserId(t){return this.http.get(this.url+t+"/getDriverByUser")}getAllCustomerDriver(){return this.http.get(this.url+"/listCustomerDriver")}getDriverByCustomerId(t){return this.http.get(this.url+t+"/getDriverByCustomerId")}addDriverWithCustomer(t){return this.http.post(this.url+"/addCustomerDriver",t)}deleteCustomerDriver(t){return this.http.post(this.url+"/deleteCustomerDriver",t)}}return t.\u0275fac=function(e){return new(e||t)(a.jc(o.b))},t.\u0275prov=a.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Cp0R:function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));var i=c("fXoL"),a=c("Ofeh"),o=c("tyNb");let r=(()=>{class t{constructor(t,e){this.loginService=t,this.router=e,this.assigedRole=[]}canActivate(t,e){return this.loginService.loggedIn()?(this.assigedRole=JSON.parse(sessionStorage.getItem("rolesData")),1==this.assigedRole.includes(t.data.roles)||(this.router.navigate(["/deny"]),!1)):(this.router.navigate(["/"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(i.jc(a.a),i.jc(o.c))},t.\u0275prov=i.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},H0VJ:function(t,e,c){"use strict";c.d(e,"a",(function(){return s}));var i=c("fXoL"),a=c("0IaG"),o=c("NFeN"),r=c("bTqV");let n=(()=>{class t{constructor(t){this.dialogRef=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(a.f))},t.\u0275cmp=i.Tb({type:t,selectors:[["app-mat-dialog"]],decls:11,vars:2,consts:[[1,"content-container"],["id","close-button",3,"click"],[1,"content-span"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button","color","warn",3,"mat-dialog-close"]],template:function(t,e){1&t&&(i.fc(0,"div"),i.fc(1,"div",0),i.fc(2,"mat-icon",1),i.nc("click",(function(){return e.closeDialog()})),i.Sc(3,"close"),i.ec(),i.fc(4,"div",2),i.Sc(5,"Are you sure to delete this record ?"),i.ec(),i.ec(),i.fc(6,"div"),i.fc(7,"button",3),i.Sc(8,"No"),i.ec(),i.fc(9,"button",4),i.Sc(10,"Yes"),i.ec(),i.ec(),i.ec()),2&t&&(i.Ob(7),i.yc("mat-dialog-close",!1),i.Ob(2),i.yc("mat-dialog-close",!0))},directives:[o.a,r.b,a.c],styles:["#close-button[_ngcontent-%COMP%]{margin-left:90%;cursor:pointer}.content-span[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:20px}#no-button[_ngcontent-%COMP%]{width:30%;margin-left:7%;margin-right:25%;background-color:#ff0}#yes-button[_ngcontent-%COMP%]{width:30%}"]}),t})(),s=(()=>{class t{constructor(t){this.dialog=t}openConfirmDialog(){return this.dialog.open(n,{width:"300px",disableClose:!0,position:{top:"20px"}})}}return t.\u0275fac=function(e){return new(e||t)(i.jc(a.b))},t.\u0275prov=i.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Lm2h:function(t,e,c){"use strict";c.r(e),c.d(e,"DevicesModule",(function(){return rc}));var i=c("ofXK"),a=c("3Pt+"),o=c("jAig"),r=c("KUt4"),n=c("YUcS"),s=c("tyNb"),l=c("Cp0R"),d=c("fXoL"),u=c("dNgK"),m=c("XCAU"),f=c("lLy5"),h=c("Wp6s"),p=c("XiUz"),g=c("NFeN"),v=c("kmnG"),b=c("qFsG"),y=c("7EHt"),S=c("d3UM"),D=c("bSwM"),C=c("bTqV"),O=c("FKr1");function w(t,e){if(1&t&&(d.fc(0,"mat-option",27),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.yc("value",t.name),d.Ob(1),d.Uc(" ",t.name," ")}}function k(t,e){if(1&t&&(d.fc(0,"mat-option",27),d.fc(1,"mat-icon"),d.Sc(2),d.ec(),d.Sc(3),d.ec()),2&t){const t=e.$implicit;d.yc("value",t.title),d.Ob(2),d.Uc(" ",t.icon,""),d.Ob(1),d.Uc(" ",t.title," ")}}function x(t,e){if(1&t&&(d.fc(0,"mat-option",27),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.yc("value",t.value),d.Ob(1),d.Uc(" ",t.value," ")}}function I(t,e){if(1&t){const t=d.gc();d.fc(0,"div",33),d.fc(1,"a"),d.fc(2,"mat-icon",2),d.nc("click",(function(){d.Jc(t);const e=d.rc().index;return d.rc().removeAttributes(e)})),d.Sc(3,"clear"),d.ec(),d.ec(),d.ec()}}function R(t,e){if(1&t&&(d.fc(0,"div",28),d.fc(1,"div",29),d.fc(2,"mat-form-field",17),d.fc(3,"mat-label"),d.Sc(4,"Name"),d.ec(),d.fc(5,"mat-select",30),d.Rc(6,x,2,2,"mat-option",15),d.ec(),d.ec(),d.fc(7,"mat-form-field",17),d.ac(8,"input",31),d.ec(),d.Rc(9,I,4,0,"div",32),d.ec(),d.ec()),2&t){const t=e.index,c=d.rc();d.Ob(1),d.yc("formArrayName",t),d.Ob(5),d.yc("ngForOf",c.nameAttributes),d.Ob(2),d.yc("id","value"+t),d.Ob(1),d.yc("ngIf",c.myform.get("attributes").length>1)}}function P(t,e){1&t&&(d.fc(0,"div"),d.fc(1,"p",34),d.Sc(2,"Duplicate Indentifier"),d.ec(),d.ec())}let A=(()=>{class t{constructor(t,e,c,i,a){this.fb=t,this.router=e,this.snackBar=c,this.deviceService=i,this.groupService=a,this.groups=[],this.object={},this.att=[],this.submitted=!1,this.categories=[{id:1,value:"Bus"},{id:0,value:"Car"},{id:0,value:"Truck"}],this.nameAttributes=[{value:"Web: Report Color"},{value:"Device Password"},{value:"Processing: Copy"},{value:"Attributes"},{value:"Timezone"},{value:"Device Inactivity Start"},{value:"Device Inactivity Period"},{value:"Speed Limit"},{value:"Report Ignore"},{value:"Odometer"}],this.step=0}setStep(t){this.step=t}ngOnInit(){this.myform=this.fb.group({deviceName:["",[a.u.required]],identifier:["",[a.u.required]],group:[],phone:[""],model:[""],contact:[""],category:[""],disabled:[],attributes:this.fb.array([])}),this.getAllGroup(),this.getAllDeviceCategory()}getAllGroup(){this.groupService.getAllGroup().subscribe(t=>{this.groups=t})}assignAttributes(){return this.fb.group({name:[""],value:[""]})}get fArray(){return this.myform.get("attributes")}addassignAttributes(){this.fArray.push(this.assignAttributes())}removeAttributes(t){this.myform.get("attributes").removeAt(t)}openSnackBar(){this.snackBar.open("Successfully added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}getAllDeviceCategory(){this.deviceService.getAllDeviceCategory().subscribe(t=>{this.deviceCategories=t})}goBack(){this.router.navigate(["/admin/traccar/devices/list"])}addDevice(){this.myform.markAllAsTouched(),this.submitted=!0,this.myform.invalid||(this.myform.value.attributes&&this.myform.value.attributes.forEach(t=>{this.object[t.name]=t.value}),this.myform.value.attributes=this.object,console.log(this.myform.value.identifier.length),this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.created_by=this.userData.id,console.log(this.myform.value),this.deviceService.addDevice(this.myform.value).subscribe(t=>{t.message?(console.log(t.id),this.show=!0):(this.openSnackBar(),this.router.navigate(["/admin/traccar/devices/list"]))}))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(a.e),d.Zb(s.c),d.Zb(u.a),d.Zb(m.a),d.Zb(f.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-device-add"]],decls:59,vars:7,consts:[["fxFlex","50%","fxFlex.xs","100%",1,"customStyle"],[1,"title-style"],[3,"click"],[1,"back"],[3,"formGroup"],[1,"main"],[1,"mainContent"],[1,"full"],["trim","blur","matInput","","placeholder","Name","formControlName","deviceName","autocomplete","off","required",""],["matInput","","placeholder","Identifier","formControlName","identifier","autocomplete","off","required",""],[1,"optionalContent"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],["required","",1,"half"],["formControlName","group"],[3,"value",4,"ngFor","ngForOf"],["formControlName","category"],[1,"half"],["matInput","","placeholder","Model","formControlName","model","autocomplete","off"],["matInput","","placeholder","Phone","formControlName","phone","autocomplete","off"],["matInput","","placeholder","Contact","formControlName","contact","autocomplete","off"],[1,"checkbox"],["formControlName","disabled","labelPosition","before",1,"checkbox"],["formArrayName","attributes",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],[3,"value"],["formArrayName","attributes"],[3,"formArrayName"],["formControlName","name"],["trim","blur","matInput","","placeholder","Value","formControlName","value","autocomplete","off",3,"id"],["class","delAssigns",4,"ngIf"],[1,"delAssigns"],[1,"red"]],template:function(t,e){1&t&&(d.fc(0,"mat-card",0),d.fc(1,"div",1),d.fc(2,"a",2),d.nc("click",(function(){return e.goBack()})),d.fc(3,"mat-icon",3),d.Sc(4,"arrow_back"),d.ec(),d.ec(),d.fc(5,"mat-card-title"),d.Sc(6,"Device Add Form"),d.ec(),d.ec(),d.fc(7,"mat-card-content"),d.fc(8,"form",4),d.fc(9,"div",5),d.fc(10,"div",6),d.fc(11,"mat-form-field",7),d.ac(12,"input",8),d.ec(),d.fc(13,"mat-form-field",7),d.ac(14,"input",9),d.ec(),d.ec(),d.fc(15,"div",10),d.fc(16,"mat-accordion",11),d.fc(17,"mat-expansion-panel",12),d.nc("opened",(function(){return e.setStep(1)})),d.fc(18,"mat-expansion-panel-header"),d.fc(19,"mat-panel-title"),d.fc(20,"mat-icon"),d.Sc(21,"add"),d.ec(),d.Sc(22," Extra "),d.ec(),d.ec(),d.fc(23,"mat-form-field",13),d.fc(24,"mat-label"),d.Sc(25,"Group"),d.ec(),d.fc(26,"mat-select",14),d.Rc(27,w,2,2,"mat-option",15),d.ec(),d.ec(),d.fc(28,"mat-form-field",13),d.fc(29,"mat-label"),d.Sc(30,"Category"),d.ec(),d.fc(31,"mat-select",16),d.Rc(32,k,4,3,"mat-option",15),d.ec(),d.ec(),d.fc(33,"mat-form-field",17),d.ac(34,"input",18),d.ec(),d.fc(35,"mat-form-field",17),d.ac(36,"input",19),d.ec(),d.fc(37,"mat-form-field",17),d.ac(38,"input",20),d.ec(),d.fc(39,"span",21),d.fc(40,"mat-checkbox",22),d.Sc(41," Disabled "),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(42,"mat-accordion",11),d.fc(43,"mat-expansion-panel",12),d.nc("opened",(function(){return e.setStep(2)})),d.fc(44,"mat-expansion-panel-header"),d.fc(45,"mat-panel-title"),d.fc(46,"mat-icon"),d.Sc(47,"add"),d.ec(),d.Sc(48," Attributes "),d.ec(),d.ec(),d.Rc(49,R,10,4,"div",23),d.fc(50,"button",2),d.nc("click",(function(){return e.addassignAttributes()})),d.fc(51,"mat-icon"),d.Sc(52,"add"),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.Rc(53,P,3,0,"div",24),d.fc(54,"mat-card-actions",25),d.fc(55,"button",26),d.nc("click",(function(){return e.addDevice()})),d.Sc(56," Add "),d.ec(),d.fc(57,"p"),d.Sc(58,"Note: Field marked with * is Mandatory"),d.ec(),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("formGroup",e.myform),d.Ob(9),d.yc("expanded",1===e.step),d.Ob(10),d.yc("ngForOf",e.groups),d.Ob(5),d.yc("ngForOf",e.deviceCategories),d.Ob(11),d.yc("expanded",2===e.step),d.Ob(6),d.yc("ngForOf",e.myform.get("attributes").controls),d.Ob(4),d.yc("ngIf",e.show))},directives:[h.a,p.a,g.a,h.f,h.c,a.v,a.o,a.g,v.c,b.b,a.c,a.n,a.f,a.t,y.a,y.c,y.d,y.e,v.g,S.a,i.l,D.a,i.m,h.b,C.b,O.o,a.d],styles:["mat-card[_ngcontent-%COMP%]{width:50%;top:0}.customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{color:#1a237e;text-align:center!important}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}.button[_ngcontent-%COMP%]{margin-top:100px}.half[_ngcontent-%COMP%]{width:40%}.delAssigns[_ngcontent-%COMP%]{margin-top:25px}a[_ngcontent-%COMP%]{cursor:pointer}.forcheckbox[_ngcontent-%COMP%]{margin-right:10px}.back[_ngcontent-%COMP%]{float:left}"]}),t})();var M=c("M9IT"),_=c("Dh3D"),T=c("+0xr"),B=c("0IaG"),N=c("1jOF"),Z=c("H0VJ");function F(t,e){1&t&&d.ac(0,"th",11)}function E(t,e){if(1&t){const t=d.gc();d.fc(0,"td",12),d.fc(1,"mat-checkbox",13),d.nc("change",(function(c){d.Jc(t);const i=e.$implicit;return d.rc().check(c.checked,i)})),d.ec(),d.ec()}if(2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.yc("checked",c.checkState(t.id))}}function $(t,e){1&t&&(d.fc(0,"th",11),d.Sc(1,"Name"),d.ec())}function j(t,e){if(1&t&&(d.fc(0,"td",12),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.name)}}function U(t,e){1&t&&(d.fc(0,"th",11),d.Sc(1,"Identifer"),d.ec())}function W(t,e){if(1&t&&(d.fc(0,"td",12),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.uniqueid)}}function J(t,e){1&t&&d.ac(0,"tr",14)}function q(t,e){1&t&&d.ac(0,"tr",15)}let H=(()=>{class t{constructor(t,e,c,i,a,o,r){this.driverService=t,this.snackBar=e,this.router=c,this.dialogService=i,this.dialogRef=a,this.dialog=o,this.data=r,this.dataSource=new T.k([]),this.displayedColumns=["select","name","identifier"],this.Id=r.pageValue}ngOnInit(){this.getAllDriver(),this.getAllDriverByDevice()}getAllDriver(){this.driverService.getAllDriver().subscribe(t=>{this.drivers=t,this.dataSource=new T.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}getAllDriverByDevice(){this.driverService.getDriverByDeviceId(this.Id).subscribe(t=>{console.log(t),this.deviceDrivers=t,this.deviceDrivers.forEach(t=>{this.deviceDrivers.push(t.driverid)})})}close(){this.dialogRef.close()}checkState(t){if(this.deviceDrivers)return this.deviceDrivers.indexOf(t)>-1}check(t,e){t?(this.object={deviceId:this.Id,driverId:e.id},this.driverService.addDriverWithDevice(this.object).subscribe()):(this.object={deviceId:this.Id,driverId:e.id},this.driverService.deleteDeviceDriver(this.object).subscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(N.a),d.Zb(u.a),d.Zb(s.c),d.Zb(Z.a),d.Zb(B.f),d.Zb(B.b),d.Zb(B.a,8))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-driver-popup"]],viewQuery:function(t,e){var c;1&t&&(d.Wc(_.a,!0),d.Wc(M.a,!0)),2&t&&(d.Ec(c=d.oc())&&(e.sort=c.first),d.Ec(c=d.oc())&&(e.paginator=c.first))},decls:20,vars:3,consts:[[1,"custom-style"],[1,"table-title"],[3,"click"],["mat-table","","matTableExporter","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","identifier"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"checked","change"],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){1&t&&(d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Driver Table"),d.ec(),d.fc(4,"span"),d.fc(5,"a"),d.fc(6,"mat-icon",2),d.nc("click",(function(){return e.close()})),d.Sc(7,"X"),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(8,"table",3),d.dc(9,4),d.Rc(10,F,1,0,"th",5),d.Rc(11,E,2,1,"td",6),d.cc(),d.dc(12,7),d.Rc(13,$,2,0,"th",5),d.Rc(14,j,2,1,"td",6),d.cc(),d.dc(15,8),d.Rc(16,U,2,0,"th",5),d.Rc(17,W,2,1,"td",6),d.cc(),d.Rc(18,J,1,0,"tr",9),d.Rc(19,q,1,0,"tr",10),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("dataSource",e.dataSource),d.Ob(10),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns))},directives:[g.a,T.j,r.a,T.c,T.e,T.b,T.g,T.i,T.d,T.a,D.a,T.f,T.h],styles:["h3[_ngcontent-%COMP%]{float:left;margin-right:70%;margin-left:5%}"]}),t})();var G=c("Kqty");function z(t,e){1&t&&d.ac(0,"th",12)}function L(t,e){if(1&t){const t=d.gc();d.fc(0,"td",13),d.fc(1,"mat-checkbox",14),d.nc("change",(function(c){d.Jc(t);const i=e.$implicit;return d.rc().check(c.checked,i)})),d.ec(),d.ec()}if(2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.yc("checked",c.checkState(t.id))}}function V(t,e){1&t&&(d.fc(0,"th",12),d.Sc(1,"Type of notification"),d.ec())}function X(t,e){if(1&t&&(d.fc(0,"td",13),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.type)}}function Q(t,e){1&t&&(d.fc(0,"th",12),d.Sc(1,"All Devices"),d.ec())}function Y(t,e){if(1&t&&(d.fc(0,"td",13),d.Sc(1),d.ec()),2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.Tc(null==c.states[t.always]?null:c.states[t.always].value)}}function K(t,e){1&t&&(d.fc(0,"th",12),d.Sc(1,"Channels"),d.ec())}function tt(t,e){if(1&t&&(d.fc(0,"td",13),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.notificators)}}function et(t,e){1&t&&d.ac(0,"tr",15)}function ct(t,e){1&t&&d.ac(0,"tr",16)}let it=(()=>{class t{constructor(t,e,c,i,a,o,r){this.notificationService=t,this.snackBar=e,this.router=c,this.dialogService=i,this.dialogRef=a,this.dialog=o,this.data=r,this.dataSource=new T.k([]),this.states=[{id:0,value:"NO"},{id:1,value:"YES"}],this.displayedColumns=["select","name","identifier","always"],this.Id=r.pageValue}ngOnInit(){this.getAllDriver(),this.getAllDriverByDevice()}getAllDriver(){this.notificationService.getAllNotification().subscribe(t=>{console.log(t),this.notifications=t,this.dataSource=new T.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}getAllDriverByDevice(){this.notificationService.getNotificationByDeviceId(this.Id).subscribe(t=>{console.log(t),this.deviceNotifications=t,this.deviceNotifications.forEach(t=>{this.deviceNotifications.push(t.notificationid)})})}close(){this.dialogRef.close()}checkState(t){if(this.deviceNotifications)return this.deviceNotifications.indexOf(t)>-1}check(t,e){t?(this.object={deviceId:this.Id,notificationId:e.id},this.notificationService.addNotificationWithDevice(this.object).subscribe()):(this.object={deviceId:this.Id,notificationId:e.id},this.notificationService.deleteDeviceNotification(this.object).subscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(G.a),d.Zb(u.a),d.Zb(s.c),d.Zb(Z.a),d.Zb(B.f),d.Zb(B.b),d.Zb(B.a,8))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-notification-popup"]],viewQuery:function(t,e){var c;1&t&&(d.Wc(_.a,!0),d.Wc(M.a,!0)),2&t&&(d.Ec(c=d.oc())&&(e.sort=c.first),d.Ec(c=d.oc())&&(e.paginator=c.first))},decls:23,vars:3,consts:[[1,"custom-style"],[1,"table-title"],[3,"click"],["mat-table","","matTableExporter","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","always"],["matColumnDef","identifier"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"checked","change"],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){1&t&&(d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Notification Table"),d.ec(),d.fc(4,"span"),d.fc(5,"a"),d.fc(6,"mat-icon",2),d.nc("click",(function(){return e.close()})),d.Sc(7,"X"),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(8,"table",3),d.dc(9,4),d.Rc(10,z,1,0,"th",5),d.Rc(11,L,2,1,"td",6),d.cc(),d.dc(12,7),d.Rc(13,V,2,0,"th",5),d.Rc(14,X,2,1,"td",6),d.cc(),d.dc(15,8),d.Rc(16,Q,2,0,"th",5),d.Rc(17,Y,2,1,"td",6),d.cc(),d.dc(18,9),d.Rc(19,K,2,0,"th",5),d.Rc(20,tt,2,1,"td",6),d.cc(),d.Rc(21,et,1,0,"tr",10),d.Rc(22,ct,1,0,"tr",11),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("dataSource",e.dataSource),d.Ob(13),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns))},directives:[g.a,T.j,r.a,T.c,T.e,T.b,T.g,T.i,T.d,T.a,D.a,T.f,T.h],styles:["h3[_ngcontent-%COMP%]{float:left;margin-right:60%;margin-left:5%}"]}),t})();var at=c("hrIc");function ot(t,e){1&t&&d.ac(0,"th",13)}function rt(t,e){if(1&t){const t=d.gc();d.fc(0,"td",14),d.fc(1,"mat-checkbox",15),d.nc("change",(function(c){d.Jc(t);const i=e.$implicit;return d.rc().check(c.checked,i)})),d.ec(),d.ec()}if(2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.yc("checked",c.checkState(t.id))}}function nt(t,e){1&t&&(d.fc(0,"th",13),d.Sc(1,"Name"),d.ec())}function st(t,e){if(1&t&&(d.fc(0,"td",14),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.name)}}function lt(t,e){1&t&&(d.fc(0,"th",13),d.Sc(1,"Type"),d.ec())}function dt(t,e){if(1&t&&(d.fc(0,"td",14),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.type)}}function ut(t,e){1&t&&(d.fc(0,"th",13),d.Sc(1,"Start"),d.ec())}function mt(t,e){if(1&t&&(d.fc(0,"td",14),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.start)}}function ft(t,e){1&t&&(d.fc(0,"th",13),d.Sc(1,"Period"),d.ec())}function ht(t,e){if(1&t&&(d.fc(0,"td",14),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.period)}}function pt(t,e){1&t&&d.ac(0,"tr",16)}function gt(t,e){1&t&&d.ac(0,"tr",17)}let vt=(()=>{class t{constructor(t,e,c,i,a,o,r){this.maintenanceService=t,this.snackBar=e,this.router=c,this.dialogService=i,this.dialogRef=a,this.dialog=o,this.data=r,this.dataSource=new T.k([]),this.displayedColumns=["select","name","type","start","period"],this.Id=r.pageValue}ngOnInit(){this.getAllDriver(),this.getAllDriverByDevice()}getAllDriver(){this.maintenanceService.getAllMaintenance().subscribe(t=>{this.maintenance=t,this.dataSource=new T.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}getAllDriverByDevice(){this.maintenanceService.getMaintenanceByDeviceId(this.Id).subscribe(t=>{console.log(t),this.deviceMaintenance=t,this.deviceMaintenance.forEach(t=>{this.deviceMaintenance.push(t.maintenance_id)})})}close(){this.dialogRef.close()}checkState(t){if(this.deviceMaintenance)return this.deviceMaintenance.indexOf(t)>-1}check(t,e){t?(this.object={deviceId:this.Id,maintenanceId:e.id},this.maintenanceService.addMaintenanceWithDevice(this.object).subscribe()):(this.object={deviceId:this.Id,maintenanceId:e.id},this.maintenanceService.deleteDeviceMaintenance(this.object).subscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(at.a),d.Zb(u.a),d.Zb(s.c),d.Zb(Z.a),d.Zb(B.f),d.Zb(B.b),d.Zb(B.a,8))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-maintenance-device"]],viewQuery:function(t,e){var c;1&t&&(d.Wc(_.a,!0),d.Wc(M.a,!0)),2&t&&(d.Ec(c=d.oc())&&(e.sort=c.first),d.Ec(c=d.oc())&&(e.paginator=c.first))},decls:26,vars:3,consts:[[1,"custom-style"],[1,"table-title"],[3,"click"],["mat-table","","matTableExporter","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","start"],["matColumnDef","period"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"checked","change"],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){1&t&&(d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Maintenance Table"),d.ec(),d.fc(4,"span"),d.fc(5,"a"),d.fc(6,"mat-icon",2),d.nc("click",(function(){return e.close()})),d.Sc(7,"X"),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(8,"table",3),d.dc(9,4),d.Rc(10,ot,1,0,"th",5),d.Rc(11,rt,2,1,"td",6),d.cc(),d.dc(12,7),d.Rc(13,nt,2,0,"th",5),d.Rc(14,st,2,1,"td",6),d.cc(),d.dc(15,8),d.Rc(16,lt,2,0,"th",5),d.Rc(17,dt,2,1,"td",6),d.cc(),d.dc(18,9),d.Rc(19,ut,2,0,"th",5),d.Rc(20,mt,2,1,"td",6),d.cc(),d.dc(21,10),d.Rc(22,ft,2,0,"th",5),d.Rc(23,ht,2,1,"td",6),d.cc(),d.Rc(24,pt,1,0,"tr",11),d.Rc(25,gt,1,0,"tr",12),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("dataSource",e.dataSource),d.Ob(16),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns))},directives:[g.a,T.j,r.a,T.c,T.e,T.b,T.g,T.i,T.d,T.a,D.a,T.f,T.h],styles:["h3[_ngcontent-%COMP%]{float:left;margin-right:60%;margin-left:5%}"]}),t})();var bt=c("9TBo");function yt(t,e){1&t&&d.ac(0,"th",11)}function St(t,e){if(1&t){const t=d.gc();d.fc(0,"td",12),d.fc(1,"mat-checkbox",13),d.nc("change",(function(c){d.Jc(t);const i=e.$implicit;return d.rc().check(c.checked,i)})),d.ec(),d.ec()}if(2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.yc("checked",c.checkState(t.id))}}function Dt(t,e){1&t&&(d.fc(0,"th",11),d.Sc(1,"Description"),d.ec())}function Ct(t,e){if(1&t&&(d.fc(0,"td",12),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.description)}}function Ot(t,e){1&t&&(d.fc(0,"th",11),d.Sc(1,"Attribute"),d.ec())}function wt(t,e){if(1&t&&(d.fc(0,"td",12),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.attribute)}}function kt(t,e){1&t&&d.ac(0,"tr",14)}function xt(t,e){1&t&&d.ac(0,"tr",15)}let It=(()=>{class t{constructor(t,e,c,i,a,o,r){this.attributeService=t,this.snackBar=e,this.router=c,this.dialogService=i,this.dialogRef=a,this.dialog=o,this.data=r,this.dataSource=new T.k([]),this.displayedColumns=["select","name","identifier"],this.Id=r.pageValue}ngOnInit(){this.getAllDriver(),this.getAllDriverByDevice()}getAllDriver(){this.attributeService.getAllAttribute().subscribe(t=>{this.attributes=t,this.dataSource=new T.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}getAllDriverByDevice(){this.attributeService.getAttributeByDeviceId(this.Id).subscribe(t=>{console.log(t),this.deviceAttributes=t,this.deviceAttributes.forEach(t=>{this.deviceAttributes.push(t.attributeid)})})}close(){this.dialogRef.close()}checkState(t){if(this.deviceAttributes)return this.deviceAttributes.indexOf(t)>-1}check(t,e){t?(this.object={deviceId:this.Id,attributeId:e.id},this.attributeService.addAttributeWithDevice(this.object).subscribe()):(this.object={deviceId:this.Id,attributeId:e.id},this.attributeService.deleteDeviceAttribute(this.object).subscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(bt.a),d.Zb(u.a),d.Zb(s.c),d.Zb(Z.a),d.Zb(B.f),d.Zb(B.b),d.Zb(B.a,8))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-attribute-device"]],viewQuery:function(t,e){var c;1&t&&(d.Wc(_.a,!0),d.Wc(M.a,!0)),2&t&&(d.Ec(c=d.oc())&&(e.sort=c.first),d.Ec(c=d.oc())&&(e.paginator=c.first))},decls:20,vars:3,consts:[[1,"custom-style"],[1,"table-title"],[3,"click"],["mat-table","","matTableExporter","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","identifier"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"checked","change"],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){1&t&&(d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Driver Table"),d.ec(),d.fc(4,"span"),d.fc(5,"a"),d.fc(6,"mat-icon",2),d.nc("click",(function(){return e.close()})),d.Sc(7,"X"),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(8,"table",3),d.dc(9,4),d.Rc(10,yt,1,0,"th",5),d.Rc(11,St,2,1,"td",6),d.cc(),d.dc(12,7),d.Rc(13,Dt,2,0,"th",5),d.Rc(14,Ct,2,1,"td",6),d.cc(),d.dc(15,8),d.Rc(16,Ot,2,0,"th",5),d.Rc(17,wt,2,1,"td",6),d.cc(),d.Rc(18,kt,1,0,"tr",9),d.Rc(19,xt,1,0,"tr",10),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("dataSource",e.dataSource),d.Ob(10),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns))},directives:[g.a,T.j,r.a,T.c,T.e,T.b,T.g,T.i,T.d,T.a,D.a,T.f,T.h],styles:["h3[_ngcontent-%COMP%]{float:left;margin-right:70%;margin-left:5%}"]}),t})();var Rt=c("9dHA");function Pt(t,e){1&t&&d.ac(0,"th",12)}function At(t,e){if(1&t){const t=d.gc();d.fc(0,"td",13),d.fc(1,"mat-checkbox",14),d.nc("change",(function(c){d.Jc(t);const i=e.$implicit;return d.rc().check(c.checked,i)})),d.ec(),d.ec()}if(2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.yc("checked",c.checkState(t.id))}}function Mt(t,e){1&t&&(d.fc(0,"th",12),d.Sc(1,"Type"),d.ec())}function _t(t,e){if(1&t&&(d.fc(0,"td",13),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.type)}}function Tt(t,e){1&t&&(d.fc(0,"th",12),d.Sc(1,"Description"),d.ec())}function Bt(t,e){if(1&t&&(d.fc(0,"td",13),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.description)}}function Nt(t,e){1&t&&(d.fc(0,"th",12),d.Sc(1,"Send SMS"),d.ec())}function Zt(t,e){if(1&t&&(d.fc(0,"td",13),d.Sc(1),d.ec()),2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.Tc(null==c.sms[t.textchannel]?null:c.sms[t.textchannel].value)}}function Ft(t,e){1&t&&d.ac(0,"tr",15)}function Et(t,e){1&t&&d.ac(0,"tr",16)}let $t=(()=>{class t{constructor(t,e,c,i,a,o,r){this.commandService=t,this.snackBar=e,this.router=c,this.dialogService=i,this.dialogRef=a,this.dialog=o,this.data=r,this.dataSource=new T.k([]),this.displayedColumns=["select","name","description","sms"],this.sms=[{id:1,value:"true"},{id:0,value:"false"}],this.Id=r.pageValue}ngOnInit(){this.getAllDriver(),this.getAllDriverByDevice()}getAllDriver(){this.commandService.getAllCommand().subscribe(t=>{this.commands=t,this.dataSource=new T.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}getAllDriverByDevice(){this.commandService.getCommandByDeviceId(this.Id).subscribe(t=>{console.log(t),this.deviceCommands=t,this.deviceCommands.forEach(t=>{this.deviceCommands.push(t.commandid)})})}close(){this.dialogRef.close()}checkState(t){if(this.deviceCommands)return this.deviceCommands.indexOf(t)>-1}check(t,e){t?(this.object={deviceId:this.Id,commandId:e.id},this.commandService.addCommandWithDevice(this.object).subscribe()):(this.object={deviceId:this.Id,commandId:e.id},this.commandService.deleteDeviceCommand(this.object).subscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(Rt.a),d.Zb(u.a),d.Zb(s.c),d.Zb(Z.a),d.Zb(B.f),d.Zb(B.b),d.Zb(B.a,8))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-command-device"]],viewQuery:function(t,e){var c;1&t&&(d.Wc(_.a,!0),d.Wc(M.a,!0)),2&t&&(d.Ec(c=d.oc())&&(e.sort=c.first),d.Ec(c=d.oc())&&(e.paginator=c.first))},decls:23,vars:3,consts:[[1,"custom-style"],[1,"table-title"],[3,"click"],["mat-table","","matTableExporter","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","sms"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"checked","change"],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){1&t&&(d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Command Table"),d.ec(),d.fc(4,"span"),d.fc(5,"a"),d.fc(6,"mat-icon",2),d.nc("click",(function(){return e.close()})),d.Sc(7,"X"),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(8,"table",3),d.dc(9,4),d.Rc(10,Pt,1,0,"th",5),d.Rc(11,At,2,1,"td",6),d.cc(),d.dc(12,7),d.Rc(13,Mt,2,0,"th",5),d.Rc(14,_t,2,1,"td",6),d.cc(),d.dc(15,8),d.Rc(16,Tt,2,0,"th",5),d.Rc(17,Bt,2,1,"td",6),d.cc(),d.dc(18,9),d.Rc(19,Nt,2,0,"th",5),d.Rc(20,Zt,2,1,"td",6),d.cc(),d.Rc(21,Ft,1,0,"tr",10),d.Rc(22,Et,1,0,"tr",11),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("dataSource",e.dataSource),d.Ob(13),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns))},directives:[g.a,T.j,r.a,T.c,T.e,T.b,T.g,T.i,T.d,T.a,D.a,T.f,T.h],styles:["h3[_ngcontent-%COMP%]{float:left;margin-right:60%;margin-left:5%}"]}),t})();var jt=c("Xa2L");function Ut(t,e){1&t&&(d.fc(0,"mat-card",12),d.ac(1,"mat-progress-spinner",13),d.ec())}let Wt=(()=>{class t{constructor(t,e,c,i,a,o){this.fb=t,this.dialogRef=e,this.dialog=c,this.router=i,this.snackBar=a,this.deviceService=o,this.errorInfo=[]}ngOnInit(){this.myform=this.fb.group({deviceName:["",[a.u.required]],identifier:["",[a.u.required]],group:[],phone:[""],model:[""],contact:[""],category:[""],disabled:[],attributes:this.fb.array([])}),this.dialogRef.disableClose=!0}close(){this.dialogRef.close()}openSnackBar(){this.snackBar.open("Successfully added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}importDevice(){this.errorInfo=[],this.myform.markAllAsTouched(),this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.created_by=this.userData.id,this.myform.value.identifier.split(",").forEach(t=>{this.isLoading=!0,11!=t.length&&this.errorInfo.push({id:t,status:"Fail",reason:"Invalid Format"}),11==t.length&&(this.myform.value.identifier=t,this.deviceService.addDevice(this.myform.value).subscribe(t=>{t.message&&this.errorInfo.push({id:t.id,status:"Fail",reason:"Already exits"})}))}),this.isLoading=!1,this.dialogRef.close(),console.log(this.errorInfo),this.deviceService.importDataExchange(this.errorInfo)}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(a.e),d.Zb(B.f),d.Zb(B.b),d.Zb(s.c),d.Zb(u.a),d.Zb(m.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-device-import"]],decls:23,vars:2,consts:[[1,"table-title"],[3,"click"],[1,"customStyle"],[3,"formGroup"],[1,"main"],[1,"full"],["trim","blur","matInput","","placeholder","Name","formControlName","deviceName","autocomplete","off","required",""],["matInput","","placeholder","IMEI","formControlName","identifier","autocomplete","off","required","",2,"height","100px"],["align","end"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],["class","center","style","display:flex; justify-content: center; align-items: center",4,"ngIf"],[1,"center",2,"display","flex","justify-content","center","align-items","center"],["color","primary","mode","indeterminate"]],template:function(t,e){1&t&&(d.fc(0,"div",0),d.fc(1,"h3"),d.Sc(2,"Import Device"),d.ec(),d.fc(3,"span"),d.fc(4,"a"),d.fc(5,"mat-icon",1),d.nc("click",(function(){return e.close()})),d.Sc(6,"close"),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(7,"mat-card",2),d.fc(8,"mat-card-content"),d.fc(9,"form",3),d.fc(10,"div",4),d.fc(11,"mat-form-field",5),d.ac(12,"input",6),d.ec(),d.fc(13,"mat-form-field",5),d.ac(14,"input",7),d.fc(15,"mat-hint",8),d.Sc(16," Please enter valid IMEI and use comma seperation"),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(17,"mat-card-actions",9),d.fc(18,"button",10),d.nc("click",(function(){return e.importDevice()})),d.Sc(19," Submit "),d.ec(),d.fc(20,"button",10),d.nc("click",(function(){return e.close()})),d.Sc(21," Close "),d.ec(),d.ec(),d.ec(),d.Rc(22,Ut,2,0,"mat-card",11)),2&t&&(d.Ob(9),d.yc("formGroup",e.myform),d.Ob(13),d.yc("ngIf",e.isLoading))},directives:[g.a,h.a,h.c,a.v,a.o,a.g,v.c,b.b,a.c,a.n,a.f,a.t,v.f,h.b,C.b,i.m,jt.a],styles:["h3[_ngcontent-%COMP%]{float:left;margin-right:70%;margin-left:5%}mat-card[_ngcontent-%COMP%]{width:80%}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%)}"]}),t})();function Jt(t,e){1&t&&(d.fc(0,"th",9),d.Sc(1,"IMEI"),d.ec())}function qt(t,e){if(1&t&&(d.fc(0,"td",10),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.id)}}function Ht(t,e){1&t&&(d.fc(0,"th",9),d.Sc(1,"Status"),d.ec())}function Gt(t,e){if(1&t&&(d.fc(0,"td",10),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.status)}}function zt(t,e){1&t&&(d.fc(0,"th",9),d.Sc(1,"Reason"),d.ec())}function Lt(t,e){if(1&t&&(d.fc(0,"td",10),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.reason)}}function Vt(t,e){1&t&&d.ac(0,"tr",11)}function Xt(t,e){1&t&&d.ac(0,"tr",12)}let Qt=(()=>{class t{constructor(t,e,c,i){this.deviceService=t,this.dialogRef=e,this.dialog=c,this.data=i,this.error=1,this.dataSource=new T.k([]),this.displayedColumns=["id","status","reason"],this.errorData=i,console.log(this.errorData)}ngOnInit(){this.deviceService.importDataCatch.subscribe(t=>{console.log(t),t&&(this.errorData=t,this.dataSource=new T.k(t))})}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(m.a),d.Zb(B.f),d.Zb(B.b),d.Zb(B.a,8))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-import-error"]],decls:13,vars:3,consts:[[1,"custom-style"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","reason"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){1&t&&(d.fc(0,"div",0),d.fc(1,"table",1),d.dc(2,2),d.Rc(3,Jt,2,0,"th",3),d.Rc(4,qt,2,1,"td",4),d.cc(),d.dc(5,5),d.Rc(6,Ht,2,0,"th",3),d.Rc(7,Gt,2,1,"td",4),d.cc(),d.dc(8,6),d.Rc(9,zt,2,0,"th",3),d.Rc(10,Lt,2,1,"td",4),d.cc(),d.Rc(11,Vt,1,0,"tr",7),d.Rc(12,Xt,1,0,"tr",8),d.ec(),d.ec()),2&t&&(d.Ob(1),d.yc("dataSource",e.dataSource),d.Ob(10),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns))},directives:[T.j,_.a,T.c,T.e,T.b,T.g,T.i,T.d,_.b,T.a,T.f,T.h],styles:[""]}),t})();var Yt=c("pD6V"),Kt=c("Nl8B"),te=c("tmcy"),ee=c("znSr"),ce=c("z17N"),ie=c("STbY");function ae(t,e){1&t&&(d.fc(0,"th",40),d.Sc(1,"Action"),d.ec())}function oe(t,e){if(1&t){const t=d.gc();d.fc(0,"button",47),d.fc(1,"mat-icon",48),d.nc("click",(function(){d.Jc(t);const e=d.rc().$implicit;return d.rc().editDevice(e)})),d.Sc(2,"edit"),d.ec(),d.ec()}}function re(t,e){if(1&t){const t=d.gc();d.fc(0,"button",49),d.fc(1,"mat-icon",48),d.nc("click",(function(){d.Jc(t);const e=d.rc().$implicit;return d.rc().deleteDevice(e)})),d.Sc(2,"delete_outline"),d.ec(),d.ec()}}function ne(t,e){if(1&t){const t=d.gc();d.fc(0,"button",50),d.fc(1,"mat-icon",48),d.nc("click",(function(){d.Jc(t);const e=d.rc().$implicit;return d.rc().settingDevice(e)})),d.Sc(2,"settings"),d.ec(),d.ec()}if(2&t){d.rc();const t=d.Fc(5);d.yc("matMenuTriggerFor",t)}}function se(t,e){if(1&t){const t=d.gc();d.fc(0,"td",41),d.Rc(1,oe,3,0,"button",42),d.Rc(2,re,3,0,"button",43),d.Rc(3,ne,3,1,"button",44),d.fc(4,"mat-menu",null,45),d.fc(6,"button",46),d.nc("click",(function(){d.Jc(t);const c=e.$implicit;return d.rc().openDriverModal(c)})),d.Sc(7,"Drivers"),d.ec(),d.fc(8,"button",46),d.nc("click",(function(){d.Jc(t);const c=e.$implicit;return d.rc().openNotificationModal(c)})),d.Sc(9,"Notifications"),d.ec(),d.fc(10,"button",46),d.nc("click",(function(){d.Jc(t);const c=e.$implicit;return d.rc().openMaintenanceModal(c)})),d.Sc(11,"Maintenance"),d.ec(),d.fc(12,"button",46),d.nc("click",(function(){d.Jc(t);const c=e.$implicit;return d.rc().openAttributeModal(c)})),d.Sc(13,"Computed Attributes"),d.ec(),d.fc(14,"button",46),d.nc("click",(function(){d.Jc(t);const c=e.$implicit;return d.rc().openCommandModal(c)})),d.Sc(15,"Saved Commands"),d.ec(),d.ec(),d.ec()}if(2&t){const t=d.rc();d.Ob(1),d.yc("ngIf",1==t.assigedRole.includes("device_edit")),d.Ob(1),d.yc("ngIf",1==t.assigedRole.includes("device_delete")),d.Ob(1),d.yc("ngIf",1==t.assigedRole.includes("device_setting"))}}function le(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"#"),d.ec())}function de(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.ec()),2&t){const t=e.index;d.Ob(1),d.Tc(t+1)}}function ue(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"Name"),d.ec())}function me(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.name)}}function fe(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"IMEI"),d.ec())}function he(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.uniqueid)}}function pe(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"Phone"),d.ec())}function ge(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.phone)}}function ve(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"Model"),d.ec())}function be(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.model)}}function ye(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"Category"),d.ec())}function Se(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.category)}}function De(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"Created Time"),d.ec())}function Ce(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.sc(2,"date"),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(d.uc(2,1,t.created_time,"medium"))}}function Oe(t,e){1&t&&(d.fc(0,"th",51),d.Sc(1,"Last Update"),d.ec())}function we(t,e){if(1&t&&(d.fc(0,"td",41),d.Sc(1),d.sc(2,"date"),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(d.uc(2,1,t.lastupdate,"medium"))}}function ke(t,e){1&t&&d.ac(0,"tr",52)}function xe(t,e){1&t&&d.ac(0,"tr",53)}const Ie=function(t){return{active:t}};function Re(t,e){if(1&t){const t=d.gc();d.fc(0,"li",55),d.fc(1,"a",48),d.nc("click",(function(){d.Jc(t);const c=e.$implicit;return d.rc(2).getDeviceByPage(c)})),d.Sc(2),d.ec(),d.ec()}if(2&t){const t=e.$implicit,c=d.rc(2);d.yc("ngClass",d.Bc(2,Ie,c.pager.currentPage===t)),d.Ob(2),d.Tc(t)}}const Pe=function(t){return{disabled:t}};function Ae(t,e){if(1&t){const t=d.gc();d.fc(0,"ul",54),d.fc(1,"li",55),d.fc(2,"a",48),d.nc("click",(function(){d.Jc(t);const e=d.rc();return e.getDeviceByPage(e.pager.currentPage-1)})),d.Sc(3,"\xab"),d.ec(),d.ec(),d.Rc(4,Re,3,4,"li",56),d.fc(5,"li",55),d.fc(6,"a",48),d.nc("click",(function(){d.Jc(t);const e=d.rc();return e.getDeviceByPage(e.pager.currentPage+1)})),d.Sc(7,"\xbb"),d.ec(),d.ec(),d.ec()}if(2&t){const t=d.rc();d.Ob(1),d.yc("ngClass",d.Bc(3,Pe,1===t.pager.currentPage)),d.Ob(3),d.yc("ngForOf",t.pager.pages),d.Ob(1),d.yc("ngClass",d.Bc(5,Pe,2===t.pager.currentPage))}}function Me(t,e){1&t&&(d.fc(0,"mat-card",57),d.ac(1,"mat-progress-spinner",58),d.ec())}function _e(t,e){1&t&&(d.fc(0,"mat-card",59),d.Sc(1," No Records Found! "),d.ec())}const Te=function(t,e){return{full:t,half:e}},Be=function(t,e){return{actionbar:t,search_action:e}},Ne=function(){return[0]};function Ze(t,e){if(1&t&&(d.fc(0,"mat-option",26),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.yc("value",t.value),d.Ob(1),d.Uc(" ",t.value," ")}}function Fe(t,e){if(1&t&&(d.fc(0,"mat-option",26),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.yc("value",t.value),d.Ob(1),d.Uc(" ",t.value," ")}}function Ee(t,e){if(1&t){const t=d.gc();d.fc(0,"div",32),d.fc(1,"a"),d.fc(2,"mat-icon",23),d.nc("click",(function(){d.Jc(t);const e=d.rc().index;return d.rc().removeAttributes(e)})),d.Sc(3,"clear"),d.ec(),d.ec(),d.ec()}}function $e(t,e){if(1&t&&(d.fc(0,"div",27),d.fc(1,"div",28),d.fc(2,"mat-form-field",16),d.ac(3,"input",29),d.ec(),d.fc(4,"mat-form-field",16),d.ac(5,"input",30),d.ec(),d.Rc(6,Ee,4,0,"div",31),d.ec(),d.ec()),2&t){const t=e.index,c=d.rc();d.Ob(1),d.yc("formArrayName",t),d.Ob(2),d.yc("id","name"+t),d.Ob(2),d.yc("id","value"+t),d.Ob(1),d.yc("ngIf",c.myform.get("attributes").length>1)}}function je(t,e){if(1&t&&(d.fc(0,"mat-option",14),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.yc("value",t.id),d.Ob(1),d.Uc(" ",t.value," ")}}function Ue(t,e){1&t&&(d.fc(0,"th",19),d.Sc(1,"Action"),d.ec())}function We(t,e){if(1&t){const t=d.gc();d.fc(0,"button",23),d.fc(1,"mat-icon",24),d.nc("click",(function(){d.Jc(t);const e=d.rc().$implicit;return d.rc().editDeviceCategory(e)})),d.Sc(2,"edit"),d.ec(),d.ec()}}function Je(t,e){if(1&t){const t=d.gc();d.fc(0,"button",25),d.fc(1,"mat-icon",24),d.nc("click",(function(){d.Jc(t);const e=d.rc().$implicit;return d.rc().deleteDeviceCategory(e)})),d.Sc(2,"delete_outline"),d.ec(),d.ec()}}function qe(t,e){if(1&t&&(d.fc(0,"td",20),d.Rc(1,We,3,0,"button",21),d.Rc(2,Je,3,0,"button",22),d.ec()),2&t){const t=d.rc();d.Ob(1),d.yc("ngIf",1==t.assigedRole.includes("category_edit")),d.Ob(1),d.yc("ngIf",1==t.assigedRole.includes("category_delete"))}}function He(t,e){1&t&&(d.fc(0,"th",26),d.Sc(1,"ID"),d.ec())}function Ge(t,e){if(1&t&&(d.fc(0,"td",20),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.id)}}function ze(t,e){1&t&&(d.fc(0,"th",26),d.Sc(1,"Title"),d.ec())}function Le(t,e){if(1&t&&(d.fc(0,"td",20),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.title)}}function Ve(t,e){1&t&&(d.fc(0,"th",26),d.Sc(1,"Icon"),d.ec())}function Xe(t,e){if(1&t&&(d.fc(0,"td",20),d.fc(1,"mat-icon"),d.Sc(2),d.ec(),d.ec()),2&t){const t=e.$implicit;d.Ob(2),d.Tc(t.icon)}}function Qe(t,e){1&t&&(d.fc(0,"th",26),d.Sc(1,"Status"),d.ec())}function Ye(t,e){if(1&t&&(d.fc(0,"td",20),d.Sc(1),d.ec()),2&t){const t=e.$implicit,c=d.rc();d.Ob(1),d.Tc(null==c.status[t.status]?null:c.status[t.status].value)}}function Ke(t,e){1&t&&d.ac(0,"tr",27)}function tc(t,e){1&t&&d.ac(0,"tr",28)}const ec=function(){return[0]},cc=function(){return[25,50,100]};function ic(t,e){if(1&t&&(d.fc(0,"mat-option",14),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.yc("value",t.id),d.Ob(1),d.Uc(" ",t.value," ")}}const ac=[{path:"add",component:A,canActivate:[l.a],data:{roles:"device_add"}},{path:"list",component:(()=>{class t{constructor(t,e,c,i,a,o,r,n,s){this.deviceService=t,this.snackBar=e,this.router=c,this.dialogService=i,this.dialog=a,this.fb=o,this.mediaObserver=r,this.pagination=n,this.dateFormatService=s,this.currentPage=1,this.params={},this.pager=[],this.record=[],this.assigedRole=[],this.show=!0,this.isLoading=!0,this.idColumn="id",this.dataSource=new T.k([]),this.states=[{id:0,value:"Inactive"},{id:1,value:"Active"}],this.displayedColumns=["action","id","name","identifier","phone","model","category","createdtime","time"],this.assigedRole=JSON.parse(sessionStorage.getItem("rolesData"))}ngOnInit(){this.myform=this.fb.group({name:[""],imei:[""],category:[""],model:[""],fromdate:[],todate:[]}),this.getAllDevice(),this.deviceService.importDataCatch.subscribe(t=>{console.log(t),t&&(this.errorData=t,this.deviceService.importErrorExchange(t),this.isLoading=!0,setTimeout(()=>{this.getAllDevice()},1e3),setTimeout(()=>{this.openImportErrorModal()},1500))}),this.deviceService.importErrorCatch.subscribe(t=>{}),this.mediaSub=this.mediaObserver.media$.subscribe(t=>{"xs"==t.mqAlias?(this.tr=!0,this.fa=!1):(this.tr=!1,this.fa=!0)})}getAllDeviceTest(){this.deviceService.getAllDevices().subscribe(t=>{this.isLoading=!1,this.devices=t,console.log(this.devices),this.dataSource=new T.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}getAllDevice(){this.params={currentPage:this.currentPage},this.deviceService.getAllDevicesByPage(this.params).subscribe(t=>{this.devices=t.rows,this.record=t.count,console.log(t.count),this.pager=this.pagination.paginate(this.record),console.log(this.pager.totalPages),this.dataSource=new T.k(this.devices),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator),this.isLoading=!1})}getDeviceByPage(t){this.page=t,this.page>this.pager.totalPages||(this.params={currentPage:t,name:this.myform.value.name,imei:this.myform.value.imei,category:this.myform.value.category,model:this.myform.value.model,fromdate:this.myform.value.fromdate,todate:this.myform.value.todate},this.deviceService.getAllDevicesByPage(this.params).subscribe(e=>{this.isLoading=!1,this.devices=e.rows,console.log(this.record),this.pager=this.pagination.paginate(this.record,t),this.dataSource=new T.k(this.devices),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)}))}getDeviceBySearch(){this.myform.value.fromdate&&(this.myform.value.fromdate=this.dateFormatService.dateTime("datetime",this.myform.value.fromdate)),this.myform.value.todate&&(this.myform.value.todate=this.dateFormatService.dateTime("datetime",this.myform.value.todate)),this.params={currentPage:this.currentPage,name:this.myform.value.name,imei:this.myform.value.imei,category:this.myform.value.category,model:this.myform.value.model,fromdate:this.myform.value.fromdate,todate:this.myform.value.todate},this.deviceService.getAllDevicesByPage(this.params).subscribe(t=>{this.isLoading=!1,this.devices=t.rows,this.record=t.count,this.pager=this.pagination.paginate(this.record),this.dataSource=new T.k(this.devices),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}editDevice(t){this.router.navigate(["admin/traccar/devices/edit",t.id])}deleteDevice(t){this.dialogService.openConfirmDialog().afterClosed().subscribe(e=>{e&&(this.deviceService.deleteDevice(t.id).subscribe(),this.deleteRowDataTable(t.id,this.idColumn,this.paginator,this.dataSource),this.openSnackBar())})}deleteRowDataTable(t,e,c,i){this.devices=i.data;const a=this.devices.findIndex(c=>c[e]===t);i.data.splice(a,1),i.paginator=c}openSnackBar(){this.snackBar.open("Deleted!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase()}openDriverModal(t){console.log(t.id);const e=new B.d;e.disableClose=!0,e.width="600px",e.height="480px",this.dialog.open(H,{width:"580px",height:"460px",data:{pageValue:t.id}}).afterClosed().subscribe(t=>{})}openNotificationModal(t){console.log(t.id);const e=new B.d;e.disableClose=!0,e.width="600px",e.height="480px",this.dialog.open(it,{width:"580px",height:"460px",data:{pageValue:t.id}}).afterClosed().subscribe(t=>{})}openMaintenanceModal(t){console.log(t.id);const e=new B.d;e.disableClose=!0,e.width="600px",e.height="480px",this.dialog.open(vt,{width:"580px",height:"460px",data:{pageValue:t.id}}).afterClosed().subscribe(t=>{})}openAttributeModal(t){console.log(t.id);const e=new B.d;e.disableClose=!0,e.width="600px",e.height="480px",this.dialog.open(It,{width:"580px",height:"460px",data:{pageValue:t.id}}).afterClosed().subscribe(t=>{})}openCommandModal(t){console.log(t.id);const e=new B.d;e.disableClose=!0,e.width="600px",e.height="480px",this.dialog.open($t,{width:"580px",height:"460px",data:{pageValue:t.id}}).afterClosed().subscribe(t=>{})}openImportModal(){const t=new B.d;t.disableClose=!0,t.width="600px",t.height="480px",this.dialog.open(Wt,{width:"580px",height:"460px"}).afterClosed().subscribe(t=>{})}openImportErrorModal(){const t=new B.d;t.disableClose=!0,t.width="600px",t.height="480px",this.dialog.open(Qt,{width:"580px",height:"260px",data:this.errorData}).afterClosed().subscribe(t=>{})}settingDevice(t){console.log(t.id)}goAddPage(){this.router.navigate(["admin/traccar/devices/add"])}cleanForm(t){Object.keys(t.controls).forEach(e=>t.get(e).setValue(t.get(e).value.trim()))}getBack(){this.getAllDevice(),this.myform.reset()}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(m.a),d.Zb(u.a),d.Zb(s.c),d.Zb(Z.a),d.Zb(B.b),d.Zb(a.e),d.Zb(Yt.g),d.Zb(Kt.a),d.Zb(te.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-device-list"]],viewQuery:function(t,e){var c;1&t&&(d.Wc(_.a,!0),d.Wc(M.a,!0)),2&t&&(d.Ec(c=d.oc())&&(e.sort=c.first),d.Ec(c=d.oc())&&(e.paginator=c.first))},decls:70,vars:41,consts:[[1,"custom-style"],[1,"table-title"],["fxLayout","row","fxLayout.xs","column",1,"search-div"],["fxFlex","75%"],[3,"formGroup"],["fxLayout","row","fxLayout.xs","column"],[3,"ngClass"],["matInput","","placeholder","Name","formControlName","name","autocomplete","off"],["matInput","","placeholder","IMEI","formControlName","imei","autocomplete","off"],["matInput","","placeholder","Category","formControlName","category","autocomplete","off"],["matInput","","placeholder","Model","formControlName","model","autocomplete","off"],["matInput","","formControlName","fromdate","placeholder","From Date ",3,"owlDateTime","owlDateTimeTrigger"],["dt1",""],["matInput","","formControlName","todate","placeholder","To Date",3,"owlDateTime","owlDateTimeTrigger"],["dt2",""],["fxFlex","25%","fxFlex.xs","100%",3,"ngClass"],["mat-button","",1,"mat-stroked-button","mat-primary",3,"click"],[1,"addButton"],["mat-button","",1,"mat-raised-button","mat-primary",3,"click"],[1,"table_container"],["mat-table","","matTableExporter","","matSort","",1,"mat-elevation-z8",3,"dataSource","hiddenColumns"],["exporter","matTableExporter"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","identifier"],["matColumnDef","phone"],["matColumnDef","model"],["matColumnDef","category"],["matColumnDef","createdtime"],["matColumnDef","time"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"middle"],["class","pagination",4,"ngIf"],["style","display:flex; justify-content: center; align-items: center",4,"ngIf"],["class","notfoundbox",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",4,"ngIf"],["mat-icon-button","","color","warn",4,"ngIf"],["mat-icon-button","","color","info",3,"matMenuTriggerFor",4,"ngIf"],["setting","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button",""],[3,"click"],["mat-icon-button","","color","warn"],["mat-icon-button","","color","info",3,"matMenuTriggerFor"],["mat-header-cell","","mat-sort-header",""],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"],[1,"pagination"],[1,"pagination",3,"ngClass"],["class","pagination",3,"ngClass",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","align-items","center"],["color","primary","mode","indeterminate"],[1,"notfoundbox"]],template:function(t,e){if(1&t){const t=d.gc();d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Device Table"),d.ec(),d.ec(),d.fc(4,"div",2),d.fc(5,"div",3),d.fc(6,"form",4),d.fc(7,"div",5),d.fc(8,"mat-form-field",6),d.ac(9,"input",7),d.ec(),d.fc(10,"mat-form-field",6),d.ac(11,"input",8),d.ec(),d.fc(12,"mat-form-field",6),d.ac(13,"input",9),d.ec(),d.fc(14,"mat-form-field",6),d.ac(15,"input",10),d.ec(),d.fc(16,"mat-form-field",6),d.ac(17,"input",11),d.ac(18,"owl-date-time",null,12),d.ec(),d.fc(20,"mat-form-field",6),d.ac(21,"input",13),d.ac(22,"owl-date-time",null,14),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(24,"div",15),d.fc(25,"button",16),d.nc("click",(function(){return e.cleanForm(e.myform)}))("click",(function(){return e.getDeviceBySearch()})),d.Sc(26," Search "),d.ec(),d.fc(27,"button",16),d.nc("click",(function(){return e.getBack()})),d.Sc(28," Clear "),d.ec(),d.fc(29,"span",17),d.fc(30,"button",18),d.nc("click",(function(){return e.goAddPage()})),d.Sc(31," Add "),d.ec(),d.ec(),d.fc(32,"button",18),d.nc("click",(function(){return d.Jc(t),d.Fc(36).exportTable("csv",{fileName:"Customer"})})),d.Sc(33," EXP "),d.ec(),d.ec(),d.ec(),d.fc(34,"div",19),d.fc(35,"table",20,21),d.dc(37,22),d.Rc(38,ae,2,0,"th",23),d.Rc(39,se,16,3,"td",24),d.cc(),d.dc(40,25),d.Rc(41,le,2,0,"th",26),d.Rc(42,de,2,1,"td",24),d.cc(),d.dc(43,27),d.Rc(44,ue,2,0,"th",26),d.Rc(45,me,2,1,"td",24),d.cc(),d.dc(46,28),d.Rc(47,fe,2,0,"th",26),d.Rc(48,he,2,1,"td",24),d.cc(),d.dc(49,29),d.Rc(50,pe,2,0,"th",26),d.Rc(51,ge,2,1,"td",24),d.cc(),d.dc(52,30),d.Rc(53,ve,2,0,"th",26),d.Rc(54,be,2,1,"td",24),d.cc(),d.dc(55,31),d.Rc(56,ye,2,0,"th",26),d.Rc(57,Se,2,1,"td",24),d.cc(),d.dc(58,32),d.Rc(59,De,2,0,"th",26),d.Rc(60,Ce,3,4,"td",24),d.cc(),d.dc(61,33),d.Rc(62,Oe,2,0,"th",26),d.Rc(63,we,3,4,"td",24),d.cc(),d.Rc(64,ke,1,0,"tr",34),d.Rc(65,xe,1,0,"tr",35),d.ec(),d.fc(66,"div",36),d.Rc(67,Ae,8,7,"ul",37),d.ec(),d.Rc(68,Me,2,0,"mat-card",38),d.Rc(69,_e,2,0,"mat-card",39),d.ec(),d.ec()}if(2&t){const t=d.Fc(19),c=d.Fc(23);d.Ob(6),d.yc("formGroup",e.myform),d.Ob(2),d.yc("ngClass",d.Cc(19,Te,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(22,Te,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(25,Te,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(28,Te,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(31,Te,e.tr,e.fa)),d.Ob(1),d.yc("owlDateTime",t)("owlDateTimeTrigger",t),d.Ob(3),d.yc("ngClass",d.Cc(34,Te,e.tr,e.fa)),d.Ob(1),d.yc("owlDateTime",c)("owlDateTimeTrigger",c),d.Ob(3),d.yc("ngClass",d.Cc(37,Be,e.tr,e.fa)),d.Ob(11),d.yc("dataSource",e.dataSource)("hiddenColumns",d.Ac(40,Ne)),d.Ob(29),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns),d.Ob(2),d.yc("ngIf",e.pager.pages&&e.pager.pages.length),d.Ob(1),d.yc("ngIf",e.isLoading),d.Ob(1),d.yc("ngIf",""==e.devices)}},directives:[p.b,p.a,a.v,a.o,a.g,v.c,i.k,ee.a,b.b,a.c,a.n,a.f,ce.b,ce.d,ce.a,C.b,T.j,r.a,_.a,T.c,T.e,T.b,T.g,T.i,i.m,T.d,T.a,ie.d,ie.a,g.a,ie.c,_.b,T.f,T.h,i.l,h.a,jt.a],pipes:[i.e],styles:[".table_container[_ngcontent-%COMP%]{margin-left:2%;width:96%;margin-right:2%;overflow:auto}.filter[_ngcontent-%COMP%]{width:15%;margin-right:50%}.mat-column-action[_ngcontent-%COMP%]{width:20%!important}.mat-raised-button[_ngcontent-%COMP%]{width:8%;margin-left:.5%}.add_button[_ngcontent-%COMP%]{width:8%;color:#fff;margin-left:10px!important;background-color:#00f}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%)}.full[_ngcontent-%COMP%]{width:90%;margin-left:5%}.half[_ngcontent-%COMP%]{width:15%;margin-left:1%;float:left}.pagination[_ngcontent-%COMP%]{display:inline-block}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;float:left;padding:8px 16px;text-decoration:none;transition:background-color .3s;border:1px solid #ddd}.active[_ngcontent-%COMP%]{background-color:#29abe2;background:#4169e1;color:red}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#ddd}.middle[_ngcontent-%COMP%]{margin-left:50%}a[_ngcontent-%COMP%]{cursor:pointer}.notfoundbox[_ngcontent-%COMP%]{top:0}"]}),t})(),canActivate:[l.a],data:{roles:"device_list"}},{path:"edit/:id",component:(()=>{class t{constructor(t,e,c,i,a,o){this.fb=t,this.router=e,this.snackBar=c,this.route=i,this.deviceService=a,this.groupService=o,this.groups=[],this.object={},this.att=[],this.submitted=!1,this.array=[{id:1,name:"speed",value:"25"},{id:2,name:"limit",value:"5"}],this.categories=[{id:1,value:"Bus"},{id:0,value:"Car"},{id:0,value:"Truck"}],this.step=0}setStep(t){this.step=t}ngOnInit(){this.myform=this.fb.group({deviceName:["",[a.u.required]],identifier:["",[a.u.required]],group:[],phone:[""],model:[""],contact:[""],category:[""],disabled:[],attributes:this.fb.array([])}),this.route.paramMap.subscribe(t=>{this.Id=t.get("id"),this.edit(this.Id)}),this.getAllGroup(),this.deviceService.importDataCatch.subscribe(t=>{console.log(t)})}getAllGroup(){this.groupService.getAllGroup().subscribe(t=>{this.groups=t})}edit(t){this.deviceService.getDeviceById(t).subscribe(t=>{this.d=t,console.log(this.d);var e=JSON.parse(this.d.attributes),c=Object.entries(e);this.attr=[],c.forEach(t=>{this.attr.push({name:t[0],value:t[1]})}),this.d.attributes=this.attr,console.log(this.d.attributes),this.setData(this.d)})}setData(t){this.myform.patchValue({deviceName:t.name,identifier:t.uniqueid,group:t.groupid,phone:t.phone,model:t.model,contact:t.contact,category:t.category,disabled:t.disabled}),this.createdBy=t.created_by,this.setAttributes()}setAttributes(){let t=this.myform.controls.attributes;this.d.attributes.forEach(e=>{t.push(this.fb.group(e))})}assignAttributes(){return this.fb.group({name:[""],value:[""]})}get fArray(){return this.myform.get("attributes")}addassignAttributes(){this.fArray.push(this.assignAttributes())}removeAttributes(t){this.myform.get("attributes").removeAt(t)}openSnackBar(){this.snackBar.open("Updated added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}goBack(){this.router.navigate(["/admin/traccar/devices/list"])}updateDevice(){this.submitted=!0,this.myform.invalid||(this.myform.value.attributes.forEach(t=>{this.object[t.name]=t.value,console.log(this.myform.value.attributes)}),this.myform.value.attributes=this.object,this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.updated_by=this.userData.id,this.myform.value.created_by=this.createdBy,this.myform.value.updated_time=new Date,console.log(this.myform.value),this.deviceService.updateDevice(this.Id,this.myform.value).subscribe(t=>{this.openSnackBar(),this.router.navigate(["/admin/traccar/devices/list"])}))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(a.e),d.Zb(s.c),d.Zb(u.a),d.Zb(s.a),d.Zb(m.a),d.Zb(f.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-device-edit"]],decls:58,vars:6,consts:[[1,"customStyle"],["mat-button","",1,"mat-primary",3,"click"],[1,"title-style"],[3,"formGroup"],[1,"main"],[1,"mainContent"],[1,"full"],["trim","blur","matInput","","placeholder","Name","formControlName","deviceName","autocomplete","off","required",""],["matInput","","placeholder","Identifier","formControlName","identifier","autocomplete","off","required",""],[1,"optionalContent"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],["required","",1,"half"],["formControlName","group"],[3,"value",4,"ngFor","ngForOf"],["formControlName","category"],[1,"half"],["matInput","","placeholder","Phone","formControlName","phone","autocomplete","off"],["matInput","","placeholder","Model","formControlName","model","autocomplete","off"],["matInput","","placeholder","Contact","formControlName","contact","autocomplete","off"],[1,"checkbox"],["formControlName","disabled","labelPosition","before",1,"checkbox"],["formArrayName","attributes",4,"ngFor","ngForOf"],[3,"click"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],[3,"value"],["formArrayName","attributes"],[3,"formArrayName"],["trim","blur","matInput","","placeholder","Name","formControlName","name","autocomplete","off",3,"id"],["trim","blur","matInput","","placeholder","Value","formControlName","value","autocomplete","off",3,"id"],["class","delAssigns",4,"ngIf"],[1,"delAssigns"]],template:function(t,e){1&t&&(d.fc(0,"mat-card",0),d.fc(1,"button",1),d.nc("click",(function(){return e.goBack()})),d.fc(2,"mat-icon"),d.Sc(3,"arrow_back"),d.ec(),d.ec(),d.fc(4,"div",2),d.fc(5,"mat-card-title"),d.Sc(6,"Device Update Form"),d.ec(),d.ec(),d.fc(7,"mat-card-content"),d.fc(8,"form",3),d.fc(9,"div",4),d.fc(10,"div",5),d.fc(11,"mat-form-field",6),d.ac(12,"input",7),d.ec(),d.fc(13,"mat-form-field",6),d.ac(14,"input",8),d.ec(),d.ec(),d.fc(15,"div",9),d.fc(16,"mat-accordion",10),d.fc(17,"mat-expansion-panel",11),d.nc("opened",(function(){return e.setStep(1)})),d.fc(18,"mat-expansion-panel-header"),d.fc(19,"mat-panel-title"),d.fc(20,"mat-icon"),d.Sc(21,"add"),d.ec(),d.Sc(22," Extra "),d.ec(),d.ec(),d.fc(23,"mat-form-field",12),d.fc(24,"mat-label"),d.Sc(25,"Group"),d.ec(),d.fc(26,"mat-select",13),d.Rc(27,Ze,2,2,"mat-option",14),d.ec(),d.ec(),d.fc(28,"mat-form-field",12),d.fc(29,"mat-label"),d.Sc(30,"Category"),d.ec(),d.fc(31,"mat-select",15),d.Rc(32,Fe,2,2,"mat-option",14),d.ec(),d.ec(),d.fc(33,"mat-form-field",16),d.ac(34,"input",17),d.ec(),d.fc(35,"mat-form-field",16),d.ac(36,"input",18),d.ec(),d.fc(37,"mat-form-field",16),d.ac(38,"input",19),d.ec(),d.fc(39,"span",20),d.fc(40,"mat-checkbox",21),d.Sc(41," Disabled "),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(42,"mat-accordion",10),d.fc(43,"mat-expansion-panel",11),d.nc("opened",(function(){return e.setStep(2)})),d.fc(44,"mat-expansion-panel-header"),d.fc(45,"mat-panel-title"),d.fc(46,"mat-icon"),d.Sc(47,"add"),d.ec(),d.Sc(48," Attributes "),d.ec(),d.ec(),d.Rc(49,$e,7,4,"div",22),d.fc(50,"button",23),d.nc("click",(function(){return e.addassignAttributes()})),d.fc(51,"mat-icon"),d.Sc(52,"add"),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(53,"mat-card-actions",24),d.fc(54,"button",25),d.nc("click",(function(){return e.updateDevice()})),d.Sc(55," Update "),d.ec(),d.fc(56,"p"),d.Sc(57,"Note: Field marked with * is Mandatory"),d.ec(),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("formGroup",e.myform),d.Ob(9),d.yc("expanded",1===e.step),d.Ob(10),d.yc("ngForOf",e.groups),d.Ob(5),d.yc("ngForOf",e.categories),d.Ob(11),d.yc("expanded",2===e.step),d.Ob(6),d.yc("ngForOf",e.myform.get("attributes").controls))},directives:[h.a,C.b,g.a,h.f,h.c,a.v,a.o,a.g,v.c,b.b,a.c,a.n,a.f,a.t,y.a,y.c,y.d,y.e,v.g,S.a,i.l,D.a,h.b,O.o,a.d,i.m],styles:["mat-card[_ngcontent-%COMP%]{width:50%;top:0}.customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{margin-top:-4%;color:#1a237e;text-align:center!important}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}.button[_ngcontent-%COMP%]{margin-top:100px}.half[_ngcontent-%COMP%]{width:40%}.delAssigns[_ngcontent-%COMP%]{margin-top:25px}a[_ngcontent-%COMP%]{cursor:pointer}.forcheckbox[_ngcontent-%COMP%]{margin-right:10px}"]}),t})(),canActivate:[l.a],data:{roles:"device_edit"}},{path:"dcat-add",component:(()=>{class t{constructor(t,e,c,i){this.fb=t,this.router=e,this.snackBar=c,this.deviceService=i,this.submitted=!1,this.states=[{id:1,value:"Active"},{id:0,value:"Inactive"}]}ngOnInit(){this.myform=this.fb.group({title:["",[a.u.required]],icon:["",[a.u.required]],status:[,[a.u.required]]})}openSnackBar(){this.snackBar.open("Successfully added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}errorMessage(){this.snackBar.open("Something is error!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}goBack(){this.router.navigate(["/admin/traccar/devices/dcat-list"])}addDeviceCategory(){this.submitted=!0,this.myform.markAllAsTouched(),this.myform.invalid?console.log("rrrr"):(this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.created_by=this.userData.id,this.deviceService.addDeviceCategory(this.myform.value).subscribe(t=>{console.log(t),"Done"==t.Success?(console.log(t),this.openSnackBar(),this.router.navigate(["/admin/traccar/devices/dcat-list"])):(console.log(t),this.errorMessage())}))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(a.e),d.Zb(s.c),d.Zb(u.a),d.Zb(m.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-device-category-add"]],decls:25,vars:2,consts:[["fxFlex","50%","fxFlex.xs","100%",1,"customStyle"],[1,"title-style"],[3,"click"],[1,"back"],[3,"formGroup"],[1,"main"],[1,"mainContent"],[1,"full"],["matInput","","placeholder","Title","formControlName","title","autocomplete","off","required",""],["matInput","","placeholder","Icon","formControlName","icon","autocomplete","off","required",""],["formControlName","status","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],[3,"value"]],template:function(t,e){1&t&&(d.fc(0,"mat-card",0),d.fc(1,"div",1),d.fc(2,"a",2),d.nc("click",(function(){return e.goBack()})),d.fc(3,"mat-icon",3),d.Sc(4,"arrow_back"),d.ec(),d.ec(),d.fc(5,"mat-card-title"),d.Sc(6,"Device Category Add Form"),d.ec(),d.ec(),d.fc(7,"mat-card-content"),d.fc(8,"form",4),d.fc(9,"div",5),d.fc(10,"div",6),d.fc(11,"mat-form-field",7),d.ac(12,"input",8),d.ec(),d.fc(13,"mat-form-field",7),d.ac(14,"input",9),d.ec(),d.fc(15,"mat-form-field",7),d.fc(16,"mat-label"),d.Sc(17,"Status"),d.ec(),d.fc(18,"mat-select",10),d.Rc(19,je,2,2,"mat-option",11),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(20,"mat-card-actions",12),d.fc(21,"button",13),d.nc("click",(function(){return e.addDeviceCategory()})),d.Sc(22," Add "),d.ec(),d.fc(23,"p"),d.Sc(24,"Note: Field marked with * is Mandatory"),d.ec(),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("formGroup",e.myform),d.Ob(11),d.yc("ngForOf",e.states))},directives:[h.a,p.a,g.a,h.f,h.c,a.v,a.o,a.g,v.c,b.b,a.c,a.n,a.f,a.t,v.g,S.a,i.l,h.b,C.b,O.o],styles:["mat-card[_ngcontent-%COMP%]{width:50%;top:0}.customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{color:#1a237e;text-align:center!important}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}.button[_ngcontent-%COMP%]{margin-top:100px}.half[_ngcontent-%COMP%]{width:40%}.delAssigns[_ngcontent-%COMP%]{margin-top:25px}a[_ngcontent-%COMP%]{cursor:pointer}.forcheckbox[_ngcontent-%COMP%]{margin-right:10px}.back[_ngcontent-%COMP%]{float:left}"]}),t})(),canActivate:[l.a],data:{roles:"device_category_add"}},{path:"dcat-list",component:(()=>{class t{constructor(t,e,c,i,a,o){this.deviceService=t,this.snackBar=e,this.router=c,this.dialogService=i,this.dialog=a,this.pagination=o,this.idColumn="id",this.assigedRole=[],this.dataSource=new T.k([]),this.status=[{id:0,value:"Inactive"},{id:1,value:"Active"}],this.displayedColumns=["action","id","title","icon","status"],this.assigedRole=JSON.parse(sessionStorage.getItem("rolesData"))}ngOnInit(){this.getAllDeviceCategory()}getAllDeviceCategory(){this.deviceService.getAllDeviceCategory().subscribe(t=>{this.categories=t,this.dataSource=new T.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}editDeviceCategory(t){this.router.navigate(["admin/traccar/devices/dcat-edit",t.id])}deleteDeviceCategory(t){this.dialogService.openConfirmDialog().afterClosed().subscribe(e=>{e&&(this.deviceService.deleteDeviceCategory(t.id).subscribe(),this.deleteRowDataTable(t.id,this.idColumn,this.paginator,this.dataSource),this.openSnackBar())})}deleteRowDataTable(t,e,c,i){this.categories=i.data;const a=this.categories.findIndex(c=>c[e]===t);i.data.splice(a,1),i.paginator=c}openSnackBar(){this.snackBar.open("Deleted!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase()}addDeviceCategory(){this.router.navigate(["/admin/traccar/devices/dcat-add"])}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(m.a),d.Zb(u.a),d.Zb(s.c),d.Zb(Z.a),d.Zb(B.b),d.Zb(Kt.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-device-category-list"]],viewQuery:function(t,e){var c;1&t&&(d.Wc(_.a,!0),d.Wc(M.a,!0)),2&t&&(d.Ec(c=d.oc())&&(e.sort=c.first),d.Ec(c=d.oc())&&(e.paginator=c.first))},decls:31,vars:8,consts:[[1,"custom-style"],[1,"table-title"],[1,"search-div"],[1,"filter"],["matInput","","placeholder","search","autocomplete","off",3,"keyup"],["mat-button","",1,"mat-raised-button","mat-primary",3,"click"],["mat-table","","matTableExporter","","matSort","",1,"mat-elevation-z8",3,"dataSource","hiddenColumns"],["exporter","matTableExporter"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","title"],["matColumnDef","icon"],["matColumnDef","status"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",4,"ngIf"],["mat-icon-button","","color","warn",4,"ngIf"],["mat-icon-button",""],[3,"click"],["mat-icon-button","","color","warn"],["mat-header-cell","","mat-sort-header",""],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){if(1&t){const t=d.gc();d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Device category Table"),d.ec(),d.ec(),d.fc(4,"div",2),d.fc(5,"mat-form-field",3),d.fc(6,"input",4),d.nc("keyup",(function(t){return e.applyFilter(t.target.value)})),d.ec(),d.ec(),d.fc(7,"button",5),d.nc("click",(function(){return d.Jc(t),d.Fc(12).exportTable("csv",{fileName:"category"})})),d.Sc(8," CSV "),d.ec(),d.fc(9,"button",5),d.nc("click",(function(){return e.addDeviceCategory()})),d.Sc(10," Add "),d.ec(),d.ec(),d.fc(11,"table",6,7),d.dc(13,8),d.Rc(14,Ue,2,0,"th",9),d.Rc(15,qe,3,2,"td",10),d.cc(),d.dc(16,11),d.Rc(17,He,2,0,"th",12),d.Rc(18,Ge,2,1,"td",10),d.cc(),d.dc(19,13),d.Rc(20,ze,2,0,"th",12),d.Rc(21,Le,2,1,"td",10),d.cc(),d.dc(22,14),d.Rc(23,Ve,2,0,"th",12),d.Rc(24,Xe,3,1,"td",10),d.cc(),d.dc(25,15),d.Rc(26,Qe,2,0,"th",12),d.Rc(27,Ye,2,1,"td",10),d.cc(),d.Rc(28,Ke,1,0,"tr",16),d.Rc(29,tc,1,0,"tr",17),d.ec(),d.ac(30,"mat-paginator",18),d.ec()}2&t&&(d.Ob(11),d.yc("dataSource",e.dataSource)("hiddenColumns",d.Ac(6,ec)),d.Ob(17),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns),d.Ob(1),d.yc("pageSizeOptions",d.Ac(7,cc))("pageSize",25))},directives:[v.c,b.b,C.b,T.j,r.a,_.a,T.c,T.e,T.b,T.g,T.i,M.a,T.d,T.a,i.m,g.a,_.b,T.f,T.h],styles:[".filter[_ngcontent-%COMP%]{width:15%;margin-right:50%}.mat-column-action[_ngcontent-%COMP%]{width:20%!important}"]}),t})(),canActivate:[l.a],data:{roles:"device_category_list"}},{path:"dcat-edit/:id",component:(()=>{class t{constructor(t,e,c,i,a){this.fb=t,this.router=e,this.snackBar=c,this.deviceService=i,this.route=a,this.submitted=!1,this.states=[{id:1,value:"Active"},{id:0,value:"Inactive"}]}ngOnInit(){this.myform=this.fb.group({title:["",[a.u.required]],icon:["",[a.u.required]],status:[,[a.u.required]]}),this.route.paramMap.subscribe(t=>{this.Id=t.get("id"),this.edit(this.Id)})}edit(t){this.deviceService.getDeviceCategoryById(t).subscribe(t=>{this.setData(t)})}setData(t){this.myform.patchValue({title:t.title,icon:t.icon,status:t.status}),this.createdBy=t.created_by,console.log(this.createdBy)}openSnackBar(){this.snackBar.open("Successfully added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}goBack(){this.router.navigate(["/admin/traccar/devices/dcat-list"])}updateDeviceCategory(){this.myform.markAllAsTouched(),this.submitted=!0,this.myform.invalid||(this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.updated_by=this.userData.id,this.myform.value.updated_time=new Date,this.myform.value.created_by=this.createdBy,console.log(this.myform.value),this.deviceService.updateDeviceCategory(this.Id,this.myform.value).subscribe(t=>{this.openSnackBar(),this.router.navigate(["/admin/traccar/devices/dcat-list"])}))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(a.e),d.Zb(s.c),d.Zb(u.a),d.Zb(m.a),d.Zb(s.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-device-category-edit"]],decls:25,vars:2,consts:[["fxFlex","50%","fxFlex.xs","100%",1,"customStyle"],[1,"title-style"],[3,"click"],[1,"back"],[3,"formGroup"],[1,"main"],[1,"mainContent"],[1,"full"],["matInput","","placeholder","Title","formControlName","title","autocomplete","off","required",""],["matInput","","placeholder","Icon","formControlName","icon","autocomplete","off","required",""],["formControlName","status","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],[3,"value"]],template:function(t,e){1&t&&(d.fc(0,"mat-card",0),d.fc(1,"div",1),d.fc(2,"a",2),d.nc("click",(function(){return e.goBack()})),d.fc(3,"mat-icon",3),d.Sc(4,"arrow_back"),d.ec(),d.ec(),d.fc(5,"mat-card-title"),d.Sc(6,"Device Category Update Form"),d.ec(),d.ec(),d.fc(7,"mat-card-content"),d.fc(8,"form",4),d.fc(9,"div",5),d.fc(10,"div",6),d.fc(11,"mat-form-field",7),d.ac(12,"input",8),d.ec(),d.fc(13,"mat-form-field",7),d.ac(14,"input",9),d.ec(),d.fc(15,"mat-form-field",7),d.fc(16,"mat-label"),d.Sc(17,"Status"),d.ec(),d.fc(18,"mat-select",10),d.Rc(19,ic,2,2,"mat-option",11),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(20,"mat-card-actions",12),d.fc(21,"button",13),d.nc("click",(function(){return e.updateDeviceCategory()})),d.Sc(22," Update "),d.ec(),d.fc(23,"p"),d.Sc(24,"Note: Field marked with * is Mandatory"),d.ec(),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("formGroup",e.myform),d.Ob(11),d.yc("ngForOf",e.states))},directives:[h.a,p.a,g.a,h.f,h.c,a.v,a.o,a.g,v.c,b.b,a.c,a.n,a.f,a.t,v.g,S.a,i.l,h.b,C.b,O.o],styles:["mat-card[_ngcontent-%COMP%]{width:50%;top:0}.customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{color:#1a237e;text-align:center!important;margin-bottom:3%}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}.button[_ngcontent-%COMP%]{margin-top:100px}.half[_ngcontent-%COMP%]{width:40%}.delAssigns[_ngcontent-%COMP%]{margin-top:25px}a[_ngcontent-%COMP%]{cursor:pointer}.forcheckbox[_ngcontent-%COMP%]{margin-right:10px}.back[_ngcontent-%COMP%]{float:left}"]}),t})(),canActivate:[l.a],data:{roles:"device_category_edit"}}];let oc=(()=>{class t{}return t.\u0275mod=d.Xb({type:t}),t.\u0275inj=d.Wb({factory:function(e){return new(e||t)},imports:[[s.f.forChild(ac)],s.f]}),t})(),rc=(()=>{class t{}return t.\u0275mod=d.Xb({type:t}),t.\u0275inj=d.Wb({factory:function(e){return new(e||t)},imports:[[i.c,oc,o.a,a.s,a.i,r.b,n.a]]}),t})()},Nl8B:function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));var i=c("fXoL");let a=(()=>{class t{constructor(){}paginate(t,e=1,c=25,i=9){let a,o,r=Math.ceil(t/c);if(e<1?e=1:e>r&&(e=r),r<=i)a=1,o=r;else{let t=Math.floor(i/2),c=Math.ceil(i/2)-1;e<=t?(a=1,o=i):e+c>=r?(a=r-i+1,o=r):(a=e-t,o=e+c)}let n=(e-1)*c,s=Math.min(n+c-1,t-1),l=Array.from(Array(o+1-a).keys()).map(t=>a+t);return{totalItems:t,currentPage:e,pageSize:c,totalPages:r,startPage:a,endPage:o,startIndex:n,endIndex:s,pages:l}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},XCAU:function(t,e,c){"use strict";c.d(e,"a",(function(){return n}));var i=c("2Vo4"),a=c("AytR"),o=c("fXoL"),r=c("tk/3");let n=(()=>{class t{constructor(t){this.http=t,this.url=a.a.apiUrl+"/device/",this.importDataSent=new i.a(""),this.importDataCatch=this.importDataSent.asObservable(),this.importErrorSent=new i.a(""),this.importErrorCatch=this.importErrorSent.asObservable()}importDataExchange(t){console.log(t),this.importDataSent.next(t)}importErrorExchange(t){this.importErrorSent.next(t)}getAllDevices(){return this.http.get(this.url+"/listDevices")}getAllDevicesByPage(t){return this.http.post(this.url+"/listDevicesByPage",t)}addDevice(t){return this.http.post(this.url+"/addDevice",t)}getAllFreeDevice(){return this.http.get(this.url+"/listFreeDevice")}getDeviceById(t){return this.http.get(this.url+t+"/editDevice")}updateDevice(t,e){return this.http.put(this.url+t+"/updateDevice",e)}deleteDevice(t){return this.http.delete(this.url+t+"/deleteDevice")}addDeviceWithUser(t){return this.http.post(this.url+"/addUserDevice",t)}deleteUserDevice(t){return this.http.post(this.url+"/deleteUserDevice",t)}getDeviceByUserId(t){return this.http.get(this.url+t+"/getDeviceByUser")}getDeviceByAllUser(){return this.http.get(this.url+"/getDeviceByAllUser")}addDeviceWithCustomer(t){return this.http.post(this.url+"/addCustomerDevice",t)}addDeviceWithCustomerByImport(t){return this.http.post(this.url+"/addDeviceWithCustomerByImport",t)}deleteCustomerDevice(t){return this.http.post(this.url+"/deleteCustomerDevice",t)}addDeviceWithCustomerReseller(t){return this.http.post(this.url+"/addCustomerResellerDevice",t)}deleteCustomerDeviceReseller(t){return this.http.post(this.url+"/deleteCustomerResellerDevice",t)}getDeviceByCustomerResellerId(t){return this.http.get(this.url+t+"/getDeviceByCustomerResellerId")}getDeviceByResellerId(t){return this.http.get(this.url+t+"/getDeviceByResellerId")}getDeviceByResellerIdFor(t){return this.http.get(this.url+t+"/getDeviceByResellerIdFor")}getDeviceByCustomerId(t){return this.http.get(this.url+t+"/getDeviceByCustomerId")}getAllPostion(){return this.http.get(this.url+"/listPositions")}getHistoryPostionBySearch(t){return this.http.post(this.url+"/listHistoryPositions",t)}getAllPostionBySearch(t){return this.http.post(this.url+"/listAllPositions",t)}getAllEvents(){return this.http.get(this.url+"/listEvents")}getAllEventsByReseller(t){return this.http.post(this.url+"/listEventsByReseller",t)}getDeviceWithPositionById(t){return this.http.get(this.url+t+"/getDeviceWithPositionById")}getDeviceCurrentPositionById(t){return this.http.get(this.url+t+"/getDeviceCurrentPositionById")}getMovingPosition(t){return this.http.post(this.url+"/movingPositions",t)}getDevicePositionByPositionId(t){return this.http.post(this.url+"/getDevicePositionByPositionId",t)}getEventPositionById(t){return this.http.get(this.url+t+"/getEventPositionById")}getDeviceIdByIMEI(t){return this.http.get(this.url+t+"/getDeviceIdByIMEI")}addDeviceWithReseller(t){return this.http.post(this.url+"/addDeviceWithReseller",t)}deleteDeviceFromReseller(t){return this.http.post(this.url+"/deleteDeviceFromReseller",t)}getAllDeviceCategory(){return this.http.get(this.url+"/listDeviceCategory")}addDeviceCategory(t){return this.http.post(this.url+"/addDeviceCategory",t)}getDeviceCategoryById(t){return this.http.get(this.url+t+"/editDeviceCategory")}updateDeviceCategory(t,e){return this.http.put(this.url+t+"/updateDeviceCategory",e)}deleteDeviceCategory(t){return this.http.delete(this.url+t+"/deleteDeviceCategory")}}return t.\u0275fac=function(e){return new(e||t)(o.jc(r.b))},t.\u0275prov=o.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},tmcy:function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));var i=c("fXoL");let a=(()=>{class t{constructor(){}dateTime(t="datetime",e){let c=new Date(e),i=("0"+c.getDate()).slice(-2),a=("0"+(c.getMonth()+1)).slice(-2),o=c.getFullYear(),r=("0"+c.getHours()).slice(-2),n=("0"+c.getMinutes()).slice(-2),s=("0"+c.getSeconds()).slice(-2);return"date"==t?o+"-"+a+"-"+i:"datetime"==t?o+"-"+a+"-"+i+" "+r+":"+n+":"+s:"time"==t?r+":"+n:c}dateTimeDiff(t){return((new Date).getTime()-new Date(t).getTime())/1e3}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);