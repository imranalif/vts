(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1jOF":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var i=r("AytR"),a=r("fXoL"),c=r("tk/3");let n=(()=>{class t{constructor(t){this.http=t,this.url=i.a.apiUrl+"/driver/"}addDriver(t){return this.http.post(this.url+"/addDriver",t)}getAllDriver(){return this.http.get(this.url+"/listDriver")}getAllDriversByPage(t){return this.http.post(this.url+"/listDriversByPage",t)}getDriverById(t){return this.http.get(this.url+t+"/editDriver")}updateDriver(t,e){return this.http.put(this.url+t+"/updateDriver",e)}deleteDriver(t){return this.http.delete(this.url+t+"/deleteDriver")}addDriverWithDevice(t){return this.http.post(this.url+"/addDeviceDriver",t)}deleteDeviceDriver(t){return this.http.post(this.url+"/deleteDeviceDriver",t)}getDriverByDeviceId(t){return this.http.get(this.url+t+"/getDriverByDevice")}addDriverWithGroup(t){return this.http.post(this.url+"/addGroupDriver",t)}deleteGroupDriver(t){return this.http.post(this.url+"/deleteGroupDriver",t)}getDriverByGroupId(t){return this.http.get(this.url+t+"/getDriverByGroup")}addDriverWithUser(t){return this.http.post(this.url+"/addUserDriver",t)}deleteUserDriver(t){return this.http.post(this.url+"/deleteUserDriver",t)}getDriverByUserId(t){return this.http.get(this.url+t+"/getDriverByUser")}getAllCustomerDriver(){return this.http.get(this.url+"/listCustomerDriver")}getDriverByCustomerId(t){return this.http.get(this.url+t+"/getDriverByCustomerId")}addDriverWithCustomer(t){return this.http.post(this.url+"/addCustomerDriver",t)}deleteCustomerDriver(t){return this.http.post(this.url+"/deleteCustomerDriver",t)}}return t.\u0275fac=function(e){return new(e||t)(a.jc(c.b))},t.\u0275prov=a.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Cp0R:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var i=r("fXoL"),a=r("Ofeh"),c=r("tyNb");let n=(()=>{class t{constructor(t,e){this.loginService=t,this.router=e,this.assigedRole=[]}canActivate(t,e){return this.loginService.loggedIn()?(this.assigedRole=JSON.parse(sessionStorage.getItem("rolesData")),1==this.assigedRole.includes(t.data.roles)||(this.router.navigate(["/deny"]),!1)):(this.router.navigate(["/"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(i.jc(a.a),i.jc(c.c))},t.\u0275prov=i.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},H0VJ:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var i=r("fXoL"),a=r("0IaG"),c=r("NFeN"),n=r("bTqV");let o=(()=>{class t{constructor(t){this.dialogRef=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(a.f))},t.\u0275cmp=i.Tb({type:t,selectors:[["app-mat-dialog"]],decls:11,vars:2,consts:[[1,"content-container"],["id","close-button",3,"click"],[1,"content-span"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button","color","warn",3,"mat-dialog-close"]],template:function(t,e){1&t&&(i.fc(0,"div"),i.fc(1,"div",0),i.fc(2,"mat-icon",1),i.nc("click",(function(){return e.closeDialog()})),i.Sc(3,"close"),i.ec(),i.fc(4,"div",2),i.Sc(5,"Are you sure to delete this record ?"),i.ec(),i.ec(),i.fc(6,"div"),i.fc(7,"button",3),i.Sc(8,"No"),i.ec(),i.fc(9,"button",4),i.Sc(10,"Yes"),i.ec(),i.ec(),i.ec()),2&t&&(i.Ob(7),i.yc("mat-dialog-close",!1),i.Ob(2),i.yc("mat-dialog-close",!0))},directives:[c.a,n.b,a.c],styles:["#close-button[_ngcontent-%COMP%]{margin-left:90%;cursor:pointer}.content-span[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:20px}#no-button[_ngcontent-%COMP%]{width:30%;margin-left:7%;margin-right:25%;background-color:#ff0}#yes-button[_ngcontent-%COMP%]{width:30%}"]}),t})(),s=(()=>{class t{constructor(t){this.dialog=t}openConfirmDialog(){return this.dialog.open(o,{width:"300px",disableClose:!0,position:{top:"20px"}})}}return t.\u0275fac=function(e){return new(e||t)(i.jc(a.b))},t.\u0275prov=i.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Nl8B:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("fXoL");let a=(()=>{class t{constructor(){}paginate(t,e=1,r=25,i=9){let a,c,n=Math.ceil(t/r);if(e<1?e=1:e>n&&(e=n),n<=i)a=1,c=n;else{let t=Math.floor(i/2),r=Math.ceil(i/2)-1;e<=t?(a=1,c=i):e+r>=n?(a=n-i+1,c=n):(a=e-t,c=e+r)}let o=(e-1)*r,s=Math.min(o+r-1,t-1),l=Array.from(Array(c+1-a).keys()).map(t=>a+t);return{totalItems:t,currentPage:e,pageSize:r,totalPages:n,startPage:a,endPage:c,startIndex:o,endIndex:s,pages:l}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},kDqm:function(t,e,r){"use strict";r.r(e),r.d(e,"DriverModule",(function(){return gt}));var i=r("ofXK"),a=r("3Pt+"),c=r("jAig"),n=r("KUt4"),o=r("YUcS"),s=r("tyNb"),l=r("Cp0R"),d=r("fXoL"),m=r("dNgK"),f=r("1jOF"),u=r("pD6V"),p=r("Wp6s"),h=r("XiUz"),g=r("kmnG"),v=r("qFsG"),b=r("7EHt"),y=r("NFeN"),C=r("znSr"),O=r("bTqV");function D(t,e){1&t&&(d.fc(0,"div",28),d.fc(1,"a"),d.fc(2,"mat-icon"),d.Sc(3,"clear"),d.ec(),d.ec(),d.ec())}const S=function(t,e){return{full:t,half:e}};function x(t,e){if(1&t&&(d.fc(0,"div",23),d.fc(1,"div",24),d.fc(2,"mat-form-field",12),d.ac(3,"input",25),d.ec(),d.fc(4,"mat-form-field",12),d.ac(5,"input",26),d.ec(),d.Rc(6,D,4,0,"div",27),d.ec(),d.ec()),2&t){const t=e.index,r=d.rc();d.Ob(1),d.yc("formArrayName",t),d.Ob(1),d.yc("ngClass",d.Cc(6,S,r.tr,r.fa)),d.Ob(1),d.yc("id","name"+t),d.Ob(1),d.yc("ngClass",d.Cc(9,S,r.tr,r.fa)),d.Ob(1),d.yc("id","value"+t),d.Ob(1),d.yc("ngIf",r.myform.get("attributes").length>1)}}let P=(()=>{class t{constructor(t,e,r,i,a){this.fb=t,this.router=e,this.snackBar=r,this.driverService=i,this.mediaObserver=a,this.object={},this.att=[],this.submitted=!1,this.states=[{id:1,value:"Active"},{id:0,value:"Inactive"}],this.step=0}setStep(t){this.step=t}ngOnInit(){this.myform=this.fb.group({driverName:["",[a.u.required]],identifier:["",[a.u.required]],driving_license:["",[a.u.required]],phone:[""],email:[""],fatherName:[""],motherName:[""],presentAddress:[""],permanentAddress:[""],nid:[""],attributes:this.fb.array([])})}assignAttributes(){return this.fb.group({name:[""],value:[""]})}get fArray(){return this.myform.get("attributes")}addassignAttributes(){this.fArray.push(this.assignAttributes())}removeAttributes(t){this.myform.get("attributes").removeAt(t)}openSnackBar(){this.snackBar.open("Successfully added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}addDriver(){this.myform.markAllAsTouched(),this.submitted=!0,this.myform.invalid||(console.log(this.myform.value.attributes),this.myform.value.attributes.forEach(t=>{this.object[t.name]=t.value,console.log(this.myform.value.attributes)}),this.myform.value.attributes=this.object,this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.created_by=this.userData.id,this.driverService.addDriver(this.myform.value).subscribe(t=>{this.openSnackBar(),this.router.navigate(["/admin/traccar/driver/list"])}))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(a.e),d.Zb(s.c),d.Zb(m.a),d.Zb(f.a),d.Zb(u.g))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-driver-add"]],decls:52,vars:28,consts:[[1,"customStyle"],[1,"title-style"],[3,"formGroup"],["fxLayout","row","fxLayout.xs","column",1,"main"],["fxFlex","50%"],[1,"full"],["trim","blur","matInput","","placeholder","Name","formControlName","driverName","autocomplete","off","required",""],["matInput","","placeholder","Identifier","formControlName","identifier","autocomplete","off","required",""],["matInput","","placeholder","Driving License","formControlName","driving_license","autocomplete","off","required",""],["matInput","","placeholder","Phone","formControlName","phone","autocomplete","off"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],[3,"ngClass"],["matInput","","placeholder","Father Name","formControlName","fatherName","autocomplete","off"],["matInput","","placeholder","Mother Name","formControlName","motherName","autocomplete","off"],["matInput","","placeholder","Email","formControlName","email","autocomplete","off"],["matInput","","placeholder","Present Address","formControlName","presentAddress","autocomplete","off"],["matInput","","placeholder","Permanent Address","formControlName","permanentAddress","autocomplete","off"],["matInput","","placeholder","NID","formControlName","nid","autocomplete","off"],["formArrayName","attributes",4,"ngFor","ngForOf"],[3,"click"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],["formArrayName","attributes"],[3,"formArrayName"],["trim","blur","matInput","","placeholder","Name","formControlName","name","autocomplete","off",3,"id"],["trim","blur","matInput","","placeholder","Value","formControlName","value","autocomplete","off",3,"id"],["class","delAssigns",4,"ngIf"],[1,"delAssigns"]],template:function(t,e){1&t&&(d.fc(0,"mat-card",0),d.fc(1,"div",1),d.fc(2,"mat-card-title"),d.Sc(3,"Driver Add Form"),d.ec(),d.ec(),d.fc(4,"mat-card-content"),d.fc(5,"form",2),d.fc(6,"div",3),d.fc(7,"div",4),d.fc(8,"mat-form-field",5),d.ac(9,"input",6),d.ec(),d.fc(10,"mat-form-field",5),d.ac(11,"input",7),d.ec(),d.fc(12,"mat-form-field",5),d.ac(13,"input",8),d.ec(),d.fc(14,"mat-form-field",5),d.ac(15,"input",9),d.ec(),d.ec(),d.fc(16,"div",4),d.fc(17,"mat-accordion",10),d.fc(18,"mat-expansion-panel",11),d.nc("opened",(function(){return e.setStep(1)})),d.fc(19,"mat-expansion-panel-header"),d.fc(20,"mat-panel-title"),d.fc(21,"mat-icon"),d.Sc(22,"add"),d.ec(),d.Sc(23," Personal Information "),d.ec(),d.ec(),d.fc(24,"mat-form-field",12),d.ac(25,"input",13),d.ec(),d.fc(26,"mat-form-field",12),d.ac(27,"input",14),d.ec(),d.fc(28,"mat-form-field",12),d.ac(29,"input",15),d.ec(),d.fc(30,"mat-form-field",12),d.ac(31,"textarea",16),d.ec(),d.fc(32,"mat-form-field",12),d.ac(33,"textarea",17),d.ec(),d.fc(34,"mat-form-field",12),d.ac(35,"input",18),d.ec(),d.ec(),d.ec(),d.fc(36,"mat-accordion",10),d.fc(37,"mat-expansion-panel",11),d.nc("opened",(function(){return e.setStep(3)})),d.fc(38,"mat-expansion-panel-header"),d.fc(39,"mat-panel-title"),d.fc(40,"mat-icon"),d.Sc(41,"add"),d.ec(),d.Sc(42," Attributes "),d.ec(),d.ec(),d.Rc(43,x,7,12,"div",19),d.fc(44,"button",20),d.nc("click",(function(){return e.addassignAttributes()})),d.fc(45,"mat-icon"),d.Sc(46,"add"),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(47,"mat-card-actions",21),d.fc(48,"button",22),d.nc("click",(function(){return e.addDriver()})),d.Sc(49," Add "),d.ec(),d.fc(50,"p"),d.Sc(51,"Note: Field marked with * is Mandatory"),d.ec(),d.ec(),d.ec()),2&t&&(d.Ob(5),d.yc("formGroup",e.myform),d.Ob(13),d.yc("expanded",1===e.step),d.Ob(6),d.yc("ngClass",d.Cc(10,S,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(13,S,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(16,S,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(19,S,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(22,S,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(25,S,e.tr,e.fa)),d.Ob(3),d.yc("expanded",3===e.step),d.Ob(6),d.yc("ngForOf",e.myform.get("attributes").controls))},directives:[p.a,p.f,p.c,a.v,a.o,a.g,h.b,h.a,g.c,v.b,a.c,a.n,a.f,a.t,b.a,b.c,b.d,b.e,y.a,i.k,C.a,i.l,p.b,O.b,a.d,i.m],styles:["mat-card[_ngcontent-%COMP%]{top:0}.main[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]{width:90%}.mainContent[_ngcontent-%COMP%]{width:45%}.optionalContent[_ngcontent-%COMP%]{width:45%;margin-top:-200px;float:right}.customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{margin-top:2%;color:#1a237e;text-align:center!important}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}.button[_ngcontent-%COMP%]{margin-top:120px}.half[_ngcontent-%COMP%]{width:40%}.delAssigns[_ngcontent-%COMP%]{margin-top:25px}a[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function _(t,e){if(1&t){const t=d.gc();d.fc(0,"div",30),d.fc(1,"a"),d.fc(2,"mat-icon",23),d.nc("click",(function(){d.Jc(t);const e=d.rc().index;return d.rc().removeAttributes(e)})),d.Sc(3,"clear"),d.ec(),d.ec(),d.ec()}}function I(t,e){if(1&t&&(d.fc(0,"div"),d.fc(1,"div",26),d.fc(2,"mat-form-field",14),d.ac(3,"input",27),d.ec(),d.fc(4,"mat-form-field",14),d.ac(5,"input",28),d.ec(),d.Rc(6,_,4,0,"div",29),d.ec(),d.ec()),2&t){const t=e.index,r=d.rc();d.Ob(1),d.yc("formGroupName",t),d.Ob(2),d.yc("id","name"+t),d.Ob(2),d.yc("id","value"+t),d.Ob(1),d.yc("ngIf",r.myform.get("attributes").length>1)}}let N=(()=>{class t{constructor(t,e,r,i,a){this.fb=t,this.router=e,this.snackBar=r,this.route=i,this.driverService=a,this.object={},this.att=[],this.submitted=!1,this.array=[{id:1,name:"speed",value:"25"},{id:2,name:"limit",value:"5"}],this.states=[{id:1,value:"Active"},{id:0,value:"Inactive"}],this.step=0}setStep(t){this.step=t}ngOnInit(){this.myform=this.fb.group({driverName:["",[a.u.required]],identifier:["",[a.u.required]],driving_license:["",[a.u.required]],phone:[""],email:[""],fatherName:[""],motherName:[""],presentAddress:[""],permanentAddress:[""],nid:[""],attributes:this.fb.array([])}),this.route.paramMap.subscribe(t=>{this.Id=t.get("id"),this.edit(this.Id)}),this.getAllDriver()}getAllDriver(){this.driverService.getAllDriver().subscribe(t=>{this.drivers=t,console.log(this.drivers)})}edit(t){this.driverService.getDriverById(t).subscribe(t=>{this.d=t,console.log(this.d);var e=JSON.parse(this.d.attributes),r=Object.entries(e);this.attr=[],r.forEach(t=>{this.attr.push({name:t[0],value:t[1]})}),this.d.attributes=this.attr,console.log(this.d.attributes),this.setData(this.d)})}setData(t){this.myform.patchValue({driverName:t.name,identifier:t.uniqueid,driving_license:t.driving_license,phone:t.phone,email:t.email,fatherName:t.father_name,motherName:t.mother_name,presentAddress:t.present_address,permanentAddress:t.permanent_address,nid:t.nid}),this.createdBy=t.created_by,this.setAttributes()}setAttributes(){let t=this.myform.controls.attributes;this.d.attributes.forEach(e=>{t.push(this.fb.group(e))})}assignAttributes(){return this.fb.group({name:[""],value:[""]})}get fArray(){return this.myform.get("attributes")}addassignAttributes(){this.fArray.push(this.assignAttributes())}removeAttributes(t){this.myform.get("attributes").removeAt(t)}openSnackBar(){this.snackBar.open("Updated added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}goBack(){this.router.navigate(["/admin/traccar/driver/list"])}updateDriver(){this.submitted=!0,this.myform.invalid||(this.myform.value.attributes.forEach(t=>{this.object[t.name]=t.value,console.log(this.myform.value.attributes)}),this.myform.value.attributes=this.object,this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.updated_by=this.userData.id,this.myform.value.created_by=this.createdBy,this.myform.value.updated_time=new Date,console.log(this.myform.value),this.driverService.updateDriver(this.Id,this.myform.value).subscribe(t=>{this.openSnackBar(),this.router.navigate(["/admin/traccar/driver/list"])}))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(a.e),d.Zb(s.c),d.Zb(m.a),d.Zb(s.a),d.Zb(f.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-driver-edit"]],decls:56,vars:4,consts:[[1,"customStyle"],["mat-button","",1,"mat-primary",3,"click"],[1,"title-style"],[3,"formGroup"],[1,"main"],[1,"mainContent"],[1,"full"],["trim","blur","matInput","","placeholder","Name","formControlName","driverName","autocomplete","off","required",""],["matInput","","placeholder","Identifier","formControlName","identifier","autocomplete","off","required",""],["matInput","","placeholder","Driving License","formControlName","driving_license","autocomplete","off","required",""],["matInput","","placeholder","Phone","formControlName","phone","autocomplete","off"],[1,"optionalContent"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],[1,"half"],["matInput","","placeholder","Father Name","formControlName","fatherName","autocomplete","off"],["matInput","","placeholder","Mother Name","formControlName","motherName","autocomplete","off"],["matInput","","placeholder","Email","formControlName","email","autocomplete","off"],["matInput","","placeholder","Present Address","formControlName","presentAddress","autocomplete","off"],["matInput","","placeholder","Permanent Address","formControlName","permanentAddress","autocomplete","off"],["matInput","","placeholder","NID","formControlName","nid","autocomplete","off"],["formArrayName","attributes"],[4,"ngFor","ngForOf"],[3,"click"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],[3,"formGroupName"],["trim","blur","matInput","","placeholder","Name","formControlName","name","autocomplete","off",3,"id"],["trim","blur","matInput","","placeholder","Value","formControlName","value","autocomplete","off",3,"id"],["class","delAssigns",4,"ngIf"],[1,"delAssigns"]],template:function(t,e){1&t&&(d.fc(0,"mat-card",0),d.fc(1,"button",1),d.nc("click",(function(){return e.goBack()})),d.fc(2,"mat-icon"),d.Sc(3,"arrow_back"),d.ec(),d.ec(),d.fc(4,"div",2),d.fc(5,"mat-card-title"),d.Sc(6,"Driver Update Form"),d.ec(),d.ec(),d.fc(7,"mat-card-content"),d.fc(8,"form",3),d.fc(9,"div",4),d.fc(10,"div",5),d.fc(11,"mat-form-field",6),d.ac(12,"input",7),d.ec(),d.fc(13,"mat-form-field",6),d.ac(14,"input",8),d.ec(),d.fc(15,"mat-form-field",6),d.ac(16,"input",9),d.ec(),d.fc(17,"mat-form-field",6),d.ac(18,"input",10),d.ec(),d.ec(),d.fc(19,"div",11),d.fc(20,"mat-accordion",12),d.fc(21,"mat-expansion-panel",13),d.nc("opened",(function(){return e.setStep(1)})),d.fc(22,"mat-expansion-panel-header"),d.fc(23,"mat-panel-title"),d.fc(24,"mat-icon"),d.Sc(25,"add"),d.ec(),d.Sc(26," Personal Information "),d.ec(),d.ec(),d.fc(27,"mat-form-field",14),d.ac(28,"input",15),d.ec(),d.fc(29,"mat-form-field",14),d.ac(30,"input",16),d.ec(),d.fc(31,"mat-form-field",14),d.ac(32,"input",17),d.ec(),d.fc(33,"mat-form-field",14),d.ac(34,"textarea",18),d.ec(),d.fc(35,"mat-form-field",14),d.ac(36,"textarea",19),d.ec(),d.fc(37,"mat-form-field",14),d.ac(38,"input",20),d.ec(),d.ec(),d.ec(),d.fc(39,"mat-accordion",12),d.fc(40,"mat-expansion-panel",13),d.nc("opened",(function(){return e.setStep(3)})),d.fc(41,"mat-expansion-panel-header"),d.fc(42,"mat-panel-title"),d.fc(43,"mat-icon"),d.Sc(44,"add"),d.ec(),d.Sc(45," Attributes "),d.ec(),d.ec(),d.fc(46,"div",21),d.Rc(47,I,7,4,"div",22),d.ec(),d.fc(48,"button",23),d.nc("click",(function(){return e.addassignAttributes()})),d.fc(49,"mat-icon"),d.Sc(50,"add"),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(51,"mat-card-actions",24),d.fc(52,"button",25),d.nc("click",(function(){return e.updateDriver()})),d.Sc(53," Update "),d.ec(),d.fc(54,"p"),d.Sc(55,"Note: Field marked with * is Mandatory"),d.ec(),d.ec(),d.ec()),2&t&&(d.Ob(8),d.yc("formGroup",e.myform),d.Ob(13),d.yc("expanded",1===e.step),d.Ob(19),d.yc("expanded",3===e.step),d.Ob(7),d.yc("ngForOf",e.myform.get("attributes").controls))},directives:[p.a,O.b,y.a,p.f,p.c,a.v,a.o,a.g,g.c,v.b,a.c,a.n,a.f,a.t,b.a,b.c,b.d,b.e,a.d,i.l,p.b,a.h,i.m],styles:["mat-card[_ngcontent-%COMP%]{top:0}.main[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]{width:90%}.mainContent[_ngcontent-%COMP%]{width:45%}.optionalContent[_ngcontent-%COMP%]{width:45%;margin-top:-200px;float:right}.customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{margin-top:-4%;color:#1a237e;text-align:center!important}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}.button[_ngcontent-%COMP%]{margin-top:100px}.half[_ngcontent-%COMP%]{width:40%}.delAssigns[_ngcontent-%COMP%]{margin-top:25px}a[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();var w=r("M9IT"),A=r("Dh3D"),k=r("+0xr"),M=r("Iab2"),T=r("H0VJ"),R=r("0IaG"),B=r("Nl8B"),F=r("tmcy"),j=r("z17N"),L=r("Xa2L");function Z(t,e){1&t&&(d.fc(0,"th",39),d.Sc(1,"Action"),d.ec())}function q(t,e){if(1&t){const t=d.gc();d.fc(0,"button",43),d.fc(1,"mat-icon",44),d.nc("click",(function(){d.Jc(t);const e=d.rc().$implicit;return d.rc().editDriver(e)})),d.Sc(2,"edit"),d.ec(),d.ec()}}function G(t,e){if(1&t){const t=d.gc();d.fc(0,"button",45),d.fc(1,"mat-icon",44),d.nc("click",(function(){d.Jc(t);const e=d.rc().$implicit;return d.rc().deleteDriver(e)})),d.Sc(2,"delete_outline"),d.ec(),d.ec()}}function J(t,e){if(1&t&&(d.fc(0,"td",40),d.Rc(1,q,3,0,"button",41),d.Rc(2,G,3,0,"button",42),d.ec()),2&t){const t=d.rc();d.Ob(1),d.yc("ngIf",1==t.assigedRole.includes("driver_edit")),d.Ob(1),d.yc("ngIf",1==t.assigedRole.includes("driver_delete"))}}function U(t,e){1&t&&(d.fc(0,"th",46),d.Sc(1,"ID"),d.ec())}function E(t,e){if(1&t&&(d.fc(0,"td",40),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.id)}}function V(t,e){1&t&&(d.fc(0,"th",46),d.Sc(1,"Name"),d.ec())}function $(t,e){if(1&t&&(d.fc(0,"td",40),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.name)}}function X(t,e){1&t&&(d.fc(0,"th",46),d.Sc(1,"Identifer"),d.ec())}function z(t,e){if(1&t&&(d.fc(0,"td",40),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.uniqueid)}}function W(t,e){1&t&&(d.fc(0,"th",46),d.Sc(1,"Contact Number"),d.ec())}function H(t,e){if(1&t&&(d.fc(0,"td",40),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.phone)}}function K(t,e){1&t&&(d.fc(0,"th",46),d.Sc(1,"Driving License"),d.ec())}function Y(t,e){if(1&t&&(d.fc(0,"td",40),d.Sc(1),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(t.drivig_license)}}function Q(t,e){1&t&&(d.fc(0,"th",46),d.Sc(1,"Created Time"),d.ec())}function tt(t,e){if(1&t&&(d.fc(0,"td",40),d.Sc(1),d.sc(2,"date"),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(d.uc(2,1,t.created_time,"medium"))}}function et(t,e){1&t&&(d.fc(0,"th",46),d.Sc(1,"Last Update"),d.ec())}function rt(t,e){if(1&t&&(d.fc(0,"td",40),d.Sc(1),d.sc(2,"date"),d.ec()),2&t){const t=e.$implicit;d.Ob(1),d.Tc(d.uc(2,1,t.lastupdate,"medium"))}}function it(t,e){1&t&&d.ac(0,"tr",47)}function at(t,e){1&t&&d.ac(0,"tr",48)}const ct=function(t){return{active:t}};function nt(t,e){if(1&t){const t=d.gc();d.fc(0,"li",50),d.fc(1,"a",44),d.nc("click",(function(){d.Jc(t);const r=e.$implicit;return d.rc(2).getDriverByPage(r)})),d.Sc(2),d.ec(),d.ec()}if(2&t){const t=e.$implicit,r=d.rc(2);d.yc("ngClass",d.Bc(2,ct,r.pager.currentPage===t)),d.Ob(2),d.Tc(t)}}const ot=function(t){return{disabled:t}};function st(t,e){if(1&t){const t=d.gc();d.fc(0,"ul",49),d.fc(1,"li",50),d.fc(2,"a",44),d.nc("click",(function(){d.Jc(t);const e=d.rc();return e.getDriverByPage(e.pager.currentPage-1)})),d.Sc(3,"\xab"),d.ec(),d.ec(),d.Rc(4,nt,3,4,"li",51),d.fc(5,"li",50),d.fc(6,"a",44),d.nc("click",(function(){d.Jc(t);const e=d.rc();return e.getDriverByPage(e.pager.currentPage+1)})),d.Sc(7,"\xbb"),d.ec(),d.ec(),d.ec()}if(2&t){const t=d.rc();d.Ob(1),d.yc("ngClass",d.Bc(3,ot,1===t.pager.currentPage)),d.Ob(3),d.yc("ngForOf",t.pager.pages),d.Ob(1),d.yc("ngClass",d.Bc(5,ot,2===t.pager.currentPage))}}function lt(t,e){1&t&&(d.fc(0,"mat-card",52),d.ac(1,"mat-progress-spinner",53),d.ec())}function dt(t,e){1&t&&(d.fc(0,"mat-card",54),d.Sc(1," No Records Found! "),d.ec())}const mt=function(t,e){return{full:t,half:e}},ft=function(t,e){return{actionbar:t,search_action:e}},ut=function(){return[0]},pt=[{path:"add",component:P,canActivate:[l.a],data:{roles:"driver_add"}},{path:"list",component:(()=>{class t{constructor(t,e,r,i,a,c,n,o,s){this.driverService=t,this.snackBar=e,this.router=r,this.dialogService=i,this.dialog=a,this.fb=c,this.mediaObserver=n,this.pagination=o,this.dateFormatService=s,this.assigedRole=[],this.show=!0,this.currentPage=1,this.params={},this.pager=[],this.record=[],this.isLoading=!0,this.idColumn="id",this.dataSource=new k.k([]),this.states=[{id:0,value:"Inactive"},{id:1,value:"Active"}],this.displayedColumns=["action","id","name","identifier","phone","license","createdtime","updatedtime"],this.assigedRole=JSON.parse(sessionStorage.getItem("rolesData"))}ngOnInit(){this.myform=this.fb.group({name:[""],identifier:[""],phone:[""],driving_license:[""],fromdate:[],todate:[]}),this.mediaSub=this.mediaObserver.media$.subscribe(t=>{"xs"==t.mqAlias?(this.tr=!0,this.fa=!1):(this.tr=!1,this.fa=!0)}),this.getAllDriver()}getAllDriverTest(){this.driverService.getAllDriver().subscribe(t=>{this.drivers=t,this.dataSource=new k.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}getAllDriver(){this.params={currentPage:this.currentPage},this.driverService.getAllDriversByPage(this.params).subscribe(t=>{this.drivers=t.rows,this.record=t.count,console.log(t.count),this.pager=this.pagination.paginate(this.record),console.log(this.pager.totalPages),this.dataSource=new k.k(this.drivers),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator),this.isLoading=!1})}getDriverByPage(t){this.page=t,this.page>this.pager.totalPages||(this.params={currentPage:t,name:this.myform.value.name,identifier:this.myform.value.identifier,phone:this.myform.value.phone,driving_license:this.myform.value.driving_license,fromdate:this.myform.value.fromdate,todate:this.myform.value.todate},this.driverService.getAllDriversByPage(this.params).subscribe(e=>{this.isLoading=!1,this.drivers=e.rows,console.log(this.record),this.pager=this.pagination.paginate(this.record,t),this.dataSource=new k.k(this.drivers),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)}))}getDriverBySearch(){this.myform.value.fromdate&&(this.myform.value.fromdate=this.dateFormatService.dateTime("datetime",this.myform.value.fromdate)),this.myform.value.todate&&(this.myform.value.todate=this.dateFormatService.dateTime("datetime",this.myform.value.todate)),this.params={currentPage:this.currentPage,name:this.myform.value.name,identifier:this.myform.value.identifier,phone:this.myform.value.phone,driving_license:this.myform.value.driving_license,fromdate:this.myform.value.fromdate,todate:this.myform.value.todate},this.driverService.getAllDriversByPage(this.params).subscribe(t=>{this.isLoading=!1,this.drivers=t.rows,this.record=t.count,this.pager=this.pagination.paginate(this.record),this.dataSource=new k.k(this.drivers),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}editDriver(t){this.router.navigate(["admin/traccar/driver/edit",t.id])}deleteDriver(t){this.dialogService.openConfirmDialog().afterClosed().subscribe(e=>{e&&(this.driverService.deleteDriver(t.id).subscribe(),this.deleteRowDataTable(t.id,this.idColumn,this.paginator,this.dataSource),this.openSnackBar())})}deleteRowDataTable(t,e,r,i){this.drivers=i.data;const a=this.drivers.findIndex(r=>r[e]===t);i.data.splice(a,1),i.paginator=r}openSnackBar(){this.snackBar.open("Deleted!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase()}goAddItem(){this.router.navigate(["/admin/traccar/driver/add"])}downloadFile(t){const e=(t,e)=>null===e?"":e,r=Object.keys(t[0]);let i=t.map(t=>r.map(r=>JSON.stringify(t[r],e)).join(","));i.unshift(r.join(","));let a=i.join("\r\n");var c=new Blob([a],{type:"text/csv"});Object(M.saveAs)(c,"myFile.csv")}getBack(){this.getAllDriver()}goAddPage(){this.router.navigate(["/admin/traccar/driver/add"])}cleanForm(t){Object.keys(t.controls).forEach(e=>t.get(e).setValue(t.get(e).value.trim()))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(f.a),d.Zb(m.a),d.Zb(s.c),d.Zb(T.a),d.Zb(R.b),d.Zb(a.e),d.Zb(u.g),d.Zb(B.a),d.Zb(F.a))},t.\u0275cmp=d.Tb({type:t,selectors:[["app-driver-list"]],viewQuery:function(t,e){var r;1&t&&(d.Wc(A.a,!0),d.Wc(w.a,!0)),2&t&&(d.Ec(r=d.oc())&&(e.sort=r.first),d.Ec(r=d.oc())&&(e.paginator=r.first))},decls:67,vars:41,consts:[["id","myname",1,"custom-style"],[1,"table-title"],["fxLayout","row","fxLayout.xs","column",1,"search-div"],["fxFlex","75%"],[3,"formGroup"],["fxLayout","row","fxLayout.xs","column"],[3,"ngClass"],["matInput","","placeholder","Name","formControlName","name","autocomplete","off"],["matInput","","placeholder","Identifier","formControlName","identifier","autocomplete","off"],["matInput","","placeholder","Contact Nunber","formControlName","phone","autocomplete","off"],["matInput","","placeholder","Driving License","formControlName","driving_license","autocomplete","off"],["matInput","","formControlName","fromdate","placeholder","From Date ",3,"owlDateTime","owlDateTimeTrigger"],["dt1",""],["matInput","","formControlName","todate","placeholder","To Date",3,"owlDateTime","owlDateTimeTrigger"],["dt2",""],["fxFlex","25%","fxFlex.xs","100%",3,"ngClass"],["mat-button","",1,"mat-stroked-button","mat-primary",3,"click"],[1,"addButton"],["mat-button","",1,"mat-raised-button","mat-primary",3,"click"],[1,"table_container"],["mat-table","","matTableExporter","","matSort","",1,"mat-elevation-z8",3,"dataSource","hiddenColumns"],["exporter","matTableExporter"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","identifier"],["matColumnDef","phone"],["matColumnDef","license"],["matColumnDef","createdtime"],["matColumnDef","updatedtime"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"middle"],["class","pagination",4,"ngIf"],["style","display:flex; justify-content: center; align-items: center",4,"ngIf"],["class","notfoundbox",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",4,"ngIf"],["mat-icon-button","","color","warn",4,"ngIf"],["mat-icon-button",""],[3,"click"],["mat-icon-button","","color","warn"],["mat-header-cell","","mat-sort-header",""],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"],[1,"pagination"],[1,"pagination",3,"ngClass"],["class","pagination",3,"ngClass",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","align-items","center"],["color","primary","mode","indeterminate"],[1,"notfoundbox"]],template:function(t,e){if(1&t){const t=d.gc();d.fc(0,"div",0),d.fc(1,"div",1),d.fc(2,"h3"),d.Sc(3,"Driver Table"),d.ec(),d.ec(),d.fc(4,"div",2),d.fc(5,"div",3),d.fc(6,"form",4),d.fc(7,"div",5),d.fc(8,"mat-form-field",6),d.ac(9,"input",7),d.ec(),d.fc(10,"mat-form-field",6),d.ac(11,"input",8),d.ec(),d.fc(12,"mat-form-field",6),d.ac(13,"input",9),d.ec(),d.fc(14,"mat-form-field",6),d.ac(15,"input",10),d.ec(),d.fc(16,"mat-form-field",6),d.ac(17,"input",11),d.ac(18,"owl-date-time",null,12),d.ec(),d.fc(20,"mat-form-field",6),d.ac(21,"input",13),d.ac(22,"owl-date-time",null,14),d.ec(),d.ec(),d.ec(),d.ec(),d.fc(24,"div",15),d.fc(25,"button",16),d.nc("click",(function(){return e.cleanForm(e.myform)}))("click",(function(){return e.getDriverBySearch()})),d.Sc(26," Search "),d.ec(),d.fc(27,"button",16),d.nc("click",(function(){return e.getBack()})),d.Sc(28," Clear "),d.ec(),d.fc(29,"span",17),d.fc(30,"button",18),d.nc("click",(function(){return e.goAddPage()})),d.Sc(31," Add "),d.ec(),d.ec(),d.fc(32,"button",18),d.nc("click",(function(){return d.Jc(t),d.Fc(36).exportTable("csv",{fileName:"Driver"})})),d.Sc(33," EXP "),d.ec(),d.ec(),d.ec(),d.fc(34,"div",19),d.fc(35,"table",20,21),d.dc(37,22),d.Rc(38,Z,2,0,"th",23),d.Rc(39,J,3,2,"td",24),d.cc(),d.dc(40,25),d.Rc(41,U,2,0,"th",26),d.Rc(42,E,2,1,"td",24),d.cc(),d.dc(43,27),d.Rc(44,V,2,0,"th",26),d.Rc(45,$,2,1,"td",24),d.cc(),d.dc(46,28),d.Rc(47,X,2,0,"th",26),d.Rc(48,z,2,1,"td",24),d.cc(),d.dc(49,29),d.Rc(50,W,2,0,"th",26),d.Rc(51,H,2,1,"td",24),d.cc(),d.dc(52,30),d.Rc(53,K,2,0,"th",26),d.Rc(54,Y,2,1,"td",24),d.cc(),d.dc(55,31),d.Rc(56,Q,2,0,"th",26),d.Rc(57,tt,3,4,"td",24),d.cc(),d.dc(58,32),d.Rc(59,et,2,0,"th",26),d.Rc(60,rt,3,4,"td",24),d.cc(),d.Rc(61,it,1,0,"tr",33),d.Rc(62,at,1,0,"tr",34),d.ec(),d.fc(63,"div",35),d.Rc(64,st,8,7,"ul",36),d.ec(),d.Rc(65,lt,2,0,"mat-card",37),d.Rc(66,dt,2,0,"mat-card",38),d.ec(),d.ec()}if(2&t){const t=d.Fc(19),r=d.Fc(23);d.Ob(6),d.yc("formGroup",e.myform),d.Ob(2),d.yc("ngClass",d.Cc(19,mt,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(22,mt,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(25,mt,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(28,mt,e.tr,e.fa)),d.Ob(2),d.yc("ngClass",d.Cc(31,mt,e.tr,e.fa)),d.Ob(1),d.yc("owlDateTime",t)("owlDateTimeTrigger",t),d.Ob(3),d.yc("ngClass",d.Cc(34,mt,e.tr,e.fa)),d.Ob(1),d.yc("owlDateTime",r)("owlDateTimeTrigger",r),d.Ob(3),d.yc("ngClass",d.Cc(37,ft,e.tr,e.fa)),d.Ob(11),d.yc("dataSource",e.dataSource)("hiddenColumns",d.Ac(40,ut)),d.Ob(26),d.yc("matHeaderRowDef",e.displayedColumns),d.Ob(1),d.yc("matRowDefColumns",e.displayedColumns),d.Ob(2),d.yc("ngIf",e.pager.pages&&e.pager.pages.length),d.Ob(1),d.yc("ngIf",e.isLoading),d.Ob(1),d.yc("ngIf",""==e.drivers)}},directives:[h.b,h.a,a.v,a.o,a.g,g.c,i.k,C.a,v.b,a.c,a.n,a.f,j.b,j.d,j.a,O.b,k.j,n.a,A.a,k.c,k.e,k.b,k.g,k.i,i.m,k.d,k.a,y.a,A.b,k.f,k.h,i.l,p.a,L.a],pipes:[i.e],styles:[".filter[_ngcontent-%COMP%]{width:15%;margin-right:50%}.add_button[_ngcontent-%COMP%]{width:10%;color:#fff;margin-left:10px!important;background-color:#00f}.full[_ngcontent-%COMP%]{width:90%;margin-left:5%}.half[_ngcontent-%COMP%]{width:15%;margin-left:1%;float:left}.mat-raised-button[_ngcontent-%COMP%]{width:8%;margin-left:.5%}.pagination[_ngcontent-%COMP%]{display:inline-block}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;float:left;padding:8px 16px;text-decoration:none;transition:background-color .3s;border:1px solid #ddd}.active[_ngcontent-%COMP%]{background-color:#29abe2;background:#4169e1;color:red}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#ddd}.middle[_ngcontent-%COMP%]{margin-left:50%}a[_ngcontent-%COMP%]{cursor:pointer}.notfoundbox[_ngcontent-%COMP%]{top:0}"]}),t})(),canActivate:[l.a],data:{roles:"driver_list"}},{path:"edit/:id",component:N,canActivate:[l.a],data:{roles:"driver_edit"}}];let ht=(()=>{class t{}return t.\u0275mod=d.Xb({type:t}),t.\u0275inj=d.Wb({factory:function(e){return new(e||t)},imports:[[s.f.forChild(pt)],s.f]}),t})(),gt=(()=>{class t{}return t.\u0275mod=d.Xb({type:t}),t.\u0275inj=d.Wb({factory:function(e){return new(e||t)},imports:[[i.c,ht,c.a,a.s,a.i,n.b,o.a]]}),t})()}}]);