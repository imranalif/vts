(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Cp0R:function(t,e,c){"use strict";c.d(e,"a",(function(){return i}));var o=c("fXoL"),a=c("Ofeh"),n=c("tyNb");let i=(()=>{class t{constructor(t,e){this.loginService=t,this.router=e,this.assigedRole=[]}canActivate(t,e){return this.loginService.loggedIn()?(this.assigedRole=JSON.parse(sessionStorage.getItem("rolesData")),1==this.assigedRole.includes(t.data.roles)||(this.router.navigate(["/deny"]),!1)):(this.router.navigate(["/"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(o.jc(a.a),o.jc(n.c))},t.\u0275prov=o.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},H0VJ:function(t,e,c){"use strict";c.d(e,"a",(function(){return s}));var o=c("fXoL"),a=c("0IaG"),n=c("NFeN"),i=c("bTqV");let r=(()=>{class t{constructor(t){this.dialogRef=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Zb(a.f))},t.\u0275cmp=o.Tb({type:t,selectors:[["app-mat-dialog"]],decls:11,vars:2,consts:[[1,"content-container"],["id","close-button",3,"click"],[1,"content-span"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button","color","warn",3,"mat-dialog-close"]],template:function(t,e){1&t&&(o.fc(0,"div"),o.fc(1,"div",0),o.fc(2,"mat-icon",1),o.nc("click",(function(){return e.closeDialog()})),o.Tc(3,"close"),o.ec(),o.fc(4,"div",2),o.Tc(5,"Are you sure to delete this record ?"),o.ec(),o.ec(),o.fc(6,"div"),o.fc(7,"button",3),o.Tc(8,"No"),o.ec(),o.fc(9,"button",4),o.Tc(10,"Yes"),o.ec(),o.ec(),o.ec()),2&t&&(o.Ob(7),o.yc("mat-dialog-close",!1),o.Ob(2),o.yc("mat-dialog-close",!0))},directives:[n.a,i.b,a.c],styles:["#close-button[_ngcontent-%COMP%]{margin-left:90%;cursor:pointer}.content-span[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:20px}#no-button[_ngcontent-%COMP%]{width:30%;margin-left:7%;margin-right:25%;background-color:#ff0}#yes-button[_ngcontent-%COMP%]{width:30%}"]}),t})(),s=(()=>{class t{constructor(t){this.dialog=t}openConfirmDialog(){return this.dialog.open(r,{width:"300px",disableClose:!0,position:{top:"20px"}})}}return t.\u0275fac=function(e){return new(e||t)(o.jc(a.b))},t.\u0275prov=o.Vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},oAu2:function(t,e,c){"use strict";c.r(e),c.d(e,"CommandsModule",(function(){return H}));var o=c("ofXK"),a=c("3Pt+"),n=c("KUt4"),i=c("tyNb"),r=c("Cp0R"),s=c("fXoL"),d=c("dNgK"),m=c("9dHA"),l=c("Wp6s"),u=c("kmnG"),f=c("qFsG"),p=c("bSwM"),h=c("d3UM"),b=c("bTqV"),g=c("FKr1");function y(t,e){if(1&t&&(s.fc(0,"mat-option",11),s.Tc(1),s.ec()),2&t){const t=e.$implicit;s.yc("value",t.value),s.Ob(1),s.Vc(" ",t.value," ")}}let v=(()=>{class t{constructor(t,e,c,o){this.fb=t,this.router=e,this.snackBar=c,this.commandService=o,this.object={},this.att=[],this.groups=[],this.submitted=!1,this.types=[{id:1,value:"Engine On"},{id:0,value:"Arm Alarm"},{id:2,value:"TimeZone"}],this.nameTypes=[{id:1,value:"TimeZone"},{id:2,value:"Speed Limit"},{id:3,value:"odometer"}]}ngOnInit(){this.myform=this.fb.group({description:["",[a.u.required]],sms:["",[a.u.required]],type:["",[a.u.required]]})}openSnackBar(){this.snackBar.open("Successfully added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}addCommand(){this.myform.markAllAsTouched(),this.submitted=!0,this.myform.invalid||(this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.created_by=this.userData.id,console.log(this.myform.value),this.commandService.addCommand(this.myform.value).subscribe(t=>{this.openSnackBar(),this.router.navigate(["/admin/traccar/commands/list"])},t=>{console.log(t)}))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(a.e),s.Zb(i.c),s.Zb(d.a),s.Zb(m.a))},t.\u0275cmp=s.Tb({type:t,selectors:[["app-command-add"]],decls:21,vars:2,consts:[[1,"customStyle"],[1,"title-style"],[3,"formGroup"],[1,"full"],["trim","blur","matInput","","placeholder","Description","formControlName","description","autocomplete","off","required",""],["formControlName","sms","labelPosition","before","required","",1,"checkbox"],["required","",1,"full"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],[3,"value"]],template:function(t,e){1&t&&(s.fc(0,"mat-card",0),s.fc(1,"div",1),s.fc(2,"mat-card-title"),s.Tc(3,"Command Add Form"),s.ec(),s.ec(),s.fc(4,"mat-card-content"),s.fc(5,"form",2),s.fc(6,"mat-form-field",3),s.ac(7,"textarea",4),s.ec(),s.fc(8,"div",3),s.fc(9,"mat-checkbox",5),s.Tc(10," Send SMS* "),s.ec(),s.ec(),s.fc(11,"mat-form-field",6),s.fc(12,"mat-label"),s.Tc(13,"Type"),s.ec(),s.fc(14,"mat-select",7),s.Sc(15,y,2,2,"mat-option",8),s.ec(),s.ec(),s.ec(),s.ec(),s.fc(16,"mat-card-actions",9),s.fc(17,"button",10),s.nc("click",(function(){return e.addCommand()})),s.Tc(18," Add "),s.ec(),s.fc(19,"p"),s.Tc(20,"Note: Field marked with * is Mandatory"),s.ec(),s.ec(),s.ec()),2&t&&(s.Ob(5),s.yc("formGroup",e.myform),s.Ob(10),s.yc("ngForOf",e.types))},directives:[l.a,l.f,l.c,a.v,a.o,a.g,u.c,f.b,a.c,a.n,a.f,a.t,p.a,p.c,u.g,h.a,o.l,l.b,b.b,g.o],styles:[".customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{color:#1a237e;text-align:center!important}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}"]}),t})();var C=c("NFeN");function S(t,e){1&t&&(s.fc(0,"div",15),s.Tc(1," Name is required"),s.ec())}function O(t,e){if(1&t&&(s.fc(0,"div",13),s.Sc(1,S,2,0,"div",14),s.ec()),2&t){const t=s.rc();s.Ob(1),s.yc("ngIf",t.myform.get("description").errors.required)}}function k(t,e){if(1&t&&(s.fc(0,"mat-option",16),s.Tc(1),s.ec()),2&t){const t=e.$implicit;s.yc("value",t.value),s.Ob(1),s.Vc(" ",t.value," ")}}let T=(()=>{class t{constructor(t,e,c,o,a){this.fb=t,this.router=e,this.snackBar=c,this.commandService=o,this.route=a,this.object={},this.att=[],this.groups=[],this.submitted=!1,this.types=[{id:1,value:"Engine On"},{id:0,value:"Arm Alarm"},{id:2,value:"TimeZone"}],this.nameTypes=[{id:1,value:"TimeZone"},{id:2,value:"Speed Limit"},{id:3,value:"odometer"}]}ngOnInit(){this.myform=this.fb.group({description:["",[a.u.required]],sms:["",[a.u.required]],type:["",[a.u.required]]}),this.route.paramMap.subscribe(t=>{this.Id=t.get("id"),this.edit(this.Id)})}edit(t){this.commandService.getCommandById(t).subscribe(t=>{this.setData(t)})}setData(t){this.myform.patchValue({type:t.type,description:t.description,sms:t.textchannel}),this.createdBy=t.created_by}openSnackBar(){this.snackBar.open("Updated added!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}goBack(){this.router.navigate(["/admin/traccar/commands/list"])}updateCommand(){this.myform.markAllAsTouched(),this.submitted=!0,this.myform.invalid||(this.userData=JSON.parse(localStorage.getItem("userData")),this.myform.value.updated_by=this.userData.id,this.myform.value.created_by=this.createdBy,this.myform.value.updated_time=new Date,console.log(this.myform.value),this.commandService.updateCommand(this.Id,this.myform.value).subscribe(t=>{this.openSnackBar(),this.router.navigate(["/admin/traccar/commands/list"])}))}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(a.e),s.Zb(i.c),s.Zb(d.a),s.Zb(m.a),s.Zb(i.a))},t.\u0275cmp=s.Tb({type:t,selectors:[["app-command-edit"]],decls:25,vars:3,consts:[[1,"customStyle"],["mat-button","",1,"mat-primary",3,"click"],[1,"title-style"],[3,"formGroup"],[1,"full"],["trim","blur","matInput","","placeholder","Description","formControlName","description","autocomplete","off","required",""],["class","feedback",4,"ngIf"],["formControlName","sms","labelPosition","before","required","",1,"checkbox"],["required","",1,"full"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"button"],["mat-stroked-button","","color","primary",1,"btn-block",3,"click"],[1,"feedback"],["class","red",4,"ngIf"],[1,"red"],[3,"value"]],template:function(t,e){1&t&&(s.fc(0,"mat-card",0),s.fc(1,"button",1),s.nc("click",(function(){return e.goBack()})),s.fc(2,"mat-icon"),s.Tc(3,"arrow_back"),s.ec(),s.ec(),s.fc(4,"div",2),s.fc(5,"mat-card-title"),s.Tc(6,"Command Update Form"),s.ec(),s.ec(),s.fc(7,"mat-card-content"),s.fc(8,"form",3),s.fc(9,"mat-form-field",4),s.ac(10,"textarea",5),s.ec(),s.Sc(11,O,2,1,"div",6),s.fc(12,"div",4),s.fc(13,"mat-checkbox",7),s.Tc(14," Send SMS* "),s.ec(),s.ec(),s.fc(15,"mat-form-field",8),s.fc(16,"mat-label"),s.Tc(17,"Category"),s.ec(),s.fc(18,"mat-select",9),s.Sc(19,k,2,2,"mat-option",10),s.ec(),s.ec(),s.ec(),s.ec(),s.fc(20,"mat-card-actions",11),s.fc(21,"button",12),s.nc("click",(function(){return e.updateCommand()})),s.Tc(22," Update "),s.ec(),s.fc(23,"p"),s.Tc(24,"Note: Field marked with * is Mandatory"),s.ec(),s.ec(),s.ec()),2&t&&(s.Ob(8),s.yc("formGroup",e.myform),s.Ob(3),s.yc("ngIf",e.submitted&&e.myform.get("description").errors),s.Ob(8),s.yc("ngForOf",e.types))},directives:[l.a,b.b,C.a,l.f,l.c,a.v,a.o,a.g,u.c,f.b,a.c,a.n,a.f,a.t,o.m,p.a,p.c,u.g,h.a,o.l,l.b,g.o],styles:[".customStyle[_ngcontent-%COMP%]{border-radius:10px 10px 10px 10px;box-shadow:5px 10px 15px #1a237e}.customStyle[_ngcontent-%COMP%]   .title-style[_ngcontent-%COMP%]{color:#1a237e;text-align:center!important}.customStyle[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:red;margin-left:30px}.customStyle[_ngcontent-%COMP%]   .error_message[_ngcontent-%COMP%]{color:red;margin-left:20px;margin-top:-10px;font-size:12px}.mat-stroked-button[_ngcontent-%COMP%]{width:120px;border:1px solid #00f}.sidenav-content[_ngcontent-%COMP%]{height:120%}"]}),t})();var w=c("M9IT"),x=c("Dh3D"),_=c("+0xr"),D=c("H0VJ");function I(t,e){1&t&&(s.fc(0,"th",19),s.Tc(1,"Action"),s.ec())}function M(t,e){if(1&t){const t=s.gc();s.fc(0,"button",23),s.fc(1,"mat-icon",24),s.nc("click",(function(){s.Kc(t);const e=s.rc().$implicit;return s.rc().editCommand(e)})),s.Tc(2,"edit"),s.ec(),s.ec()}}function P(t,e){if(1&t){const t=s.gc();s.fc(0,"button",25),s.fc(1,"mat-icon",24),s.nc("click",(function(){s.Kc(t);const e=s.rc().$implicit;return s.rc().deleteCommand(e)})),s.Tc(2,"delete_outline"),s.ec(),s.ec()}}function A(t,e){if(1&t&&(s.fc(0,"td",20),s.Sc(1,M,3,0,"button",21),s.Sc(2,P,3,0,"button",22),s.ec()),2&t){const t=s.rc();s.Ob(1),s.yc("ngIf",1==t.assigedRole.includes("command_edit")),s.Ob(1),s.yc("ngIf",1==t.assigedRole.includes("command_delete"))}}function N(t,e){1&t&&(s.fc(0,"th",26),s.Tc(1,"ID"),s.ec())}function q(t,e){if(1&t&&(s.fc(0,"td",20),s.Tc(1),s.ec()),2&t){const t=e.$implicit;s.Ob(1),s.Uc(t.id)}}function B(t,e){1&t&&(s.fc(0,"th",26),s.Tc(1,"Description"),s.ec())}function F(t,e){if(1&t&&(s.fc(0,"td",20),s.Tc(1),s.ec()),2&t){const t=e.$implicit;s.Ob(1),s.Uc(t.description)}}function R(t,e){1&t&&(s.fc(0,"th",26),s.Tc(1,"Type"),s.ec())}function Z(t,e){if(1&t&&(s.fc(0,"td",20),s.Tc(1),s.ec()),2&t){const t=e.$implicit;s.Ob(1),s.Uc(t.type)}}function z(t,e){1&t&&s.ac(0,"tr",27)}function V(t,e){1&t&&s.ac(0,"tr",28)}const j=function(){return[0]},G=function(){return[25,50,100]},J=[{path:"add",component:v,canActivate:[r.a],data:{roles:"command_add"}},{path:"list",component:(()=>{class t{constructor(t,e,c,o){this.commandService=t,this.snackBar=e,this.router=c,this.dialogService=o,this.assigedRole=[],this.show=!0,this.idColumn="id",this.dataSource=new _.k([]),this.states=[{id:0,value:"Inactive"},{id:1,value:"Active"}],this.displayedColumns=["action","id","name","identifier"],this.assigedRole=JSON.parse(sessionStorage.getItem("rolesData"))}ngOnInit(){this.getAllCommand()}getAllCommand(){this.commandService.getAllCommand().subscribe(t=>{this.commands=t,this.dataSource=new _.k(t),setTimeout(()=>this.dataSource.sort=this.sort),setTimeout(()=>this.dataSource.paginator=this.paginator)})}editCommand(t){this.router.navigate(["admin/commands/edit",t.id])}deleteCommand(t){this.dialogService.openConfirmDialog().afterClosed().subscribe(e=>{e&&(this.commandService.deleteCommand(t.id).subscribe(),this.deleteRowDataTable(t.id,this.idColumn,this.paginator,this.dataSource),this.openSnackBar())})}deleteRowDataTable(t,e,c,o){this.commands=o.data;const a=this.commands.findIndex(c=>c[e]===t);o.data.splice(a,1),o.paginator=c}openSnackBar(){this.snackBar.open("Deleted!!","Close",{duration:2e3,verticalPosition:"top",horizontalPosition:"end"})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase()}goAddItem(){this.router.navigate(["admin/traccar/commands/add"])}}return t.\u0275fac=function(e){return new(e||t)(s.Zb(m.a),s.Zb(d.a),s.Zb(i.c),s.Zb(D.a))},t.\u0275cmp=s.Tb({type:t,selectors:[["app-command-list"]],viewQuery:function(t,e){var c;1&t&&(s.Xc(x.a,!0),s.Xc(w.a,!0)),2&t&&(s.Fc(c=s.oc())&&(e.sort=c.first),s.Fc(c=s.oc())&&(e.paginator=c.first))},decls:29,vars:8,consts:[[1,"custom-style"],[1,"table-title"],[1,"search-div"],[1,"filter"],["matInput","","placeholder","search","autocomplete","off",3,"keyup"],["mat-button","",1,"mat-raised-button","mat-primary",3,"click"],["mat-button","",1,"add_button",3,"click"],["mat-table","","matTableExporter","","matSort","",1,"mat-elevation-z8",3,"dataSource","hiddenColumns"],["exporter","matTableExporter"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","identifier"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",4,"ngIf"],["mat-icon-button","","color","warn",4,"ngIf"],["mat-icon-button",""],[3,"click"],["mat-icon-button","","color","warn"],["mat-header-cell","","mat-sort-header",""],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"]],template:function(t,e){if(1&t){const t=s.gc();s.fc(0,"div",0),s.fc(1,"div",1),s.fc(2,"h3"),s.Tc(3,"Command Table"),s.ec(),s.ec(),s.fc(4,"div",2),s.fc(5,"mat-form-field",3),s.fc(6,"input",4),s.nc("keyup",(function(t){return e.applyFilter(t.target.value)})),s.ec(),s.ec(),s.fc(7,"button",5),s.nc("click",(function(){return s.Kc(t),s.Gc(13).exportTable("csv",{fileName:"command"})})),s.Tc(8," CSV "),s.ec(),s.fc(9,"button",6),s.nc("click",(function(){return e.goAddItem()})),s.fc(10,"mat-icon"),s.Tc(11,"add"),s.ec(),s.ec(),s.ec(),s.fc(12,"table",7,8),s.dc(14,9),s.Sc(15,I,2,0,"th",10),s.Sc(16,A,3,2,"td",11),s.cc(),s.dc(17,12),s.Sc(18,N,2,0,"th",13),s.Sc(19,q,2,1,"td",11),s.cc(),s.dc(20,14),s.Sc(21,B,2,0,"th",13),s.Sc(22,F,2,1,"td",11),s.cc(),s.dc(23,15),s.Sc(24,R,2,0,"th",13),s.Sc(25,Z,2,1,"td",11),s.cc(),s.Sc(26,z,1,0,"tr",16),s.Sc(27,V,1,0,"tr",17),s.ec(),s.ac(28,"mat-paginator",18),s.ec()}2&t&&(s.Ob(12),s.yc("dataSource",e.dataSource)("hiddenColumns",s.Bc(6,j)),s.Ob(14),s.yc("matHeaderRowDef",e.displayedColumns),s.Ob(1),s.yc("matRowDefColumns",e.displayedColumns),s.Ob(1),s.yc("pageSizeOptions",s.Bc(7,G))("pageSize",25))},directives:[u.c,f.b,b.b,C.a,_.j,n.a,x.a,_.c,_.e,_.b,_.g,_.i,w.a,_.d,_.a,o.m,x.b,_.f,_.h],styles:[".filter[_ngcontent-%COMP%]{width:15%;margin-right:50%}.add_button[_ngcontent-%COMP%]{width:10%;color:#fff;margin-left:10px!important;background-color:#00f}"]}),t})(),canActivate:[r.a],data:{roles:"command_list"}},{path:"edit/:id",component:T,canActivate:[r.a],data:{roles:"command_edit"}}];let U=(()=>{class t{}return t.\u0275mod=s.Xb({type:t}),t.\u0275inj=s.Wb({factory:function(e){return new(e||t)},imports:[[i.f.forChild(J)],i.f]}),t})();var X=c("jAig");let H=(()=>{class t{}return t.\u0275mod=s.Xb({type:t}),t.\u0275inj=s.Wb({factory:function(e){return new(e||t)},imports:[[o.c,U,X.a,a.s,a.i,n.b]]}),t})()}}]);