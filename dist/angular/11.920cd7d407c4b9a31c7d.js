(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{M9GK:function(t,e,i){!function(t,e,i){"use strict";var s="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",o=i.Task.extend({path:"findAddressCandidates",params:{outSr:4326,forStorage:!1,outFields:"*",maxLocations:20},setters:{address:"address",neighborhood:"neighborhood",city:"city",subregion:"subregion",region:"region",postal:"postal",country:"country",text:"singleLine",category:"category",token:"token",apikey:"apikey",key:"magicKey",fields:"outFields",forStorage:"forStorage",maxLocations:"maxLocations",countries:"sourceCountry"},initialize:function(t){(t=t||{}).url=t.url||s,i.Task.prototype.initialize.call(this,t)},within:function(t){return t=e.latLngBounds(t),this.params.searchExtent=i.Util.boundsToExtent(t),this},nearby:function(t,i){var s=e.latLng(t);return this.params.location=s.lng+","+s.lat,i&&(this.params.distance=Math.min(Math.max(i,2e3),5e4)),this},run:function(t,e){return this.options.token&&(this.params.token=this.options.token),this.options.apikey&&(this.params.token=this.options.apikey),this.options.customParam&&(this.params[this.options.customParam]=this.params.singleLine,delete this.params.singleLine),this.request((function(i,s){var o=i?void 0:(0,this._processGeocoderResponse)(s);t.call(e,i,{results:o},s)}),this)},_processGeocoderResponse:function(t){for(var s=[],o=0;o<t.candidates.length;o++){var r=t.candidates[o];if(r.extent)var n=i.Util.extentToBounds(r.extent);s.push({text:r.address,bounds:n,score:r.score,latlng:e.latLng(r.location.y,r.location.x),properties:r.attributes})}return s}});function r(t){return new o(t)}var n=i.Task.extend({path:"reverseGeocode",params:{outSR:4326,returnIntersection:!1},setters:{distance:"distance",language:"langCode",intersection:"returnIntersection"},initialize:function(t){(t=t||{}).url=t.url||s,i.Task.prototype.initialize.call(this,t)},latlng:function(t){var i=e.latLng(t);return this.params.location=i.lng+","+i.lat,this},run:function(t,i){return this.request((function(s,o){var r;r=s?void 0:{latlng:e.latLng(o.location.y,o.location.x),address:o.address},t.call(i,s,r,o)}),this)}});function a(t){return new n(t)}var c=i.Task.extend({path:"suggest",params:{},setters:{text:"text",category:"category",countries:"countryCode",maxSuggestions:"maxSuggestions"},initialize:function(t){(t=t||{}).url||(t.url=s,t.supportsSuggest=!0),i.Task.prototype.initialize.call(this,t)},within:function(t){var s=(t=e.latLngBounds(t)).getCenter(),o=t.getNorthWest();return this.params.location=s.lng+","+s.lat,this.params.distance=Math.min(Math.max(s.distanceTo(o),2e3),5e4),this.params.searchExtent=i.Util.boundsToExtent(t),this},nearby:function(t,i){var s=e.latLng(t);return this.params.location=s.lng+","+s.lat,i&&(this.params.distance=Math.min(Math.max(i,2e3),5e4)),this},run:function(t,e){if(this.options.supportsSuggest)return this.request((function(i,s){t.call(e,i,s,s)}),this);console.warn("this geocoding service does not support asking for suggestions")}});function l(t){return new c(t)}var u=i.Service.extend({initialize:function(t){(t=t||{}).apikey&&(t.token=t.apikey),t.url?(i.Service.prototype.initialize.call(this,t),this._confirmSuggestSupport()):(t.url=s,t.supportsSuggest=!0,i.Service.prototype.initialize.call(this,t))},geocode:function(){return r(this)},reverse:function(){return a(this)},suggest:function(){return l(this)},_confirmSuggestSupport:function(){this.metadata((function(t,e){t||(this.options.supportsSuggest=!!e.capabilities&&e.capabilities.indexOf("Suggest")>-1,this.options.customParam=e.singleLineAddressField.name)}),this)}}),h=e.Evented.extend({options:{zoomToResult:!0,useMapBounds:12,searchBounds:null},initialize:function(t,i){if(e.Util.setOptions(this,i),this._control=t,!i||!i.providers||!i.providers.length)throw new Error("You must specify at least one provider");this._providers=i.providers},_geocode:function(t,i,s){var o,r=0,n=[],a=e.Util.bind((function(e,i){r--,e||(i&&(n=n.concat(i)),r<=0&&(o=this._boundsFromResults(n),this.fire("results",{results:n,bounds:o,latlng:o?o.getCenter():void 0,text:t},!0),this.options.zoomToResult&&o&&this._control._map.fitBounds(o),this.fire("load")))}),this);if(i)r++,s.results(t,i,this._searchBounds(),a);else for(var c=0;c<this._providers.length;c++)r++,this._providers[c].results(t,i,this._searchBounds(),a)},_suggest:function(t){var i=this._providers.length,s=0,o=e.Util.bind((function(t,o){return e.Util.bind((function(e,r){if(i-=1,s+=r.length,e)return this._control._clearProviderSuggestions(o),void this._control._finalizeSuggestions(i,s);if(r.length)for(var n=0;n<r.length;n++)r[n].provider=o;else this._control._renderSuggestions(r);o._lastRender!==t&&this._control._clearProviderSuggestions(o),r.length&&this._control._input.value===t&&(o._lastRender=t,this._control._renderSuggestions(r)),this._control._finalizeSuggestions(i,s)}),this)}),this);this._pendingSuggestions=[];for(var r=0;r<this._providers.length;r++){var n=this._providers[r],a=n.suggestions(t,this._searchBounds(),o(t,n));this._pendingSuggestions.push(a)}},_searchBounds:function(){return null!==this.options.searchBounds?this.options.searchBounds:!1===this.options.useMapBounds?null:!0===this.options.useMapBounds||this.options.useMapBounds<=this._control._map.getZoom()?this._control._map.getBounds():null},_boundsFromResults:function(t){if(t.length){for(var i=e.latLngBounds([0,0],[0,0]),s=[],o=[],r=t.length-1;r>=0;r--){var n=t[r];o.push(n.latlng),n.bounds&&n.bounds.isValid()&&!n.bounds.equals(i)&&s.push(n.bounds)}for(var a=e.latLngBounds(o),c=0;c<s.length;c++)a.extend(s[c]);return a}},_getAttribution:function(){for(var t=[],e=this._providers,i=0;i<e.length;i++)e[i].options.attribution&&t.push(e[i].options.attribution);return t.join(", ")}});function p(t,e){return new h(t,e)}var d=u.extend({options:{label:"Places and Addresses",maxResults:5},suggestions:function(t,e,i){var s=this.suggest().text(t);return e&&s.within(e),this.options.nearby&&s.nearby(this.options.nearby),this.options.countries&&s.countries(this.options.countries),this.options.categories&&s.category(this.options.categories),s.maxSuggestions(this.options.maxResults),s.run((function(t,e,s){var o=[];if(!t)for(;s.suggestions.length&&o.length<=this.options.maxResults-1;){var r=s.suggestions.shift();r.isCollection||o.push({text:r.text,unformattedText:r.text,magicKey:r.magicKey})}i(t,o)}),this)},results:function(t,e,i,s){var o=this.geocode().text(t);return e&&o.key(e),o.maxLocations(this.options.maxResults),i&&o.within(i),this.options.forStorage&&o.forStorage(!0),this.options.nearby&&o.nearby(this.options.nearby),this.options.countries&&o.countries(this.options.countries),this.options.categories&&o.category(this.options.categories),o.run((function(t,e){s(t,e.results)}),this)}});function m(t){return new d(t)}var f=e.Control.extend({includes:e.Evented.prototype,options:{position:"topleft",collapseAfterResult:!0,expanded:!1,allowMultipleResults:!0,placeholder:"Search for places or addresses",title:"Location Search"},initialize:function(t){e.Util.setOptions(this,t),t&&t.providers&&t.providers.length||(t||(t={}),t.providers=[m()]),this._geosearchCore=p(this,t),this._geosearchCore._providers=t.providers,this._geosearchCore.addEventParent(this);for(var i=0;i<this._geosearchCore._providers.length;i++)this._geosearchCore._providers[i].addEventParent(this);this._geosearchCore._pendingSuggestions=[],e.Control.prototype.initialize.call(this,t)},_renderSuggestions:function(t){var i,s,o;t.length>0&&(this._suggestions.style.display="block");for(var r=[],n=0;n<t.length;n++){var a=t[n];if(!o&&this._geosearchCore._providers.length>1&&i!==a.provider.options.label&&((o=e.DomUtil.create("div","geocoder-control-header",a.provider._contentsElement)).textContent=a.provider.options.label,o.innerText=a.provider.options.label,i=a.provider.options.label),s||(s=e.DomUtil.create("ul","geocoder-control-list",a.provider._contentsElement)),-1===r.indexOf(a.text)){var c=e.DomUtil.create("li","geocoder-control-suggestion",s);c.innerHTML=a.text,c.provider=a.provider,c["data-magic-key"]=a.magicKey,c.unformattedText=a.unformattedText}else for(var l=0;l<s.childNodes.length;l++)s.childNodes[l].innerHTML===a.text&&(s.childNodes[l]["data-magic-key"]+=","+a.magicKey);r.push(a.text)}this.getPosition().indexOf("top")>-1&&(this._suggestions.style.maxHeight=this._map.getSize().y-this._suggestions.offsetTop-this._wrapper.offsetTop-10+"px"),this.getPosition().indexOf("bottom")>-1&&this._setSuggestionsBottomPosition()},_setSuggestionsBottomPosition:function(){this._suggestions.style.maxHeight=this._map.getSize().y-this._map._controlCorners[this.getPosition()].offsetHeight-this._wrapper.offsetHeight+"px",this._suggestions.style.top=-this._suggestions.offsetHeight-this._wrapper.offsetHeight+20+"px"},_boundsFromResults:function(t){if(t.length){for(var i=e.latLngBounds([0,0],[0,0]),s=[],o=[],r=t.length-1;r>=0;r--){var n=t[r];o.push(n.latlng),n.bounds&&n.bounds.isValid()&&!n.bounds.equals(i)&&s.push(n.bounds)}for(var a=e.latLngBounds(o),c=0;c<s.length;c++)a.extend(s[c]);return a}},clear:function(){this._clearAllSuggestions(),this.options.collapseAfterResult&&(this._input.value="",this._lastValue="",this._input.placeholder="",e.DomUtil.removeClass(this._wrapper,"geocoder-control-expanded")),!this._map.scrollWheelZoom.enabled()&&this._map.options.scrollWheelZoom&&this._map.scrollWheelZoom.enable()},_clearAllSuggestions:function(){this._suggestions.style.display="none";for(var t=0;t<this.options.providers.length;t++)this._clearProviderSuggestions(this.options.providers[t])},_clearProviderSuggestions:function(t){t._contentsElement.innerHTML=""},_finalizeSuggestions:function(t,i){t||(e.DomUtil.removeClass(this._input,"geocoder-control-loading"),this.getPosition().indexOf("bottom")>-1&&this._setSuggestionsBottomPosition(),i||this._clearAllSuggestions())},_setupClick:function(){e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded"),this._input.focus()},disable:function(){this._input.disabled=!0,e.DomUtil.addClass(this._input,"geocoder-control-input-disabled"),e.DomEvent.removeListener(this._wrapper,"click",this._setupClick,this)},enable:function(){this._input.disabled=!1,e.DomUtil.removeClass(this._input,"geocoder-control-input-disabled"),e.DomEvent.addListener(this._wrapper,"click",this._setupClick,this)},getAttribution:function(){for(var t=[],e=0;e<this._providers.length;e++)this._providers[e].options.attribution&&t.push(this._providers[e].options.attribution);return t.join(", ")},geocodeSuggestion:function(t){var e=t.target||t.srcElement;e.classList.contains("geocoder-control-suggestions")||e.classList.contains("geocoder-control-header")||(e.classList.length<1&&(e=e.parentNode),this._geosearchCore._geocode(e.unformattedText,e["data-magic-key"],e.provider),this.clear())},onAdd:function(t){i.Util.setEsriAttribution(t),this._map=t,this._wrapper=e.DomUtil.create("div","geocoder-control"),this._input=e.DomUtil.create("input","geocoder-control-input leaflet-bar",this._wrapper),this._input.title=this.options.title,this.options.expanded&&(e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded"),this._input.placeholder=this.options.placeholder),this._suggestions=e.DomUtil.create("div","geocoder-control-suggestions leaflet-bar",this._wrapper);for(var s=0;s<this.options.providers.length;s++)this.options.providers[s]._contentsElement=e.DomUtil.create("div",null,this._suggestions);var o=this._geosearchCore._getAttribution();return t.attributionControl&&t.attributionControl.addAttribution(o),e.DomEvent.addListener(this._input,"focus",(function(t){this._input.placeholder=this.options.placeholder,e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded")}),this),e.DomEvent.addListener(this._wrapper,"click",this._setupClick,this),e.DomEvent.addListener(this._suggestions,"mousedown",this.geocodeSuggestion,this),e.DomEvent.addListener(this._input,"blur",(function(t){this.clear()}),this),e.DomEvent.addListener(this._input,"keydown",(function(t){var i=(t.target||t.srcElement).value;e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded");for(var s,o=this._suggestions.querySelectorAll(".geocoder-control-suggestion"),r=this._suggestions.querySelectorAll(".geocoder-control-selected")[0],n=0;n<o.length;n++)if(o[n]===r){s=n;break}switch(t.keyCode){case 13:r?(this._input.value=r.innerText,this._geosearchCore._geocode(r.unformattedText,r["data-magic-key"],r.provider),this.clear()):this.options.allowMultipleResults&&i.length>=2?(this._geosearchCore._geocode(this._input.value,void 0),this.clear()):1===o.length?(e.DomUtil.addClass(o[0],"geocoder-control-selected"),this._geosearchCore._geocode(o[0].innerHTML,o[0]["data-magic-key"],o[0].provider)):(this.clear(),this._input.blur()),e.DomEvent.preventDefault(t);break;case 38:r&&e.DomUtil.removeClass(r,"geocoder-control-selected");var a=o[s-1];e.DomUtil.addClass(r&&a?a:o[o.length-1],"geocoder-control-selected"),e.DomEvent.preventDefault(t);break;case 40:r&&e.DomUtil.removeClass(r,"geocoder-control-selected");var c=o[s+1];e.DomUtil.addClass(r&&c?c:o[0],"geocoder-control-selected"),e.DomEvent.preventDefault(t);break;default:for(var l=0;l<this._geosearchCore._pendingSuggestions.length;l++){var u=this._geosearchCore._pendingSuggestions[l];u&&u.abort&&!u.id&&u.abort()}}}),this),e.DomEvent.addListener(this._input,"keyup",e.Util.throttle((function(t){var i=t.which||t.keyCode,s=(t.target||t.srcElement).value;if(s.length<2)return this._lastValue=this._input.value,this._clearAllSuggestions(),void e.DomUtil.removeClass(this._input,"geocoder-control-loading");27!==i?13!==i&&38!==i&&40!==i&&this._input.value!==this._lastValue&&(this._lastValue=this._input.value,e.DomUtil.addClass(this._input,"geocoder-control-loading"),this._geosearchCore._suggest(s)):this._clearAllSuggestions()}),50,this),this),e.DomEvent.disableClickPropagation(this._wrapper),e.DomEvent.addListener(this._suggestions,"mouseover",(function(e){t.scrollWheelZoom.enabled()&&t.options.scrollWheelZoom&&t.scrollWheelZoom.disable()})),e.DomEvent.addListener(this._suggestions,"mouseout",(function(e){!t.scrollWheelZoom.enabled()&&t.options.scrollWheelZoom&&t.scrollWheelZoom.enable()})),this._geosearchCore.on("load",(function(t){e.DomUtil.removeClass(this._input,"geocoder-control-loading"),this.clear(),this._input.blur()}),this),this._wrapper}}),g=i.FeatureLayerService.extend({options:{label:"Feature Layer",maxResults:5,bufferRadius:1e3,searchMode:"contain",formatSuggestion:function(t){return t.properties[this.options.searchFields[0]]}},initialize:function(t){t.apikey&&(t.token=t.apikey),i.FeatureLayerService.prototype.initialize.call(this,t),"string"==typeof this.options.searchFields&&(this.options.searchFields=[this.options.searchFields]),this._suggestionsQuery=this.query(),this._resultsQuery=this.query()},suggestions:function(t,e,i){var s=this._suggestionsQuery.where(this._buildQuery(t)).returnGeometry(!1);return e&&s.intersects(e),this.options.idField&&s.fields([this.options.idField].concat(this.options.searchFields)),s.run((function(t,e,s){if(t)i(t,[]);else{this.options.idField=s.objectIdFieldName;for(var o=[],r=e.features.length-1;r>=0;r--){var n=e.features[r];o.push({text:this.options.formatSuggestion.call(this,n),unformattedText:n.properties[this.options.searchFields[0]],magicKey:n.id})}i(t,o.slice(0,this.options.maxResults))}}),this)},results:function(t,i,s,o){var r=this._resultsQuery;return i?(delete r.params.where,r.featureIds([i])):r.where(this._buildQuery(t)),s&&r.within(s),r.run(e.Util.bind((function(t,e){for(var i=[],s=0;s<e.features.length;s++){var r=e.features[s];if(r){var n=this._featureBounds(r),a={latlng:n.getCenter(),bounds:n,text:this.options.formatSuggestion.call(this,r),properties:r.properties,geojson:r};i.push(a),delete this._resultsQuery.params.objectIds}}o(t,i)}),this))},orderBy:function(t,e){this._suggestionsQuery.orderBy(t,e)},_buildQuery:function(t){for(var e=[],i=this.options.searchFields.length-1;i>=0;i--){var s='upper("'+this.options.searchFields[i]+'")';if("contain"===this.options.searchMode)e.push(s+" LIKE upper('%"+t+"%')");else if("startWith"===this.options.searchMode)e.push(s+" LIKE upper('"+t+"%')");else if("endWith"===this.options.searchMode)e.push(s+" LIKE upper('%"+t+"')");else{if("strict"!==this.options.searchMode)throw new Error('L.esri.Geocoding.featureLayerProvider: Invalid parameter for "searchMode". Use one of "contain", "startWith", "endWith", or "strict"');e.push(s+" LIKE upper('"+t+"')")}}return this.options.where?this.options.where+" AND ("+e.join(" OR ")+")":e.join(" OR ")},_featureBounds:function(t){var i=e.geoJson(t);if("Point"===t.geometry.type){var s=i.getBounds().getCenter(),o=this.options.bufferRadius/40075017*360/Math.cos(180/Math.PI*s.lat),r=this.options.bufferRadius/40075017*360;return e.latLngBounds([s.lat-r,s.lng-o],[s.lat+r,s.lng+o])}return i.getBounds()}}),v=i.MapService.extend({options:{layers:[0],label:"Map Service",bufferRadius:1e3,maxResults:5,formatSuggestion:function(t){return t.properties[t.displayFieldName]+" <small>"+t.layerName+"</small>"}},initialize:function(t){t.apikey&&(t.token=t.apikey),i.MapService.prototype.initialize.call(this,t),this._getIdFields()},suggestions:function(t,e,i){return this.find().text(t).fields(this.options.searchFields).returnGeometry(!1).layers(this.options.layers).run((function(t,e,s){var o=[];if(!t){var r=Math.min(this.options.maxResults,e.features.length);s.results=s.results.reverse();for(var n=0;n<r;n++){var a=e.features[n],c=s.results[n],l=c.layerId,u=this._idFields[l];a.layerId=l,a.layerName=this._layerNames[l],a.displayFieldName=this._displayFields[l],u&&o.push({text:this.options.formatSuggestion.call(this,a),unformattedText:a.properties[a.displayFieldName],magicKey:c.attributes[u]+":"+l})}}i(t,o.reverse())}),this)},results:function(t,e,i,s){var o,r=[];if(e&&!e.includes(",")){var n=e.split(":")[0],a=e.split(":")[1];o=this.query().layer(a).featureIds(n)}else o=this.find().text(t).fields(this.options.searchFields).layers(this.options.layers);return o.run((function(t,e,i){if(!t){i.results&&(i.results=i.results.reverse());for(var o=0;o<e.features.length;o++){var n=e.features[o];if(a=a||i.results[o].layerId,n&&void 0!==a){var c=this._featureBounds(n);n.layerId=a,n.layerName=this._layerNames[a],n.displayFieldName=this._displayFields[a];var l={latlng:c.getCenter(),bounds:c,text:this.options.formatSuggestion.call(this,n),properties:n.properties,geojson:n};r.push(l)}}}s(t,r.reverse())}),this)},_featureBounds:function(t){var i=e.geoJson(t);if("Point"===t.geometry.type){var s=i.getBounds().getCenter(),o=this.options.bufferRadius/40075017*360/Math.cos(180/Math.PI*s.lat),r=this.options.bufferRadius/40075017*360;return e.latLngBounds([s.lat-r,s.lng-o],[s.lat+r,s.lng+o])}return i.getBounds()},_layerMetadataCallback:function(t){return e.Util.bind((function(e,i){if(!e){this._displayFields[t]=i.displayField,this._layerNames[t]=i.name;for(var s=0;s<i.fields.length;s++){var o=i.fields[s];if("esriFieldTypeOID"===o.type){this._idFields[t]=o.name;break}}}}),this)},_getIdFields:function(){this._idFields={},this._displayFields={},this._layerNames={};for(var t=0;t<this.options.layers.length;t++){var e=this.options.layers[t];this.get(e,{},this._layerMetadataCallback(e))}}}),y=u.extend({options:{label:"Geocode Server",maxResults:5},suggestions:function(t,e,i){if(this.options.supportsSuggest){var s=this.suggest().text(t);return e&&s.within(e),s.run((function(t,e,s){var o=[];if(!t)for(;s.suggestions.length&&o.length<=this.options.maxResults-1;){var r=s.suggestions.shift();r.isCollection||o.push({text:r.text,unformattedText:r.text,magicKey:r.magicKey})}i(t,o)}),this)}return i(void 0,[]),!1},results:function(t,e,i,s){var o=this.geocode().text(t);return e&&o.key(e),o.maxLocations(this.options.maxResults),i&&o.within(i),o.run((function(t,e){s(t,e.results)}),this)}});t.ArcgisOnlineProvider=d,t.FeatureLayerProvider=g,t.Geocode=o,t.GeocodeService=u,t.GeocodeServiceProvider=y,t.Geosearch=f,t.GeosearchCore=h,t.MapServiceProvider=v,t.ReverseGeocode=n,t.Suggest=c,t.VERSION="3.1.1",t.WorldGeocodingServiceUrl=s,t.arcgisOnlineProvider=m,t.featureLayerProvider=function(t){return new g(t)},t.geocode=r,t.geocodeService=function(t){return new u(t)},t.geocodeServiceProvider=function(t){return new y(t)},t.geosearch=function(t){return new f(t)},t.geosearchCore=p,t.mapServiceProvider=function(t){return new v(t)},t.reverseGeocode=a,t.suggest=l,Object.defineProperty(t,"__esModule",{value:!0})}(e,i("4R65"),i("MCPi"))},MCPi:function(t,e,i){"use strict";i.r(e),i.d(e,"VERSION",(function(){return Rt})),i.d(e,"Support",(function(){return n})),i.d(e,"options",(function(){return a})),i.d(e,"Util",(function(){return N})),i.d(e,"get",(function(){return g})),i.d(e,"post",(function(){return p})),i.d(e,"request",(function(){return m})),i.d(e,"Task",(function(){return Q})),i.d(e,"task",(function(){return W})),i.d(e,"Query",(function(){return J})),i.d(e,"query",(function(){return H})),i.d(e,"Find",(function(){return V})),i.d(e,"find",(function(){return X})),i.d(e,"Identify",(function(){return $})),i.d(e,"identify",(function(){return tt})),i.d(e,"IdentifyFeatures",(function(){return et})),i.d(e,"identifyFeatures",(function(){return it})),i.d(e,"IdentifyImage",(function(){return ot})),i.d(e,"identifyImage",(function(){return rt})),i.d(e,"Service",(function(){return at})),i.d(e,"service",(function(){return ct})),i.d(e,"MapService",(function(){return lt})),i.d(e,"mapService",(function(){return ut})),i.d(e,"ImageService",(function(){return pt})),i.d(e,"imageService",(function(){return dt})),i.d(e,"FeatureLayerService",(function(){return ft})),i.d(e,"featureLayerService",(function(){return gt})),i.d(e,"BasemapLayer",(function(){return _t})),i.d(e,"basemapLayer",(function(){return bt})),i.d(e,"TiledMapLayer",(function(){return xt})),i.d(e,"tiledMapLayer",(function(){return St})),i.d(e,"RasterLayer",(function(){return wt})),i.d(e,"ImageMapLayer",(function(){return Lt})),i.d(e,"imageMapLayer",(function(){return Ot})),i.d(e,"DynamicMapLayer",(function(){return Tt})),i.d(e,"dynamicMapLayer",(function(){return kt})),i.d(e,"FeatureManager",(function(){return Mt})),i.d(e,"FeatureLayer",(function(){return Dt})),i.d(e,"featureLayer",(function(){return Ft}));var s=i("aAg2"),o=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,r=""===document.documentElement.style.pointerEvents,n={cors:o,pointerEvents:r},a={attributionWidthOffset:55},c=i("4R65"),l=0;function u(t){var e="";for(var i in t.f=t.f||"json",t)if(t.hasOwnProperty(i)){var s,o=t[i],r=Object.prototype.toString.call(o);e.length&&(e+="&"),s="[object Array]"===r?"[object Object]"===Object.prototype.toString.call(o[0])?JSON.stringify(o):o.join(","):"[object Object]"===r?JSON.stringify(o):"[object Date]"===r?o.valueOf():o,e+=encodeURIComponent(i)+"="+encodeURIComponent(s)}return e}function h(t,e){var i=new window.XMLHttpRequest;return i.onerror=function(s){i.onreadystatechange=c.Util.falseFn,t.call(e,{error:{code:500,message:"XMLHttpRequest error"}},null)},i.onreadystatechange=function(){var s,o;if(4===i.readyState){try{s=JSON.parse(i.responseText)}catch(r){s=null,o={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!o&&s.error&&(o=s.error,s=null),i.onerror=c.Util.falseFn,t.call(e,o,s)}},i.ontimeout=function(){this.onerror()},i}function p(t,e,i,s){var o=h(i,s);return o.open("POST",t),null!=s&&void 0!==s.options&&(o.timeout=s.options.timeout),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send(u(e)),o}function d(t,e,i,s){var o=h(i,s);return o.open("GET",t+"?"+u(e),!0),null!=s&&void 0!==s.options&&(o.timeout=s.options.timeout,s.options.withCredentials&&(o.withCredentials=!0)),o.send(null),o}function m(t,e,i,s){var o=u(e),r=h(i,s),a=(t+"?"+o).length;if(a<=2e3&&n.cors?r.open("GET",t+"?"+o):a>2e3&&n.cors&&(r.open("POST",t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=s&&void 0!==s.options&&(r.timeout=s.options.timeout,s.options.withCredentials&&(r.withCredentials=!0)),a<=2e3&&n.cors)r.send(null);else{if(!(a>2e3&&n.cors))return a<=2e3&&!n.cors?f(t,e,i,s):void v("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");r.send(o)}return r}function f(t,e,i,s){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var o="c"+l;e.callback="window._EsriLeafletCallbacks."+o,window._EsriLeafletCallbacks[o]=function(t){if(!0!==window._EsriLeafletCallbacks[o]){var e,r=Object.prototype.toString.call(t);"[object Object]"!==r&&"[object Array]"!==r&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),i.call(s,e,t),window._EsriLeafletCallbacks[o]=!0}};var r=c.DomUtil.create("script",null,document.body);return r.type="text/javascript",r.src=t+"?"+u(e),r.id=o,r.onerror=function(t){t&&!0!==window._EsriLeafletCallbacks[o]&&(i.call(s,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[o]=!0)},c.DomUtil.addClass(r,"esri-leaflet-jsonp"),l++,{id:o,url:r.src,abort:function(){window._EsriLeafletCallbacks._callback[o]({code:0,message:"Request aborted."})}}}var g=n.cors?d:f;function v(){console&&console.warn&&console.warn.apply(console,arguments)}g.CORS=d,g.JSONP=f;var y={request:m,get:g,post:p},_=function(t,e,i,s){var o=(s[1]-i[1])*(e[0]-t[0])-(s[0]-i[0])*(e[1]-t[1]);if(0!==o){var r=((s[0]-i[0])*(t[1]-i[1])-(s[1]-i[1])*(t[0]-i[0]))/o,n=((e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]))/o;if(r>=0&&r<=1&&n>=0&&n<=1)return!0}return!1},b=function(t,e){for(var i=0;i<t.length-1;i++)for(var s=0;s<e.length-1;s++)if(_(t[i],t[i+1],e[s],e[s+1]))return!0;return!1},x=function(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t},S=function(t){for(var e,i=0,s=0,o=t.length,r=t[s];s<o-1;s++)i+=((e=t[s+1])[0]-r[0])*(e[1]+r[1]),r=e;return i>=0},C=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},w=function(t,e){var i=b(t,e),s=function(t,e){for(var i=!1,s=-1,o=t.length,r=o-1;++s<o;r=s)(t[s][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[s][1])&&e[0]<(t[r][0]-t[s][0])*(e[1]-t[s][1])/(t[r][1]-t[s][1])+t[s][0]&&(i=!i);return i}(t,e[0]);return!(i||!s)},L=function(t){var e=[],i=t.slice(0),s=x(i.shift().slice(0));if(s.length>=4){S(s)||s.reverse(),e.push(s);for(var o=0;o<i.length;o++){var r=x(i[o].slice(0));r.length>=4&&(S(r)&&r.reverse(),e.push(r))}}return e};function O(t,e){return function t(e,i){i=i||"OBJECTID";var s,o={wkid:4326},r={};switch(e.type){case"Point":r.x=e.coordinates[0],r.y=e.coordinates[1],e.coordinates[2]&&(r.z=e.coordinates[2]),r.spatialReference=o;break;case"MultiPoint":r.points=e.coordinates.slice(0),e.coordinates[0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"LineString":r.paths=[e.coordinates.slice(0)],e.coordinates[0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"MultiLineString":r.paths=e.coordinates.slice(0),e.coordinates[0][0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"Polygon":r.rings=L(e.coordinates.slice(0)),e.coordinates[0][0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"MultiPolygon":r.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var s=L(t[i]),o=s.length-1;o>=0;o--){var r=s[o].slice(0);e.push(r)}return e}(e.coordinates.slice(0)),e.coordinates[0][0][0][2]&&(r.hasZ=!0),r.spatialReference=o;break;case"Feature":e.geometry&&(r.geometry=t(e.geometry,i)),r.attributes=e.properties?C(e.properties):{},e.id&&(r.attributes[i]=e.id);break;case"FeatureCollection":for(r=[],s=0;s<e.features.length;s++)r.push(t(e.features[s],i));break;case"GeometryCollection":for(r=[],s=0;s<e.geometries.length;s++)r.push(t(e.geometries[s],i))}return r}(t,e)}function T(t,e){return function t(e,i){var s={};if(e.features){s.type="FeatureCollection",s.features=[];for(var o=0;o<e.features.length;o++)s.features.push(t(e.features[o],i))}if("number"==typeof e.x&&"number"==typeof e.y&&(s.type="Point",s.coordinates=[e.x,e.y],"number"==typeof e.z&&s.coordinates.push(e.z)),e.points&&(s.type="MultiPoint",s.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(s.type="LineString",s.coordinates=e.paths[0].slice(0)):(s.type="MultiLineString",s.coordinates=e.paths.slice(0))),e.rings&&(s=function(t){for(var e,i,s=[],o=[],r=0;r<t.length;r++){var n=x(t[r].slice(0));if(!(n.length<4))if(S(n)){var a=[n.slice().reverse()];s.push(a)}else o.push(n.slice().reverse())}for(var c=[];o.length;){i=o.pop();var l=!1;for(e=s.length-1;e>=0;e--)if(w(s[e][0],i)){s[e].push(i),l=!0;break}l||c.push(i)}for(;c.length;){i=c.pop();var u=!1;for(e=s.length-1;e>=0;e--)if(b(s[e][0],i)){s[e].push(i),u=!0;break}u||s.push([i.reverse()])}return 1===s.length?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(s.type="Polygon",s.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(s.type="Feature",s.geometry=e.geometry?t(e.geometry):null,s.properties=e.attributes?C(e.attributes):null,e.attributes))try{s.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],s=0;s<i.length;s++){var o=i[s];if(o in t&&("string"==typeof t[o]||"number"==typeof t[o]))return t[o]}throw Error("No valid id attribute found")}(e.attributes,i)}catch(r){}return JSON.stringify(s.geometry)===JSON.stringify({})&&(s.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),s}(t,e)}function k(t){if("NaN"!==t.xmin&&"NaN"!==t.ymin&&"NaN"!==t.xmax&&"NaN"!==t.ymax){var e=Object(c.latLng)(t.ymin,t.xmin),i=Object(c.latLng)(t.ymax,t.xmax);return Object(c.latLngBounds)(e,i)}return null}function P(t){return{xmin:(t=Object(c.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var I=/^(OBJECTID|FID|OID|ID)$/i;function A(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(I)){e=t.fields[i].name;break}}return e}function M(t){for(var e in t.attributes)if(e.match(I))return e}function D(t,e){var i,s=t.features||t.results,o=s&&s.length;i=e||A(t);var r={type:"FeatureCollection",features:[]};if(o)for(var n=s.length-1;n>=0;n--){var a=T(s[n],i||M(s[n]));r.features.push(a)}return r}function F(t){return"/"!==(t=c.Util.trim(t))[t.length-1]&&(t+="/"),t}function R(t){if(-1!==t.url.indexOf("?")){t.requestParams=t.requestParams||{};var e=t.url.substring(t.url.indexOf("?")+1);t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return t.url=F(t.url.split("?")[0]),t}function E(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function U(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function B(t){return t.getSize().x-a.attributionWidthOffset+"px"}function G(t){if(t.attributionControl){if(t.attributionControl._esriAttributionLayerCount||(t.attributionControl._esriAttributionLayerCount=0),0===t.attributionControl._esriAttributionLayerCount){if(!t.attributionControl._esriAttributionAddedOnce){var e=document.createElement("style");e.type="text/css",e.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(e);var i=document.createElement("style");i.type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+B(t)+";}",document.getElementsByTagName("head")[0].appendChild(i),t.on("resize",(function(e){t.attributionControl&&(t.attributionControl._container.style.maxWidth=B(e.target))})),t.attributionControl._esriAttributionAddedOnce=!0}t.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>'),c.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution:hover"),c.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution")}t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount+1}}function z(t){t.attributionControl&&(t.attributionControl._esriAttributionLayerCount&&1===t.attributionControl._esriAttributionLayerCount&&(t.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'),c.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution:hover"),c.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution")),t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount-1)}function Z(t){var e={geometry:null,geometryType:null};return t instanceof c.LatLngBounds?(e.geometry=P(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof c.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof c.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=O(t),e.geometryType=U(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=O(t),e.geometryType=U(t.type),e):void v("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function j(t,e){n.cors&&m(t,{},c.Util.bind((function(t,i){if(!t){e._esriAttributions=[];for(var s=0;s<i.contributors.length;s++)for(var o=i.contributors[s],r=0;r<o.coverageAreas.length;r++){var n=o.coverageAreas[r],a=Object(c.latLng)(n.bbox[0],n.bbox[1]),l=Object(c.latLng)(n.bbox[2],n.bbox[3]);e._esriAttributions.push({attribution:o.attribution,score:n.score,bounds:Object(c.latLngBounds)(a,l),minZoom:n.zoomMin,maxZoom:n.zoomMax})}e._esriAttributions.sort((function(t,e){return e.score-t.score})),q({target:e})}}),this))}function q(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var s=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(s&&i){for(var o="",r=e.getBounds(),n=Object(c.latLngBounds)(r.getSouthWest().wrap(),r.getNorthEast().wrap()),a=e.getZoom(),l=0;l<i.length;l++){var u=i[l],h=u.attribution;!o.match(h)&&u.bounds.intersects(n)&&a>=u.minZoom&&a<=u.maxZoom&&(o+=", "+h)}o=o.substr(2),s.innerHTML=o,s.style.maxWidth=B(e),e.fire("attributionupdated",{attribution:o})}}}var N={warn:v,cleanUrl:F,getUrlParams:R,isArcgisOnline:E,geojsonTypeToArcGIS:U,responseToFeatureCollection:D,geojsonToArcGIS:O,arcgisToGeoJSON:T,boundsToExtent:P,extentToBounds:k,calcAttributionWidth:B,setEsriAttribution:G,_setGeometry:Z,_getAttributionData:j,_updateMapAttribution:q,_findIdAttributeFromFeature:M,_findIdAttributeFromResponse:A},Q=c.Class.extend({options:{proxy:!1,useCors:o},generateSetter:function(t,e){return c.Util.bind((function(e){return this.params[t]=e,this}),e)},initialize:function(t){if(t.request&&t.options?(this._service=t,c.Util.setOptions(this,t.options)):(c.Util.setOptions(this,t),this.options.url=F(t.url)),this.params=c.Util.extend({},this.params||{}),this.setters)for(var e in this.setters)this[e]=this.generateSetter(this.setters[e],this)},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},apikey:function(t){return this.token(t)},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&c.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,s,o){var r=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?y[t](r,i,s,o):y.get.JSONP(r,i,s,o)}});function W(t){return t=R(t),new Q(t)}var J=Q.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=Object(c.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSR=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(t,e){return this._cleanParams(),this.options.isModern||E(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request((function(i,s){this._trapSQLerrors(i),t.call(e,i,s,s)}),this)):this.request((function(i,s){this._trapSQLerrors(i),t.call(e,i,s&&D(s),s)}),this)},count:function(t,e){return this._cleanParams(),this.params.returnCountOnly=!0,this.request((function(e,i){t.call(this,e,i&&i.count,i)}),e)},ids:function(t,e){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request((function(e,i){t.call(this,e,i&&i.objectIds,i)}),e)},bounds:function(t,e){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request((function(i,s){s&&s.extent&&k(s.extent)?t.call(e,i,k(s.extent),s):t.call(e,i={message:"Invalid Bounds"},null,s)}),e)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){var e=Object(c.point)(t);return this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&v("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSR=4326;var e=Z(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});function H(t){return new J(t)}var K=H,V=Q.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(t,e){return this.request((function(i,s){t.call(e,i,s&&D(s),s)}),e)}});function X(t){return new V(t)}var Y=X,$=Q.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});function tt(t){return new $(t)}var et=$.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=P(t.getBounds()),i=t.getSize();return this.params.imageDisplay=[i.x,i.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=Object(c.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(t,e){return this.request((function(i,s){if(i)t.call(e,i,void 0,s);else{var o=D(s);s.results=s.results.reverse();for(var r=0;r<o.features.length;r++)o.features[r].layerId=s.results[r].layerId;t.call(e,void 0,o,s)}}))},_setGeometryParams:function(t){var e=Z(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});function it(t){return new et(t)}var st=it,ot=$.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=Object(c.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(t,e){return this.request((function(i,s){t.call(e,i,s&&this._responseToGeoJSON(s),s)}),this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,s=t.catalogItemVisibilities,o={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(o.pixel.properties.values=t.properties.Values),i&&i.features&&(o.catalogItems=D(i),s&&s.length===o.catalogItems.features.length))for(var r=s.length-1;r>=0;r--)o.catalogItems.features[r].properties.catalogItemVisibility=s[r];return o}});function rt(t){return new ot(t)}var nt=rt,at=c.Evented.extend({options:{proxy:!1,useCors:o,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,c.Util.setOptions(this,t),this.options.url=F(this.options.url)},get:function(t,e,i,s){return this._request("get",t,e,i,s)},post:function(t,e,i,s){return this._request("post",t,e,i,s)},request:function(t,e,i,s){return this._request("request",t,e,i,s)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,s,o){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var r=this._createServiceCallback(t,e,i,s,o);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&c.Util.extend(i,this.options.requestParams),!this._authenticating){var n=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?y[t](n,i,r,o):y.get.JSONP(n,i,r,o)}this._requestQueue.push([t,e,i,s,o])},_createServiceCallback:function(t,e,i,s,o){return c.Util.bind((function(r,n){!r||499!==r.code&&498!==r.code||(this._authenticating=!0,this._requestQueue.push([t,e,i,s,o]),this.fire("authenticationrequired",{authenticate:c.Util.bind(this.authenticate,this)},!0),r.authenticate=c.Util.bind(this.authenticate,this)),s.call(o,r,n),r?this.fire("requesterror",{url:this.options.url+e,params:i,message:r.message,code:r.code,method:t},!0):this.fire("requestsuccess",{url:this.options.url+e,params:i,response:n,method:t},!0),this.fire("requestend",{url:this.options.url+e,params:i,method:t},!0)}),this)},_runQueue:function(){for(var t=this._requestQueue.length-1;t>=0;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});function ct(t){return t=R(t),new at(t)}var lt=at.extend({identify:function(){return st(this)},find:function(){return Y(this)},query:function(){return K(this)}});function ut(t){return new lt(t)}var ht=ut,pt=at.extend({query:function(){return K(this)},identify:function(){return nt(this)}});function dt(t){return new pt(t)}var mt=dt,ft=at.extend({options:{idAttribute:"OBJECTID"},query:function(){return K(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,e,i){for(var s=t.features?t.features:[t],o=s.length-1;o>=0;o--)delete s[o].id;return t=O(t),this.post("addFeatures",{features:t=s.length>1?t:[t]},(function(t,s){e&&e.call(i,t||s.addResults[0].error,s&&s.addResults?s.addResults.length>1?s.addResults:s.addResults[0]:void 0)}),i)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,e,i){var s=t.features?t.features:[t];return t=O(t,this.options.idAttribute),this.post("updateFeatures",{features:t=s.length>1?t:[t]},(function(t,s){e&&e.call(i,t||s.updateResults[0].error,s&&s.updateResults?s.updateResults.length>1?s.updateResults:s.updateResults[0]:void 0)}),i)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,e,i){return this.post("deleteFeatures",{objectIds:t},(function(t,s){e&&e.call(i,t||s.deleteResults[0].error,s&&s.deleteResults?s.deleteResults.length>1?s.deleteResults:s.deleteResults[0]:void 0)}),i)}});function gt(t){return new ft(t)}var vt=gt,yt="https:"!==window.location.protocol?"http:":"https:",_t=c.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:yt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:yt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:r?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:yt+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:yt+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:yt+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:yt+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!_t.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=_t.TILES[t]}var s=c.Util.extend(i.options,e);c.Util.setOptions(this,s),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),c.TileLayer.prototype.initialize.call(this,i.urlTemplate,s)},onAdd:function(t){G(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&j((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",q),c.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){z(t),t.off("moveend",q),c.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var t=this._map.createPane(this.options.pane);t.style.pointerEvents="none",t.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return t}});function bt(t,e){return new _t(t,e)}var xt=c.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=R(t=c.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&Object.keys(t.requestParams).length>0?c.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=ht(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),c.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return c.Util.template(this.tileUrl,c.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return c.DomEvent.on(i,"load",c.Util.bind(this._tileOnLoad,this,e,i)),c.DomEvent.on(i,"error",c.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",(function(){i.src=this.getTileUrl(t)}),this),i},onAdd:function(t){G(t),this._lodMap||this.metadata((function(e,i){if(!e&&i.spatialReference){var s=i.spatialReference.latestWkid||i.spatialReference.wkid;if(!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution())),t.options.crs!==c.CRS.EPSG3857||102100!==s&&3857!==s)t.options.crs&&t.options.crs.code&&t.options.crs.code.indexOf(s)>-1||v("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var o=i.tileInfo.lods,r=xt.MercatorZoomLevels,n=0;n<o.length;n++){var a=o[n];for(var l in r)if(this._withinPercentage(a.resolution,r[l],this.options.zoomOffsetAllowance)){this._lodMap[l]=a.level;break}}this.fire("lodmap")}}}),this),c.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){z(t),c.TileLayer.prototype.onRemove.call(this,t)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});function St(t,e){return new xt(t,e)}var Ct=c.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,c.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===c.CRS.EPSG3857?c.ImageOverlay.prototype._reset.call(this):c.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),wt=c.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:o,attribution:null,interactive:!1,alt:""},onAdd:function(t){G(t),this.options.zIndex&&(this.options.position=null),this._update=c.Util.throttle(this._update,this.options.updateInterval,this),t.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata((function(e,i){!e&&!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}),this)},onRemove:function(t){z(t),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=Object(c.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,s=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._currentImage._image&&e&&(s=t(s,+e));isFinite(s)&&(this.options.zIndex=s+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,e,i){if(this._map){if(i&&(t="data:"+i+";base64,"+t),!t)return;var s=new Ct(t,e,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),o=function(t){if(s.off("error",o,this),this._map){var i=t.target,r=this._currentImage;i._bounds.equals(e)&&i._bounds.equals(this._map.getBounds())?(this._currentImage=i,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),r&&this._map&&this._map.removeLayer(r),r&&r._map&&r._map.removeLayer(r)):this._map.removeLayer(i)}this.fire("load",{bounds:e})};s.once("error",(function(){this._map.removeLayer(s),this.fire("error"),s.off("load",o,this)}),this),s.once("load",o,this)}},_update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))if(t>this.options.maxZoom||t<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var i=this._buildExportParams();c.Util.extend(i,this.options.requestParams),i?(this._requestExport(i,e),this.fire("loading",{bounds:e})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(t,e,i,s){if(t=Object(c.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var o=this._popupFunction(e,i,s);o&&this._popup.setLatLng(t).setContent(o).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),i=this._map.unproject(t.getTopRight()),s=this._map.options.crs.project(i),o=this._map.options.crs.project(e),r=Object(c.bounds)(s,o);return[r.getBottomLeft().x,r.getBottomLeft().y,r.getTopRight().x,r.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),s=this._map.unproject(t.getTopRight()),o=this._map.latLngToLayerPoint(s).y,r=this._map.latLngToLayerPoint(i).y;return(o>0||r<e.y)&&(e.y=r-o),e.x+","+e.y}}),Lt=wt.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=R(t),this.service=mt(t),this.service.addEventParent(this),c.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return this.options.bandIds=c.Util.isArray(t)?t.join(","):t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return this.options.noData=c.Util.isArray(t)?t.join(","):t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(t){var e=c.Util.bind((function(e,i,s){e||setTimeout(c.Util.bind((function(){this._renderPopup(t.latlng,e,i,s)}),this),300)}),this),i=this.identify().at(t.latlng);this.options.mosaicRule&&i.setMosaicRule(this.options.mosaicRule),i.run(e),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(e.token=this.service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("exportImage",t,(function(t,i){t||(this.options.token&&(i.href+="?token="+this.options.token),this.options.proxy&&(i.href=this.options.proxy+"?"+i.href),this._renderImage(i.href,e))}),this);else{t.f="image";var i=this.options.url+"exportImage"+c.Util.getParamString(t);this.options.proxy&&(i=this.options.proxy+"?"+i),this._renderImage(i,e)}}});function Ot(t,e){return new Lt(t,e)}var Tt=wt.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=R(t),this.service=ht(t),this.service.addEventParent(this),c.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(t){var e,i=c.Util.bind((function(e,i,s){e||setTimeout(c.Util.bind((function(){this._renderPopup(t.latlng,e,i,s)}),this),300)}),this);if((e=this.options.popup?this.options.popup.on(this._map).at(t.latlng):this.identify().on(this._map).at(t.latlng)).params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||e.layers(this.options.layers?"visible:"+this.options.layers.join(","):"visible"),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!e.params.layerDefs)for(var s in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(s)&&e.layerDef(s,this.options.layerDefs[s]);e.run(i),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(e.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;e.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(e.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(e.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(e.token=this.service.options.token),this.options.proxy&&(e.proxy=this.options.proxy),this.options.disableCache&&(e._ts=Date.now()),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("export",t,(function(t,i){t||(this.options.token&&i.href&&(i.href+="?token="+this.options.token),this.options.proxy&&i.href&&(i.href=this.options.proxy+"?"+i.href),i.href?this._renderImage(i.href,e):this._renderImage(i.imageData,e,i.contentType))}),this);else{t.f="image";var i=this.options.url+"export"+c.Util.getParamString(t);this.options.proxy&&(i=this.options.proxy+"?"+i),this._renderImage(i,e)}}});function kt(t,e){return new Tt(t,e)}var Pt=c.Layer.extend({options:{cellSize:512,updateWhenIdle:c.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){c.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof c.Point?t:new c.Point(t,t)},_pruneCells:function(){if(this._map){var t,e;for(t in this._cells)(e=this._cells[t]).retain=e.current;for(t in this._cells)if((e=this._cells[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,i,s){var o=Math.floor(t/2),r=Math.floor(e/2),n=i-1,a=new c.Point(+o,+r);a.z=+n;var l=this._cellCoordsToKey(a),u=this._cells[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),n>s&&this._retainParent(o,r,n,s))},_retainChildren:function(t,e,i,s){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var n=new c.Point(o,r);n.z=i+1;var a=this._cellCoordsToKey(n),l=this._cells[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<s&&this._retainChildren(o,r,i+1,s))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);e||this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_setView:function(t,e,i,s){var o=Math.round(e);s||(this._cellZoom=o,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneCells(),this._noPrune=!!i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._cellSize=this.getCellSize(),s=this._cellZoom,o=this._map.getPixelWorldBounds(this._cellZoom);o&&(this._globalCellRange=this._pxBoundsToCellRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],s).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],s).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],s).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],s).y/i.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),s=e.getZoomScale(i,this._cellZoom),o=e.project(t,this._cellZoom).floor(),r=e.getSize().divideBy(2*s);return new c.Bounds(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var s=this._getCelldPixelBounds(t),o=this._pxBoundsToCellRange(s),r=o.getCenter(),n=[],a=this.options.keepBuffer,l=new c.Bounds(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var u in this._cells){var h=this._cells[u].coords;h.z===this._cellZoom&&l.contains(new c.Point(h.x,h.y))||(this._cells[u].current=!1)}if(Math.abs(i-this._cellZoom)>1)this._setView(t,i);else{for(var p=o.min.y;p<=o.max.y;p++)for(var d=o.min.x;d<=o.max.x;d++){var m=new c.Point(d,p);if(m.z=this._cellZoom,this._isValidCell(m)){var f=this._cells[this._cellCoordsToKey(m)];f?f.current=!0:n.push(m)}}if(n.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==n.length)for(this._loading||(this._loading=!0),d=0;d<n.length;d++){var g=this._cellCoordsToKey(n[d]),v=this._keyToCellCoords(g);this._activeCells[v]?this._reuseCell(n[d]):this._createCell(n[d])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalCellRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var s=this._cellCoordsToBounds(t);return Object(c.toLatLngBounds)(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,i=this.getCellSize(),s=t.scaleBy(i),o=s.add(i);return[e.unproject(s,t.z),e.unproject(o,t.z)]},_cellCoordsToBounds:function(t){var e=this._cellCoordsToNwSe(t),i=new c.LatLngBounds(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),i=new c.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeCell:function(t){var e=this._cells[t];if(e){var i=this._keyToCellCoords(t),s=this._wrapCoords(i),o=this._cellCoordsToBounds(this._wrapCoords(i));e.current=!1,delete this._cells[t],this._activeCells[t]=e,this.cellLeave(o,s,t),this.fire("cellleave",{key:t,coords:s,bounds:o})}},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var i=this._wrapCoords(t),s=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(s,i,e),this.fire("cellenter",{key:e,coords:i,bounds:s})},_createCell:function(t){var e=this._cellCoordsToKey(t),i=this._wrapCoords(t),s=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(s,i,e),this.fire("cellcreate",{key:e,coords:i,bounds:s}),this._cells[e]={coords:t,current:!0},c.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,i){var s=this._cellCoordsToKey(t);(i=this._cells[s])&&(i.loaded=+new Date,i.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new c.Point(this._wrapX?c.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?c.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new c.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function It(t){this.values=[].concat(t||[])}It.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},It.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,s=0,o=this.values.length-1;s<=o;)if(e=(s+o)/2|0,+(i=this.values[Math.round(e)]).value<+t)s=e+1;else{if(!(+i.value>+t))return e;o=e-1}return Math.abs(~o)},It.prototype.between=function(t,e){var i=this.getIndex(t),s=this.getIndex(e);if(0===i&&0===s)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[s+1]&&this.values[s+1].value===e;)s++;return this.values[s]&&this.values[s].value===e&&this.values[s+1]&&s++,this.values.slice(i,s)},It.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},It.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},It.prototype.sort=function(){return this.values.sort((function(t,e){return+e.value-+t.value})).reverse(),this.dirty=!1,this};var At=It,Mt=Pt.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(t){if(Pt.prototype.initialize.call(this,t),t=R(t),t=c.Util.setOptions(this,t),this.service=vt(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&v("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new At,this._endTimeIndex=new At):this.options.timeField&&(this._timeIndex=new At),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(t){return G(t),this.service.metadata((function(e,i){if(!e){var s=i.supportedQueryFormats,o=!1;(!1===this.service.options.isModern||this.options.fetchAllFeatures)&&(o=!0),!o&&s&&-1!==s.indexOf("geoJSON")&&(this.service.options.isModern=!0),i.objectIdField&&(this.service.options.idAttribute=i.objectIdField),!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}}),this),t.on("zoomend",this._handleZoomChange,this),Pt.prototype.onAdd.call(this,t)},onRemove:function(t){return z(t),t.off("zoomend",this._handleZoomChange,this),Pt.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(t,e,i,s){this._activeRequests++,s=s||0;var o=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:t},!0),this._buildQuery(t,s).run((function(r,n,a){a&&a.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===o&&(!r&&n&&n.features.length&&c.Util.requestAnimFrame(c.Util.bind((function(){this._addFeatures(n.features,e),this._postProcessFeatures(t)}),this)),r||!n||n.features.length||this._postProcessFeatures(t),r&&this._postProcessFeatures(t),i&&i.call(this,r,n),a&&(a.exceededTransferLimit||a.properties&&a.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(t,e,i,s+n.features.length))}),this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){if(e){var i=this._cacheKey(e);this._cache[i]=this._cache[i]||[]}for(var s=t.length-1;s>=0;s--){var o=t[s].id;-1===this._currentSnapshot.indexOf(o)&&this._currentSnapshot.push(o),void 0!==i&&-1===this._cache[i].indexOf(o)&&this._cache[i].push(o)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t,e){var i=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(e))&&(i=i.offset(e)),i.params.resultType="tile",this.options.requestParams&&c.Util.extend(i.params,this.options.requestParams),this.options.simplifyFactor&&i.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&i.between(this.options.from,this.options.to),i},setWhere:function(t,e,i){this.options.where=t&&t.length?t:"1=1";for(var s=[],o=[],r=0,n=null,a=c.Util.bind((function(a,l){if(a&&(n=a),l)for(var u=l.features.length-1;u>=0;u--)o.push(l.features[u].id);--r<=0&&this._visibleZoom()&&t===this.options.where&&(this._currentSnapshot=o,c.Util.requestAnimFrame(c.Util.bind((function(){this.removeLayers(s),this.addLayers(o),e&&e.call(i,n)}),this)))}),this),l=this._currentSnapshot.length-1;l>=0;l--)s.push(this._currentSnapshot[l]);for(var u in this._cache={},this._cells){r++;var h=this._keyToCellCoords(u),p=this._cellCoordsToBounds(h);this._requestFeatures(p,h,a)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e,i,s){var o=this.options.from,r=this.options.to,n=0,a=null,l=c.Util.bind((function(c){c&&(a=c),this._filterExistingFeatures(o,r,t,e),n--,i&&n<=0&&i.call(s,a)}),this);if(this.options.from=t,this.options.to=e,this._filterExistingFeatures(o,r,t,e),"server"===this.options.timeFilterMode)for(var u in this._cells){n++;var h=this._keyToCellCoords(u),p=this._cellCoordsToBounds(h);this._requestFeatures(p,h,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,i,s){var o=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,r=this._getFeaturesInTimeRange(i,s);if(r.indexOf)for(var n=0;n<r.length;n++){var a=o.indexOf(r[n]);a>=0&&o.splice(a,1)}c.Util.requestAnimFrame(c.Util.bind((function(){this.removeLayers(o),this.addLayers(r)}),this))},_getFeaturesInTimeRange:function(t,e){var i,s=[];if(this.options.timeField.start&&this.options.timeField.end){var o=this._startTimeIndex.between(t,e),r=this._endTimeIndex.between(t,e);i=o.concat(r)}else{if(!this._timeIndex)return v("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];i=this._timeIndex.between(t,e)}for(var n=i.length-1;n>=0;n--)s.push(i[n].id);return s},_buildTimeIndexes:function(t){var e,i;if(this.options.timeField.start&&this.options.timeField.end){var s=[],o=[];for(e=t.length-1;e>=0;e--)s.push({id:(i=t[e]).id,value:new Date(i.properties[this.options.timeField.start])}),o.push({id:i.id,value:new Date(i.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(s),this._endTimeIndex.bulkAdd(o)}else{var r=[];for(e=t.length-1;e>=0;e--)r.push({id:(i=t[e]).id,value:new Date(i.properties[this.options.timeField])});this._timeIndex.bulkAdd(r)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var s=+t.properties[this.options.timeField];return s>=e&&s<=i}if(this.options.timeField.start&&this.options.timeField.end){var o=+t.properties[this.options.timeField.start],r=+t.properties[this.options.timeField.end];return o>=e&&o<=i||r>=e&&r<=i||o<=e&&r>=i}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cacheKey(this._cells[t].coords);this._cache[e]&&this.addLayers(this._cache[e])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(t){this._metadata?t(void 0,this._metadata):this.metadata(c.Util.bind((function(e,i){this._metadata=i,t(e,this._metadata)}),this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,e,i){this._getMetadata(c.Util.bind((function(s,o){if(s)e&&e.call(this,s,null);else{var r=t.features?t.features:[t];this.service.addFeatures(t,c.Util.bind((function(t,s){if(!t){for(var n=r.length-1;n>=0;n--)r[n].properties[o.objectIdField]=r.length>1?s[n].objectId:s.objectId,r[n].id=r.length>1?s[n].objectId:s.objectId;this._addFeatures(r)}e&&e.call(i,t,s)}),this))}}),this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,e,i){var s=t.features?t.features:[t];this.service.updateFeatures(t,(function(t,o){if(!t){for(var r=s.length-1;r>=0;r--)this.removeLayers([s[r].id],!0);this._addFeatures(s)}e&&e.call(i,t,o)}),this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,e,i){return this.service.deleteFeatures(t,(function(t,s){var o=s.length?s:[s];if(!t&&o.length>0)for(var r=o.length-1;r>=0;r--)this.removeLayers([o[r].objectId],!0);e&&e.call(i,t,s)}),this)}}),Dt=Mt.extend({options:{cacheLayers:!0},initialize:function(t){t.apikey&&(t.token=t.apikey),Mt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return Mt.prototype.onRemove.call(this,t)},createNewLayer:function(t){var e=c.GeoJSON.geometryToLayer(t,this.options);return e&&(e.defaultOptions=e.options),e},_updateLayer:function(t,e){var i=[],s=this.options.coordsToLatLng||c.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=c.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=c.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,s),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=c.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,s),t.setLatLngs(i);break;case"MultiPolygon":i=c.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,s),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;e>=0;e--){var i,s=t[e],o=this._layers[s.id];!this._visibleZoom()||!o||this._map.hasLayer(o)||this.options.timeField&&!this._featureWithinTimeRange(s)||(this._map.addLayer(o),this.fire("addfeature",{feature:o.feature},!0)),o&&this.options.simplifyFactor>0&&(o.setLatLngs||o.setLatLng)&&this._updateLayer(o,s),o||((i=this.createNewLayer(s))?(i.feature=s,i.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.setFeatureStyle(i.feature.id,this.options.style),this.fire("createfeature",{feature:i.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(s))&&this._map.addLayer(i)):v("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;e>=0;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||this._map.addLayer(i)}},removeLayers:function(t,e){for(var i=t.length-1;i>=0;i--){var s=t[i],o=this._layers[s];o&&(this.fire("removefeature",{feature:o.feature,permanent:e},!0),this._map.removeLayer(o)),o&&e&&delete this._layers[s]}},cellEnter:function(t,e){this._visibleZoom()&&!this._zooming&&this._map&&c.Util.requestAnimFrame(c.Util.bind((function(){var t=this._cacheKey(e),i=this._cellCoordsToKey(e),s=this._cache[t];this._activeCells[i]&&s&&this.addLayers(s)}),this))},cellLeave:function(t,e){this._zooming||c.Util.requestAnimFrame(c.Util.bind((function(){if(this._map){var t=this._cacheKey(e),i=this._cellCoordsToKey(e),s=this._cache[t],o=this._map.getBounds();if(!this._activeCells[i]&&s){for(var r=!0,n=0;n<s.length;n++){var a=this._layers[s[n]];a&&a.getBounds&&o.intersects(a.getBounds())&&(r=!1)}r&&this.removeLayers(s,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[i],delete this._activeCells[i])}}}),this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature((function(t){this.resetFeatureStyle(t.feature.id)}),this),this},setStyle:function(t){return this.options.style=t,this.eachFeature((function(e){this.setFeatureStyle(e.feature.id,t)}),this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||c.Path.prototype.options;return e&&(c.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){var i=this._layers[t];return"function"==typeof e&&(e=e(i.feature)),i.setStyle&&i.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i=this._map.getBounds();for(var s in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[s].feature.id)&&("function"==typeof this._layers[s].getLatLng&&i.contains(this._layers[s].getLatLng())||"function"==typeof this._layers[s].getBounds&&i.intersects(this._layers[s].getBounds()))&&t.call(e,this._layers[s])}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature((function(t){t.bringToBack&&t.bringToBack()}))},bringToFront:function(){this.eachFeature((function(t){t.bringToFront&&t.bringToFront()}))},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e=this._layers[t],i=e.feature;if(e&&e.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var s=this.options.pointToLayer(i,Object(c.latLng)(i.geometry.coordinates[1],i.geometry.coordinates[0]));e.setIcon(s.options.icon)}if(e&&e.setStyle&&this.options.pointToLayer){var o=this.options.pointToLayer(i,Object(c.latLng)(i.geometry.coordinates[1],i.geometry.coordinates[0]));this.setFeatureStyle(i.id,o.options)}e&&e.setStyle&&this.options.style&&this.resetStyle(i.id)}});function Ft(t){return new Dt(t)}var Rt=s.version},aAg2:function(t){t.exports=JSON.parse('{"name":"esri-leaflet","description":"Leaflet plugins for consuming ArcGIS Online and ArcGIS Server services.","version":"3.0.2","author":"Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)","bugs":{"url":"https://github.com/esri/esri-leaflet/issues"},"contributors":["Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)","John Gravois <jgravois@esri.com> (http://johngravois.com)","Gavin Rehkemper <grehkemper@esri.com>","Jacob Wasilkowski <jwasilkowski@esri.com> (https://jwasilgeo.github.io)"],"dependencies":{"@terraformer/arcgis":"^2.0.7","tiny-binary-search":"^1.0.3"},"devDependencies":{"@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^7.1.3","chai":"4.2.0","gh-release":"^4.0.3","highlight.js":"^9.12.0","http-server":"^0.12.3","husky":"^1.1.1","istanbul":"^0.4.5","karma":"^5.2.3","karma-chai-sinon":"^0.1.5","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sourcemap-loader":"^0.3.7","leaflet":"^1.6.0","mkdirp":"^0.5.1","mocha":"^8.1.3","npm-run-all":"^4.0.2","rollup":"^2.0.0","rollup-plugin-uglify":"^6.0.4","semistandard":"^9.0.0","sinon":"^6.3.5","sinon-chai":"3.2.0","snazzy":"^8.0.0","uglify-js":"^2.8.29","watch":"^1.0.2"},"files":["src/**/*.js","dist/esri-leaflet.js","dist/esri-leaflet.js.map","dist/esri-leaflet-debug.js.map","profiles/*.js"],"homepage":"http://esri.github.io/esri-leaflet","module":"src/EsriLeaflet.js","jsnext:main":"src/EsriLeaflet.js","jspm":{"registry":"npm","format":"es6","main":"src/EsriLeaflet.js"},"keywords":["arcgis","esri","esri leaflet","gis","leaflet plugin","mapping"],"license":"Apache-2.0","main":"dist/esri-leaflet-debug.js","peerDependencies":{"leaflet":"^1.0.0"},"readmeFilename":"README.md","repository":{"type":"git","url":"git@github.com:Esri/esri-leaflet.git"},"scripts":{"build":"rollup -c profiles/debug.js & rollup -c profiles/production.js","lint":"semistandard | snazzy","prebuild":"mkdirp dist","prepare":"npm run build","pretest":"npm run build","precommit":"npm run lint","fix":"semistandard --fix","release":"./scripts/release.sh","start-watch":"watch \\"npm run build\\" src","start":"run-p start-watch serve","serve":"http-server -p 5000 -c-1 -o","test":"npm run lint && karma start","test:ci":"npm run lint && karma start --browsers Chrome_travis_ci"},"semistandard":{"globals":["expect","L","XMLHttpRequest","sinon","xhr","proj4"]},"unpkg":"dist/esri-leaflet-debug.js"}')},n4TO:function(t,e,i){"use strict";i.r(e),i.d(e,"CustomerMapModule",(function(){return at}));var s=i("ofXK"),o=i("tyNb"),r=i("4R65"),n=(i("b1UB"),i("CvBG"),i("mD1w"),i("eapw"),i("M9GK"),i("HMfJ"),i("I8tt"),i("fXoL")),a=i("pD6V"),c=i("3cRz"),l=i("Ofeh"),u=i("XCAU"),h=i("tmcy"),p=i("XiUz"),d=i("bTqV"),m=i("STbY"),f=i("NFeN"),g=i("+0xr"),v=i("3Pt+"),y=i("M5z4"),_=i("wZkO"),b=i("kmnG"),x=i("qFsG"),S=i("7EHt"),C=i("MutI"),w=i("bSwM"),L=i("d3UM"),O=i("z17N"),T=i("FKr1"),k=i("Wp6s"),P=i("Xa2L");function I(t,e){if(1&t){const t=n.gc();n.fc(0,"mat-list-item",15),n.fc(1,"mat-checkbox",16),n.nc("change",(function(i){n.Hc(t);const s=e.$implicit;return n.rc(2).check(i.checked,s)})),n.ec(),n.fc(2,"a",17),n.nc("click",(function(){n.Hc(t);const i=e.$implicit;return n.rc(2).getLocation(i)})),n.Qc(3),n.ec(),n.fc(4,"a",18),n.fc(5,"mat-icon"),n.Qc(6,"more_vert"),n.ec(),n.ec(),n.fc(7,"mat-menu",19,20),n.fc(9,"button",21),n.Qc(10,"Hospital List"),n.ec(),n.fc(11,"button",22),n.Qc(12," Hospital Map "),n.ec(),n.ec(),n.ec()}if(2&t){const t=e.$implicit,i=n.Fc(8),s=n.rc(2);n.Ob(1),n.yc("checked",s.checkState(t.uniqueid)),n.Ob(2),n.Rc(t.name),n.Ob(1),n.yc("matMenuTriggerFor",i)}}function A(t,e){if(1&t){const t=n.gc();n.fc(0,"div"),n.fc(1,"div",8),n.fc(2,"mat-form-field",9),n.fc(3,"input",10),n.nc("keyup",(function(e){return n.Hc(t),n.rc().applyFilter(e.target.value)})),n.ec(),n.ec(),n.fc(4,"button",11),n.Qc(5," + "),n.ec(),n.fc(6,"button",11),n.Qc(7," - "),n.ec(),n.ec(),n.fc(8,"div"),n.fc(9,"mat-accordion"),n.fc(10,"mat-nav-list"),n.fc(11,"mat-expansion-panel",12),n.fc(12,"mat-expansion-panel-header"),n.fc(13,"mat-checkbox",13),n.nc("click",(function(e){return n.Hc(t),e.stopPropagation()}))("keydown",(function(e){return n.Hc(t),e.stopPropagation()}))("change",(function(e){return n.Hc(t),n.rc().checkByCustomer(e.checked)})),n.Qc(14),n.ec(),n.ec(),n.Pc(15,I,13,3,"mat-list-item",14),n.ec(),n.ec(),n.ec(),n.ec(),n.ec()}if(2&t){const t=n.rc();n.Ob(3),n.yc("checked",t.box),n.Ob(8),n.yc("expanded",!1),n.Ob(2),n.yc("checked",t.checkStateC(1)),n.Ob(1),n.Sc(" ",null==t.customer?null:t.customer.name," "),n.Ob(1),n.yc("ngForOf",t.customerDevices)}}function M(t,e){1&t&&(n.fc(0,"th",33),n.Qc(1,"Time"),n.ec())}function D(t,e){if(1&t&&(n.fc(0,"td",34),n.fc(1,"a"),n.Qc(2),n.sc(3,"date"),n.ec(),n.ec()),2&t){const t=e.$implicit;n.Ob(2),n.Rc(n.uc(3,1,t.eventtime,"medium"))}}function F(t,e){1&t&&(n.fc(0,"th",33),n.Qc(1,"Name"),n.ec())}function R(t,e){if(1&t&&(n.fc(0,"td",34),n.Qc(1),n.ec()),2&t){const t=n.rc(2);n.Ob(1),n.Rc(null==t.customerDevices[0]?null:t.customerDevices[0].name)}}function E(t,e){1&t&&(n.fc(0,"th",33),n.Qc(1,"Events"),n.ec())}function U(t,e){if(1&t&&(n.fc(0,"td",34),n.Qc(1),n.ec()),2&t){const t=e.$implicit;n.Ob(1),n.Rc(t.type)}}function B(t,e){1&t&&n.ac(0,"th",33)}function G(t,e){if(1&t&&(n.fc(0,"td",34),n.fc(1,"a",35),n.fc(2,"mat-icon"),n.Qc(3,"more_vert"),n.ec(),n.ec(),n.ec()),2&t){n.rc();const t=n.Fc(15);n.Ob(1),n.yc("matMenuTriggerFor",t)}}function z(t,e){1&t&&n.ac(0,"tr",36)}function Z(t,e){1&t&&n.ac(0,"tr",37)}function j(t,e){if(1&t&&(n.fc(0,"mat-tab",23),n.fc(1,"table",24),n.dc(2,25),n.Pc(3,M,2,0,"th",26),n.Pc(4,D,4,4,"td",27),n.cc(),n.dc(5,28),n.Pc(6,F,2,0,"th",26),n.Pc(7,R,2,1,"td",27),n.cc(),n.dc(8,29),n.Pc(9,E,2,0,"th",26),n.Pc(10,U,2,1,"td",27),n.cc(),n.dc(11,30),n.Pc(12,B,1,0,"th",26),n.Pc(13,G,4,1,"td",27),n.cc(),n.fc(14,"mat-menu",19,20),n.fc(16,"button",21),n.Qc(17,"Alert"),n.ec(),n.fc(18,"button",22),n.Qc(19," Delete "),n.ec(),n.ec(),n.Pc(20,z,1,0,"tr",31),n.Pc(21,Z,1,0,"tr",32),n.ec(),n.ec()),2&t){const t=n.rc();n.Ob(1),n.yc("dataSource",t.dataEvents),n.Ob(19),n.yc("matHeaderRowDef",t.displayedColumns2),n.Ob(1),n.yc("matRowDefColumns",t.displayedColumns2)}}function q(t,e){if(1&t&&(n.fc(0,"mat-option",51),n.Qc(1),n.ec()),2&t){const t=e.$implicit;n.yc("value",t.deviceid),n.Ob(1),n.Sc(" ",t.name," ")}}function N(t,e){if(1&t){const t=n.gc();n.fc(0,"div"),n.fc(1,"form",38),n.fc(2,"mat-form-field",39),n.fc(3,"mat-label"),n.Qc(4,"Device"),n.ec(),n.fc(5,"mat-select",40,41),n.nc("ngModelChange",(function(e){return n.Hc(t),n.rc().selected=e})),n.fc(7,"input",42),n.nc("keyup",(function(e){return n.Hc(t),n.rc().applyFilter(e.target.value)})),n.ec(),n.fc(8,"a",43),n.fc(9,"mat-icon",44),n.nc("click",(function(){return n.Hc(t),n.Fc(6).close()})),n.Qc(10,"clear"),n.ec(),n.ec(),n.Pc(11,q,2,2,"mat-option",45),n.ec(),n.ec(),n.fc(12,"mat-form-field"),n.ac(13,"input",46),n.ac(14,"owl-date-time",null,47),n.ec(),n.fc(16,"mat-form-field"),n.ac(17,"input",48),n.ac(18,"owl-date-time",null,49),n.ec(),n.ec(),n.fc(20,"button",50),n.nc("click",(function(){return n.Hc(t),n.rc().loadHistory()})),n.Qc(21," Load History "),n.ec(),n.ec()}if(2&t){const t=n.Fc(15),e=n.Fc(19),i=n.rc();n.Ob(1),n.yc("formGroup",i.myform),n.Ob(4),n.yc("ngModel",i.selected),n.Ob(6),n.yc("ngForOf",i.customerDevices),n.Ob(2),n.yc("owlDateTime",t)("owlDateTimeTrigger",t),n.Ob(4),n.yc("owlDateTime",e)("owlDateTimeTrigger",e)}}function Q(t,e){1&t&&(n.fc(0,"mat-card",52),n.ac(1,"mat-progress-spinner",53),n.ec())}function W(t,e){1&t&&(n.fc(0,"div"),n.Qc(1," No Records Found! "),n.ec())}let J=(()=>{class t{constructor(t,e,i,s,o){this.fb=t,this.route=e,this.customerService=i,this.deviceService=s,this.cusmapService=o,this.DeviceItem=[],this.devicelog=[],this.devicelogMatch=[],this.dataSource=new g.k([]),this.dataEvents=new g.k([]),this.displayedColumns2=["time","device_id","event","more"],this.selected=1}ngOnInit(){this.myform=this.fb.group({id:[],from_date:[""],to_date:[""],status:[""],customer_id:[""],d:[""]}),this.route.paramMap.subscribe(t=>{this.Id=t.get("id"),this.getCustomerDevices(this.Id)}),this.getAllEvents()}getCustomerDevices(t){this.customerService.getCustomerById(t).subscribe(t=>{this.customer=t,console.log(t)}),this.customerService.DeviceByCustomerWithPosition(t).subscribe(t=>{this.customerDevices=t,console.log(this.customerDevices),t.forEach((t,e)=>{this.devicelog.push(t.deviceid)}),this.dataSource=new g.k(t),console.log(this.devicelog)})}objectTab(t){console.log("index => ",t.index);var e=t.index;2==e&&setTimeout(()=>{const t=new Date;var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this.myform.patchValue({from_date:e,to_date:new Date})},100),0!=e&&1!=e||this.cusmapService.tabIndex({id:1})}applyFilter(t){}applyDevices(t){this.customerDevices=this.filterDevices.filter(e=>e.name.toLowerCase().indexOf(t)>-1)}check(t,e){t?(console.log(e),this.devicelogMatch.push(e.deviceid),this.devicelog.toString()===this.devicelogMatch.toString()&&this.DeviceItem.push(1),this.cusmapService.deviceDataExchange([e])):(this.devicelogMatch=this.devicelogMatch.filter(t=>t!==e.deviceid),this.DeviceItem=this.DeviceItem.filter(t=>1!==t),this.cusmapService.deviceRemove([e]))}checkByCustomer(t){t?(this.customerDevices.forEach((t,e)=>{this.DeviceItem.push(t.uniqueid)}),this.cusmapService.deviceDataExchange(this.customerDevices)):(this.DeviceItem=[],this.cusmapService.deviceRemove(this.customerDevices))}checkState(t){if(this.customerDevices)return this.DeviceItem.indexOf(t)>-1}checkStateC(t){if(this.customerDevices)return this.DeviceItem.indexOf(t)>-1}getAllEvents(){this.deviceService.getAllEvents().subscribe(t=>{this.Events=t,this.dataEvents=new g.k(t)})}loadHistory(){this.isLoading=!0;const t={from_date:this.myform.value.from_date,to_date:this.myform.value.to_date};console.log(this.myform.value),this.deviceService.getHistoryPostionBySearch(t).subscribe(t=>{console.log(t),this.historyData=t,this.isLoading=!1,this.cusmapService.deviceHistory(t)})}getLocation(t){this.cusmapService.deviceLocation(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Zb(v.e),n.Zb(o.a),n.Zb(y.a),n.Zb(u.a),n.Zb(c.a))},t.\u0275cmp=n.Tb({type:t,selectors:[["app-side-menu"]],decls:11,vars:5,consts:[[1,"container"],[3,"selectedTabChange"],["allTabs",""],["label","Objects"],[4,"ngIf"],["label","Events",4,"ngIf"],["label","History"],["style","display:flex; justify-content: center; align-items: center",4,"ngIf"],[1,"search-div"],[1,"filter"],["matInput","","placeholder","search","autocomplete","off",3,"checked","keyup"],[1,"btn"],[1,"space",2,"clear","both",3,"expanded"],[3,"checked","click","keydown","change"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"name",3,"checked","change"],[1,"devicename",3,"click"],[1,"b2",3,"matMenuTriggerFor"],[1,"dropdown-content"],["hospital","matMenu"],["mat-menu-item","","routerLink","/"],["mat-menu-item","","routerLink","info/map"],["label","Events"],["mat-table","","matTableExporter","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","time"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","device_id"],["matColumnDef","event"],["matColumnDef","more"],["class","header-row","mat-header-row","",4,"matHeaderRowDef"],["class","row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"matMenuTriggerFor"],["mat-header-row","",1,"header-row"],["mat-row","",1,"row"],[3,"formGroup"],[1,"half"],["formControlName","id",3,"ngModel","ngModelChange"],["sl",""],["matInput","","placeholder","search","autocomplete","off",1,"filterBox",3,"keyup"],[1,"closeButton"],[3,"click"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","from_date","placeholder","Date Time",3,"owlDateTime","owlDateTimeTrigger"],["dt1",""],["matInput","","formControlName","to_date","placeholder","To Time",3,"owlDateTime","owlDateTimeTrigger"],["dt2",""],["mat-raised-button","","color","primary",1,"btn-block",3,"click"],[3,"value"],[2,"display","flex","justify-content","center","align-items","center"],["color","primary","mode","indeterminate"]],template:function(t,e){1&t&&(n.fc(0,"div",0),n.fc(1,"mat-tab-group",1,2),n.nc("selectedTabChange",(function(t){return e.objectTab(t)})),n.fc(3,"mat-tab",3),n.Pc(4,A,16,5,"div",4),n.ec(),n.Pc(5,j,22,3,"mat-tab",5),n.fc(6,"mat-tab",6),n.Pc(7,N,22,7,"div",4),n.fc(8,"div"),n.Pc(9,Q,2,0,"mat-card",7),n.ec(),n.Pc(10,W,2,0,"div",4),n.ec(),n.ec(),n.ec()),2&t&&(n.Ob(4),n.yc("ngIf",e.customerDevices),n.Ob(1),n.yc("ngIf",e.customerDevices),n.Ob(2),n.yc("ngIf",e.customerDevices),n.Ob(2),n.yc("ngIf",e.isLoading),n.Ob(1),n.yc("ngIf",""==e.historyData))},directives:[_.b,_.a,s.l,b.c,x.b,S.a,C.d,S.c,S.d,w.a,s.k,C.b,m.c,f.a,m.d,m.a,o.d,g.j,g.c,g.e,g.b,g.g,g.i,g.d,g.a,g.f,g.h,v.t,v.n,v.g,b.g,L.a,v.m,v.f,v.c,O.b,O.d,O.a,d.b,T.o,k.a,P.a],pipes:[s.e],styles:[".container[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]{width:95%!important} .mat-tab-label,  .mat-tab-label-active{min-width:0!important;padding:10px!important;margin:10px!important}.filter[_ngcontent-%COMP%]{margin-left:5px!important}.btn[_ngcontent-%COMP%]{width:30px!important;background-color:#00f;margin-left:5px}.mat-column-select[_ngcontent-%COMP%]{width:10%!important}.mat-column-name[_ngcontent-%COMP%]{width:80%!important}.mat-column-more[_ngcontent-%COMP%]{width:10%!important}a[_ngcontent-%COMP%]{cursor:pointer}mat-menu[_ngcontent-%COMP%]{margin-left:50px!important;position:absolute}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#f9f9f9;min-width:160px;box-shadow:0 8px 16px 0 rgba(0,0,0,.2);z-index:20}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed!important;z-index:3000!important}.filterBox[_ngcontent-%COMP%]{width:150px;height:25px;margin-left:10px;margin-top:5px;margin-bottom:5px;border-radius:10px 10px 10px 10px;border:2px solid #000}.closeButton[_ngcontent-%COMP%]{margin-top:20px}.space[_ngcontent-%COMP%]{margin-bottom:2px}.group[_ngcontent-%COMP%]{font-weight:500}.group[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]{font-size:14px}.item[_ngcontent-%COMP%]{width:120%}.b2[_ngcontent-%COMP%]{float:right;flex:1 1 auto}.devicename[_ngcontent-%COMP%]{margin-top:5px;margin-left:5px;text-align:center}.clock[_ngcontent-%COMP%]{width:70%!important}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 10px;height:unset}"]}),t})();var H=i("zkoq");function K(t,e){1&t&&(n.fc(0,"h3",11),n.fc(1,"mat-icon"),n.Qc(2,"near_me"),n.ec(),n.Qc(3,"Name"),n.ec())}function V(t,e){if(1&t&&(n.fc(0,"h3",11),n.fc(1,"mat-icon"),n.Qc(2,"near_me"),n.ec(),n.Qc(3),n.fc(4,"span",15),n.ac(5,"i",16),n.Qc(6,"Active"),n.ec(),n.ec()),2&t){const t=n.rc();n.Ob(3),n.Sc("",null==t.deviceName?null:t.deviceName.name," ")}}let X=(()=>{class t{constructor(t){this.cusmapService=t,this.link="http://www.google.com/maps/place/"}ngOnInit(){console.log(this.url),this.cusmapService.deviceDetailsCatch.subscribe(t=>{t&&(this.url=this.link+t.latitude+","+t.longitude,this.deviceData=t,this.deviceName=t,this.attribute=JSON.parse(this.deviceData.attributes))}),this.cusmapService.detailsDataCatch.subscribe(t=>{t&&(this.url=this.link+t.latitude+","+t.longitude,this.deviceData=t,this.attribute=JSON.parse(this.deviceData.attributes))})}findLocation(t){}}return t.\u0275fac=function(e){return new(e||t)(n.Zb(c.a))},t.\u0275cmp=n.Tb({type:t,selectors:[["app-bottom-details"]],decls:129,vars:21,consts:[["fxLayout","row",1,"container"],["fxFlex","30%"],[1,"heading"],["class","deviceName",4,"ngIf"],["cols","1","rowHeight","20px"],[1,"pos"],[1,"mag"],["target","_blank",3,"href"],[1,"eyeicon",3,"click"],[1,"vertical"],["fxFlex","70%"],[1,"deviceName"],["cols","3","rowHeight","20px"],[1,"mag2"],["fxFlex","15%"],[1,"status"],["aria-hidden","true",1,"fa","fa-circle"]],template:function(t,e){1&t&&(n.fc(0,"div",0),n.fc(1,"div",1),n.fc(2,"div",2),n.Pc(3,K,4,0,"h3",3),n.Pc(4,V,7,1,"h3",3),n.ec(),n.ac(5,"hr"),n.fc(6,"mat-grid-list",4),n.fc(7,"mat-grid-tile",5),n.fc(8,"mat-label",6),n.fc(9,"b"),n.Qc(10," Address: "),n.ec(),n.ec(),n.Qc(11),n.sc(12,"slice"),n.fc(13,"a",7),n.fc(14,"mat-icon",8),n.nc("click",(function(){return e.findLocation(e.deviceData)})),n.Qc(15,"visibility"),n.ec(),n.ec(),n.ec(),n.fc(16,"mat-grid-tile",5),n.fc(17,"mat-label",6),n.fc(18,"b"),n.Qc(19," Time:"),n.ec(),n.ec(),n.Qc(20),n.sc(21,"date"),n.ec(),n.fc(22,"mat-grid-tile",5),n.fc(23,"mat-label",6),n.fc(24,"b"),n.Qc(25," Stop Duration:"),n.ec(),n.ec(),n.ec(),n.fc(26,"mat-grid-tile",5),n.fc(27,"mat-label",6),n.fc(28,"b"),n.Qc(29," Driver:"),n.ec(),n.ec(),n.ec(),n.ec(),n.ec(),n.ac(30,"div",9),n.fc(31,"div",10),n.fc(32,"h3",11),n.fc(33,"mat-icon"),n.Qc(34,"sensors"),n.ec(),n.Qc(35,"Sensor"),n.ec(),n.ac(36,"hr"),n.fc(37,"mat-grid-list",12),n.fc(38,"mat-grid-tile"),n.fc(39,"mat-icon"),n.Qc(40,"tag"),n.ec(),n.fc(41,"mat-label",13),n.fc(42,"b"),n.Qc(43,"Alert:"),n.ec(),n.ec(),n.Qc(44),n.ec(),n.fc(45,"mat-grid-tile"),n.fc(46,"mat-icon"),n.Qc(47,"slow_motion_video"),n.ec(),n.fc(48,"mat-label",13),n.fc(49,"b"),n.Qc(50," Motion:"),n.ec(),n.ec(),n.Qc(51),n.ec(),n.fc(52,"mat-grid-tile"),n.fc(53,"mat-icon"),n.Qc(54,"vpn_key"),n.ec(),n.fc(55,"mat-label",13),n.fc(56,"b"),n.Qc(57," Ignition:"),n.ec(),n.ec(),n.Qc(58),n.ec(),n.fc(59,"mat-grid-tile"),n.fc(60,"mat-icon"),n.Qc(61,"signal_cellular_alt"),n.ec(),n.fc(62,"mat-label",13),n.fc(63,"b"),n.Qc(64," GSM:"),n.ec(),n.ec(),n.Qc(65),n.ec(),n.fc(66,"mat-grid-tile"),n.fc(67,"mat-icon"),n.Qc(68,"battery_charging_full"),n.ec(),n.fc(69,"mat-label",13),n.fc(70,"b"),n.Qc(71," Battery Level:"),n.ec(),n.ec(),n.Qc(72),n.ec(),n.fc(73,"mat-grid-tile"),n.fc(74,"mat-icon"),n.Qc(75,"invert_colors"),n.ec(),n.fc(76,"mat-label",13),n.fc(77,"b"),n.Qc(78," Route Color:"),n.ec(),n.ec(),n.Qc(79," On "),n.ec(),n.fc(80,"mat-grid-tile"),n.fc(81,"mat-icon"),n.Qc(82,"satellite"),n.ec(),n.fc(83,"mat-label",13),n.fc(84,"b"),n.Qc(85," Satellite:"),n.ec(),n.ec(),n.Qc(86),n.ec(),n.fc(87,"mat-grid-tile"),n.fc(88,"mat-icon"),n.Qc(89,"villa"),n.ec(),n.fc(90,"mat-label",13),n.fc(91,"b"),n.Qc(92,"Doors:"),n.ec(),n.ec(),n.Qc(93," Opened "),n.ec(),n.fc(94,"mat-grid-tile"),n.fc(95,"mat-icon"),n.Qc(96,"drag_handle"),n.ec(),n.fc(97,"mat-label"),n.fc(98,"b"),n.Qc(99,"Distance:"),n.ec(),n.ec(),n.Qc(100," Opened "),n.ec(),n.fc(101,"mat-grid-tile"),n.fc(102,"mat-icon"),n.Qc(103,"moped"),n.ec(),n.fc(104,"mat-label",13),n.fc(105,"b"),n.Qc(106," Engin Hours:"),n.ec(),n.ec(),n.Qc(107),n.ec(),n.fc(108,"mat-grid-tile"),n.fc(109,"mat-icon"),n.Qc(110,"battery_saver"),n.ec(),n.fc(111,"mat-label"),n.fc(112,"b"),n.Qc(113," Battery Charging:"),n.ec(),n.ec(),n.Qc(114),n.ec(),n.fc(115,"mat-grid-tile"),n.fc(116,"mat-icon"),n.Qc(117,"speed"),n.ec(),n.fc(118,"mat-label",13),n.fc(119,"b"),n.Qc(120," Speed:"),n.ec(),n.ec(),n.Qc(121),n.ec(),n.ec(),n.ec(),n.ac(122,"div",9),n.fc(123,"div",14),n.fc(124,"h3",11),n.fc(125,"mat-icon"),n.Qc(126,"settings"),n.ec(),n.Qc(127,"Services"),n.ec(),n.ac(128,"hr"),n.ec(),n.ec()),2&t&&(n.Ob(3),n.yc("ngIf",!e.deviceData),n.Ob(1),n.yc("ngIf",e.deviceData),n.Ob(7),n.Sc(" ",(null==e.deviceData?null:e.deviceData.address.length)>20?n.vc(12,14,null==e.deviceData?null:e.deviceData.address,0,20)+"..":null==e.deviceData?null:e.deviceData.address," "),n.Ob(2),n.zc("href",e.url,n.Ic),n.Ob(7),n.Sc(" ",n.uc(21,18,null==e.deviceData?null:e.deviceData.servertime,"medium")," "),n.Ob(24),n.Sc(" ",null==e.deviceData?null:e.deviceData.contact," "),n.Ob(7),n.Sc(" ",null==e.attribute?null:e.attribute.motion," "),n.Ob(7),n.Sc(" ",null==e.attribute?null:e.attribute.ignition," "),n.Ob(7),n.Sc(" ",null==e.deviceData?null:e.deviceData.speed," "),n.Ob(7),n.Sc(" ",null==e.attribute?null:e.attribute.batteryLevel," "),n.Ob(14),n.Sc(" ",null==e.attribute?null:e.attribute.sat," "),n.Ob(21),n.Sc(" ",null==e.deviceData?null:e.deviceData.speed," "),n.Ob(7),n.Sc(" ",null==e.deviceData?null:e.deviceData.model," "),n.Ob(7),n.Sc(" ",null==e.attribute?null:e.attribute.speed," "))},directives:[p.b,p.a,s.l,H.a,H.c,b.g,f.a],pipes:[s.s,s.e],styles:[".container[_ngcontent-%COMP%]{width:100%;background-color:#fff}.f[_ngcontent-%COMP%]{width:30%;float:left}.f[_ngcontent-%COMP%], .s[_ngcontent-%COMP%]{height:100%;background-color:#deb887}.s[_ngcontent-%COMP%]{width:70%!important}.vertical[_ngcontent-%COMP%]{width:3px;background-color:grey}.pos[_ngcontent-%COMP%] >   figure, mat-grid-tile[_ngcontent-%COMP%]  figure{justify-content:flex-start!important}.mag[_ngcontent-%COMP%]{margin-right:15%}.mag2[_ngcontent-%COMP%]{margin-right:5%}.eyeicon[_ngcontent-%COMP%]{margin-left:3%}.deviceName[_ngcontent-%COMP%]{text-align:left}.status[_ngcontent-%COMP%]{font-size:small;float:right}"]}),t})();function Y(t,e){if(1&t&&(n.fc(0,"mat-option",13),n.Qc(1),n.ec()),2&t){const t=e.$implicit;n.yc("value",t.value),n.Ob(1),n.Sc(" ",t.value," ")}}let $=(()=>{class t{constructor(t,e){this.cusmapService=t,this.fb=e,this.speedControl=[{value:1},{value:2},{value:3},{value:4},{value:5},{value:6}],this.selected=1}ngOnInit(){this.myform=this.fb.group({motion:[]})}start(){this.cusmapService.deviceMove({id:101})}stop(){this.cusmapService.motionStop({id:100})}toggle(){console.log("toggle"),this.cusmapService.deviceToggle({id:101})}onChange(t){this.cusmapService.motionControl(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Zb(c.a),n.Zb(v.e))},t.\u0275cmp=n.Tb({type:t,selectors:[["app-history-info"]],decls:19,vars:3,consts:[[1,"container"],["label","Speed"],[1,"top_margin"],[1,"a"],[3,"click"],[1,"a",3,"formGroup"],[1,"space"],["formControlName","motion",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","Altitude"],["label","GSM"],["label","Battery"],["label","Ignition"],[3,"value"]],template:function(t,e){1&t&&(n.fc(0,"div",0),n.fc(1,"mat-tab-group"),n.fc(2,"mat-tab",1),n.fc(3,"div",2),n.fc(4,"a",3),n.fc(5,"mat-icon",4),n.nc("click",(function(){return e.start()})),n.Qc(6,"play_arrow"),n.ec(),n.ec(),n.fc(7,"a",3),n.fc(8,"mat-icon",4),n.nc("click",(function(){return e.toggle()})),n.Qc(9,"pause"),n.ec(),n.ec(),n.ec(),n.fc(10,"div"),n.fc(11,"form",5),n.fc(12,"mat-form-field",6),n.fc(13,"mat-select",7),n.nc("ngModelChange",(function(t){return e.selected=t}))("ngModelChange",(function(t){return e.onChange(t)})),n.Pc(14,Y,2,2,"mat-option",8),n.ec(),n.ec(),n.ec(),n.ec(),n.ec(),n.ac(15,"mat-tab",9),n.ac(16,"mat-tab",10),n.ac(17,"mat-tab",11),n.ac(18,"mat-tab",12),n.ec(),n.ec()),2&t&&(n.Ob(11),n.yc("formGroup",e.myform),n.Ob(2),n.yc("ngModel",e.selected),n.Ob(1),n.yc("ngForOf",e.speedControl))},directives:[_.b,_.a,f.a,v.t,v.n,v.g,b.c,L.a,v.m,v.f,s.k,T.o],styles:[".container[_ngcontent-%COMP%]{width:100%}.a[_ngcontent-%COMP%]{float:left}.space[_ngcontent-%COMP%]{width:20%}"]}),t})();function tt(t,e){if(1&t&&(n.fc(0,"div",23),n.fc(1,"a",24),n.ac(2,"img",25),n.ac(3,"span",26),n.ec(),n.ec()),2&t){n.rc();const t=n.Fc(24);n.Ob(1),n.yc("matMenuTriggerFor",t)}}function et(t,e){if(1&t&&(n.fc(0,"a",27),n.ac(1,"img",25),n.ac(2,"span",26),n.ec()),2&t){n.rc();const t=n.Fc(24);n.yc("matMenuTriggerFor",t)}}const it=[{path:"info/:id",component:(()=>{class t{constructor(t,e,i,s,o,r){this.mediaObserver=t,this.cusmapService=e,this.loginService=i,this.routing=s,this.deviceService=o,this.dateFormatService=r,this.devices=[],this.marker=[],this.markerArray=[],this.engineArray=[],this.parkArray=[],this.storeLatlng=[],this.timeArray=[],this.deviceIdArray=[]}ngOnInit(){this.mediaSub=this.mediaObserver.media$.subscribe(t=>{this.deviceXs="xs"===t.mqAlias}),this.myIcon=r.icon({iconUrl:"./assets/client/images/mm.png",iconSize:[20,40],iconAnchor:[12,39],color:"green",className:"icon"}),this.myIcon2=r.icon({iconUrl:"./assets/client/images/nn.png",iconSize:[20,40],iconAnchor:[12,39],color:"green",className:"icon"}),this.myIcon3=r.icon({iconUrl:"./assets/client/images/bike.png",iconSize:[40,80],iconAnchor:[12,69],color:"green",className:"icon"}),this.map=r.map("mapid",{center:[23.774252395907105,90.41607082790188],zoom:17,zoomControl:!1,attributionControl:!1});var t=r.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(this.map),e=r.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{center:[33.590241,130.421222],maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]});t.addTo(this.map),r.layerGroup(this.markerArray);var i=r.layerGroup().addTo(this.map);this.baseMaps={OSM:t,"Google Map":e},this.overlayMaps={Objects:i},this.deviceService.getMovingPosition({id:1}).subscribe(t=>{console.log(t)}),r.control.layers(this.baseMaps,this.overlayMaps).addTo(this.map);var s=r.control.sidebar("sidebar").addTo(this.map);s.show(),r.easyButton("fa-exchange",(function(t,e){s.toggle()})).addTo(this.map);var o=r.control.bar("menu",{position:"bottom",visible:!1}).addTo(this.map);o.show(),r.easyButton("fa-exchange",(function(t,e){o.toggle()}),{position:"bottomright"}).addTo(this.map),this.historyBar=r.control.bar("history",{position:"bottom",visible:!1}).addTo(this.map);var n=[];this.cusmapService.deviceDataCatch.subscribe(t=>{if(t){this.check=1,this.deviceIdArray.includes(t[0].deviceid)||(this.deviceIdArray.push(t[0].deviceid),this.fixtime=t[0].fixtime,this.fixtime=this.dateFormatService.dateTime("datetime",this.fixtime),console.log(this.fixtime),t.forEach(t=>{n[t.deviceid]=r.marker([t.latitude,t.longitude],{icon:this.myIcon3}).bindPopup(t.name+" <br> Address: "+t.contact+" <br> Model: "+t.model+" <br> Phone: "+t.phone+" <br> Type: "+t.category,{closeOnClick:!1,autoClose:!1}).addTo(this.map),i.addLayer(n[t.deviceid])}));var e=r.polyline([]).addTo(this.map);this.myInterval=setInterval(()=>{var t={id:this.deviceIdArray,fixtime:this.fixtime};console.log(t),1==this.check&&this.deviceService.getMovingPosition(t).subscribe(t=>{t.forEach(t=>{this.fixtime=t.fixtime;var i={lat:t.latitude,lng:t.longitude};r.Control.Geocoder.nominatim().reverse(i,this.map.options.crs.scale(this.map.getZoom()),e=>{t.address=e[0].name,console.log(t.name),this.cusmapService.detailsDataExchange(t)}),r.layerGroup(),this.markerArray=r.layerGroup(),console.log(t),this.marker=n[t.deviceid].setLatLng([t.latitude,t.longitude]).bindPopup(t.name+" <br> Address: "+t.contact+" <br> Model: "+t.model+" <br> Phone: "+t.phone+" <br> Type: "+t.category,{closeOnClick:!1,autoClose:!1}),t&&(this.line=e.addLatLng(r.latLng(t.latitude,t.longitude)).arrowheads({size:"10px",color:"red",frequency:"endonly"}))})})},5e3)}}),this.cusmapService.deviceRemoveFromMap.subscribe(t=>{t&&(this.check=0,clearInterval(this.myInterval),console.log(this.markerArray),t.forEach(t=>{this.deviceIdArray=this.deviceIdArray.filter(e=>e!==t.deviceid),console.log(t.deviceid),this.map.removeLayer(n[t.deviceid]),this.line&&this.map.removeLayer(this.line)}))}),this.cusmapService.deviceLocationCatch.subscribe(t=>{if(t){var e={lat:t.latitude,lng:t.longitude};console.log(e),r.Control.Geocoder.nominatim().reverse(e,this.map.options.crs.scale(this.map.getZoom()),e=>{t.address=e[0].name,this.cusmapService.deviceDetails(t)}),this.map.panTo(new r.LatLng(t.latitude,t.longitude))}}),this.cusmapService.deviceHistoryCatch.subscribe(t=>{if(console.log(t),t){this.map.removeLayer(i),o.hide(),this.historyBar.show();var e=r.polyline([]).addTo(this.map);this.positions=t,""!=this.positions&&(this.positions.forEach((t,i)=>{let s=new Date(t.servertime);this.timeArray.push(s);var o=(this.timeArray[i]-this.timeArray[i-1])/6e4;o>20&&(this.engine=r.marker([t.latitude,t.longitude],{icon:this.myIcon}).bindPopup(t.deviceid+" <br> Address: "+t.latitude+" <br> Model: "+t.longitude+" <br> Servertime: "+t.servertime+" <br> Speed: "+t.speed+" <br> Power: "+t.course,{closeOnClick:!1,autoClose:!1}).openPopup(),this.engineArray.push(this.engine),this.history=r.layerGroup(this.engineArray)),o<20&&o>5&&(this.park=r.marker([t.latitude,t.longitude],{icon:this.myIcon2}).bindPopup(t.deviceid+" <br> Address: "+t.latitude+" <br> Model: "+t.longitude+" <br> Servertime: "+t.servertime+" <br> Speed: "+t.speed+" <br> Power: "+t.course,{closeOnClick:!1,autoClose:!1}).openPopup().addTo(this.map),this.parkArray.push(this.park),this.parking=r.layerGroup(this.parkArray)),this.route=e.addLatLng(r.latLng(t.latitude,t.longitude)),this.arrow=this.route.arrowheads({size:"12px",color:"red",yawn:40,frequency:10}),this.storeLatlng.push([t.latitude,t.longitude])}),this.parking.addTo(this.map),this.overlayMaps={Route:this.route,Engine:this.history,Parking:this.parking},this.parking.addTo(this.map),this.polylineMotion=r.motion.polyline(this.storeLatlng,{color:" "},{auto:!1,duration:3e4,easing:r.Motion.Ease.easeInOutQuart},{removeOnEnd:!0,icon:this.myIcon3}).addTo(this.map))}}),this.cusmapService.deviceMoveCatch.subscribe(t=>{t&&this.polylineMotion.motionStart()}),this.cusmapService.deviceToggleCatch.subscribe(t=>{t&&this.polylineMotion.motionToggle()}),this.cusmapService.motionConCatch.subscribe(t=>{t&&(console.log(t),this.polylineMotion.motionSpeed(t))}),this.cusmapService.motionStoponCatch.subscribe(t=>{t&&this.polylineMotion.motionStop()}),this.cusmapService.tabIndexCatch.subscribe(t=>{t&&(this.map.removeLayer(this.route),this.map.removeLayer(this.parking),o.show(),this.map.addLayer(i),this.historyBar.hide())})}logout(){this.loginService.logout().subscribe(t=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.routing.navigate(["/"])})}}return t.\u0275fac=function(e){return new(e||t)(n.Zb(a.g),n.Zb(c.a),n.Zb(l.a),n.Zb(o.c),n.Zb(u.a),n.Zb(h.a))},t.\u0275cmp=n.Tb({type:t,selectors:[["app-map-info"]],decls:47,vars:3,consts:[["id","t","fxLayout","row","fxLayout.xs","column","color","primary",1,"mi"],["fxFlex","70%","fxLayout","row","fxLayout.xs","100%"],["fxFlex","80%"],["src","assets/client/images/traccar.png","width","130","alt","avatar"],["fxLayout","row","fxFlex","30%",4,"ngIf"],["fxFlex","25%","fxLayout.xs","100%"],[1,"position"],["mat-button","",1,"menu",3,"matMenuTriggerFor"],[1,"col"],["mat-button","","routerLink","/",1,"col"],["hospital","matMenu"],["mat-menu-item","","routerLink","/"],["mat-menu-item","","routerLink","info/map"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["routerLink","authorization/users/user-profile","mat-menu-item",""],["routerLink","authorization/users/change-password","mat-menu-item",""],["mat-menu-item",""],[3,"click"],["id","mapid",2,"width","100%","height","90%"],["id","sidebar",2,"width","100%","height","100%"],["id","menu",2,"height","200px"],["id","history",2,"height","150px"],["fxLayout","row","fxFlex","30%"],["id","r","mat-button","",3,"matMenuTriggerFor"],["src","assets/client/images/avatar.png","width","35","alt","avatar",1,"logout-image"],[1,"align-middle"],["mat-button","",3,"matMenuTriggerFor"]],template:function(t,e){if(1&t&&(n.fc(0,"div",0),n.fc(1,"div",1),n.fc(2,"div",2),n.ac(3,"img",3),n.ec(),n.Pc(4,tt,4,1,"div",4),n.ec(),n.fc(5,"div",5),n.fc(6,"div",6),n.fc(7,"button",7),n.fc(8,"span",8),n.Qc(9,"Tools"),n.ec(),n.fc(10,"mat-icon",8),n.Qc(11,"arrow_drop_down"),n.ec(),n.ec(),n.fc(12,"button",9),n.Qc(13,"Setup"),n.ec(),n.fc(14,"button",9),n.Qc(15,"Chat"),n.ec(),n.fc(16,"mat-menu",null,10),n.fc(18,"button",11),n.Qc(19,"Alerts"),n.ec(),n.fc(20,"button",12),n.Qc(21," Routes "),n.ec(),n.ec(),n.Pc(22,et,3,1,"a",13),n.fc(23,"mat-menu",null,14),n.fc(25,"a",15),n.fc(26,"mat-icon"),n.Qc(27,"account_circle"),n.ec(),n.fc(28,"span"),n.Qc(29,"Profile"),n.ec(),n.ec(),n.fc(30,"a",16),n.fc(31,"mat-icon"),n.Qc(32,"settings"),n.ec(),n.fc(33,"span"),n.Qc(34,"Change Pass "),n.ec(),n.ec(),n.fc(35,"a",17),n.fc(36,"mat-icon"),n.Qc(37,"exit_to_app"),n.ec(),n.fc(38,"span",18),n.nc("click",(function(){return e.logout()})),n.Qc(39,"Logout"),n.ec(),n.ec(),n.ec(),n.ec(),n.ec(),n.ec(),n.ac(40,"div",19),n.fc(41,"div",20),n.ac(42,"app-side-menu"),n.ec(),n.fc(43,"div",21),n.ac(44,"app-bottom-details"),n.ec(),n.fc(45,"div",22),n.ac(46,"app-history-info"),n.ec()),2&t){const t=n.Fc(17);n.Ob(4),n.yc("ngIf",e.deviceXs),n.Ob(3),n.yc("matMenuTriggerFor",t),n.Ob(15),n.yc("ngIf",!e.deviceXs)}},directives:[p.b,p.a,s.l,d.b,m.c,f.a,o.d,m.d,m.a,o.e,J,X,$,d.a],styles:["h2[_ngcontent-%COMP%]{margin-top:3%}.mi[_ngcontent-%COMP%]{width:100%!important;background-color:#3f51b5;float:left}.space[_ngcontent-%COMP%]{flex:1 1 auto}.col[_ngcontent-%COMP%], .colm[_ngcontent-%COMP%]{color:#fff}.colm[_ngcontent-%COMP%]{margin-left:2%}.map[_ngcontent-%COMP%]{width:100%}a[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:25px 30px!important}.tab[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#e63e3e}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.tab[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}#bottommenu[_ngcontent-%COMP%]{width:900px!important}.easy-button-button.disabled[_ngcontent-%COMP%]{display:none}.position[_ngcontent-%COMP%]{margin-top:2%;margin-left:10%}.admin_button[_ngcontent-%COMP%]{margin-top:.5%}"]}),t})()}];let st=(()=>{class t{}return t.\u0275mod=n.Xb({type:t}),t.\u0275inj=n.Wb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(it)],o.f]}),t})();var ot=i("jAig"),rt=i("YUcS"),nt=i("xoCY");let at=(()=>{class t{}return t.\u0275mod=n.Xb({type:t}),t.\u0275inj=n.Wb({factory:function(e){return new(e||t)},imports:[[s.c,st,ot.a,rt.a,nt.a,nt.b,v.q,v.i]]}),t})()}}]);